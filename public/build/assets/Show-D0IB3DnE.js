import{r as I,j as e,L,$ as c}from"./app-3e9ZfCZj.js";import{B as r}from"./button-tOsBMVu3.js";import{C as o,a as m,b as h,c as u,d as x}from"./card-CPvNgHsq.js";import{B as d}from"./badge-Dcgw1Reo.js";import{P as V}from"./page-header-ClrMVESu.js";import{P as M}from"./pagination-3tBS2Lwo.js";import{A as E}from"./app-layout-7lRn1_rF.js";import{T as $,a as H,b as C,c as f,d as O,e as p}from"./table-CA_0foKp.js";import{T as U,a as z,b as g,c as N}from"./tabs-DmmLbTXA.js";import{L as F}from"./label-CIrlRX49.js";import{S as q,a as G,b as J,c as K,d as S}from"./select-D3n8Qi7N.js";import{f as n}from"./index-CaunA62S.js";import{A as Q}from"./arrow-left-DyCW_lBj.js";import{S as k}from"./square-pen-BEaAvtxH.js";import{c as T}from"./createLucideIcon-BtOnYZj6.js";import{C as W}from"./clock-Bc5O7ajc.js";import{S as X,T as Y}from"./triangle-alert-CB08x4VC.js";import{U as P}from"./user-DtgIclHT.js";import"./chevron-left-CeniLpCK.js";import"./index-CkvEONY9.js";import"./index-CSgRh3VG.js";import"./index-BiOWnkU5.js";import"./index-C3obqkZ2.js";import"./x-DTbSmVa3.js";import"./index-BbGum64W.js";import"./avatar-CnrxwdK1.js";import"./app-logo-pu7XLt_2.js";import"./app-logo-icon-CH0F37vC.js";import"./users-D8IR1cY7.js";import"./file-text-W_Iskmvy.js";import"./tag-Cbang5gX.js";import"./qr-code-CqMqn-r0.js";import"./index-Dsn3sjeQ.js";import"./check-QjJiGsK8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],ee=T("ChartBar",Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],te=T("CirclePlus",se);function Me({report:t,incidents:j,reportStats:v,statCategories:y}){var w,_;const D=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Reports",href:route("incident-reports.index")},{title:t.report_number,href:route("incident-reports.show",t.id)}],[b,A]=I.useState(null),l={};v.forEach(s=>{const a=s.stat_category_item.category.label;s.stat_category_item.category.id,l[a]||(l[a]=[]),l[a].push(s)});const B=b?Object.entries(l).filter(([s,a])=>a.some(i=>i.stat_category_item.category.id===b)):Object.entries(l);function R(s){return s.integer_value!==null?s.integer_value.toString():s.string_value||""}return e.jsxs(E,{breadcrumbs:D,children:[e.jsx(L,{title:`Report ${t.report_number}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(V,{title:`Report ${t.report_number}`,description:n(new Date(t.report_date),"PPP"),actions:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(r,{variant:"outline",onClick:()=>window.history.back(),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx(r,{asChild:!0,children:e.jsxs(c,{href:route("incident-reports.edit",t.id),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Edit Report"]})})]})}),e.jsxs(U,{defaultValue:"details",className:"w-full",children:[e.jsxs(z,{className:"grid w-full grid-cols-3",children:[e.jsx(g,{value:"details",children:"Report Details"}),e.jsx(g,{value:"incidents",children:"Incidents"}),e.jsxs(g,{value:"stats",className:"flex items-center",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Statistical Data"]})]}),e.jsxs(N,{value:"details",className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(o,{className:"md:col-span-2",children:[e.jsxs(m,{children:[e.jsx(h,{children:"Report Details"}),e.jsx(u,{children:"Detailed information about this incident report"})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[e.jsxs(d,{variant:"outline",className:"flex items-center",children:[e.jsx(W,{className:"mr-1 h-3 w-3"}),"Report Date: ",n(new Date(t.report_date),"PPP")]}),e.jsx(d,{className:"flex items-center",variant:t.report_status==="approved"?"outline":t.report_status==="reviewed"?"secondary":"default",children:t.report_status}),e.jsxs(d,{variant:t.security_level==="classified"||t.security_level==="restricted"?"destructive":"default",className:"flex items-center",children:[e.jsx(X,{className:"mr-1 h-3 w-3"}),t.security_level]}),t.source&&e.jsxs(d,{variant:"outline",className:"flex items-center",children:["Source: ",t.source]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Report Details"}),e.jsx("div",{className:"whitespace-pre-wrap mt-2 text-muted-foreground",children:t.details})]}),t.action_taken&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Actions Taken"}),e.jsx("div",{className:"whitespace-pre-wrap mt-2 text-muted-foreground",children:t.action_taken})]}),t.recommendation&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Recommendations"}),e.jsx("div",{className:"whitespace-pre-wrap mt-2 text-muted-foreground",children:t.recommendation})]})]})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsx(h,{children:"Report Information"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Submitted By"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-muted-foreground"}),((w=t.submitter)==null?void 0:w.name)||"Unknown"]})]}),t.approver&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Approved By"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(_=t.approver)==null?void 0:_.name]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Created At"}),e.jsx("div",{className:"mt-1",children:n(new Date(t.created_at),"PPP p")})]}),t.updated_at!==t.created_at&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("div",{className:"mt-1",children:n(new Date(t.updated_at),"PPP p")})]})]})]})]}),e.jsx(N,{value:"incidents",children:e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Incidents"}),e.jsx(u,{children:"Incidents associated with this report"})]}),e.jsx(r,{asChild:!0,children:e.jsxs(c,{href:route("incident-reports.incidents",t.id),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"View All Incidents"]})})]}),e.jsxs(x,{children:[e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Title"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Date"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Category"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Severity"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:j.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"h-12 px-4 text-center align-middle",children:"No incidents found"})}):j.data.map(s=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("td",{className:"p-4 align-middle",children:s.title}),e.jsx("td",{className:"p-4 align-middle",children:n(new Date(s.incident_date),"PP")}),e.jsx("td",{className:"p-4 align-middle",children:s.category?e.jsx(d,{style:{backgroundColor:s.category.color,color:"#fff"},children:s.category.name}):"None"}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(d,{variant:s.severity==="high"?"destructive":s.severity==="medium"?"warning":"default",children:s.severity})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(r,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(c,{href:route("incidents.show",s.id),children:"View"})})})]},s.id))})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(M,{links:j.links})})]})]})}),e.jsx(N,{value:"stats",children:e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Statistical Data"}),e.jsx(u,{children:"Statistical information for this report"})]}),e.jsx(r,{asChild:!0,children:e.jsxs(c,{href:route("incident-reports.edit",t.id),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Edit Stats"]})})]}),e.jsx(x,{children:Object.keys(l).length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No statistical data available for this report."}),e.jsx(r,{variant:"outline",asChild:!0,className:"mt-4",children:e.jsxs(c,{href:route("incident-reports.edit",t.id),children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Add Statistical Data"]})})]}):e.jsxs("div",{className:"space-y-6",children:[y.length>1&&v.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx(F,{htmlFor:"category-filter",children:"Filter by Category"}),e.jsxs(q,{onValueChange:s=>A(s==="all"?null:parseInt(s)),defaultValue:"all",children:[e.jsx(G,{id:"category-filter",children:e.jsx(J,{placeholder:"Select a category"})}),e.jsxs(K,{children:[e.jsx(S,{value:"all",children:"All Categories"}),y.filter(s=>Object.entries(l).some(([a])=>l[a][0].stat_category_item.category.id===s.id)).map(s=>e.jsx(S,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:s.color}}),s.label]})},s.id))]})]})]}),B.map(([s,a])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:a[0].stat_category_item.category.color}}),s]})}),e.jsxs($,{children:[e.jsx(H,{children:e.jsxs(C,{children:[e.jsx(f,{children:"Item"}),e.jsx(f,{children:"Value"}),e.jsx(f,{children:"Notes"})]})}),e.jsx(O,{children:a.map(i=>e.jsxs(C,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:i.stat_category_item.color||i.stat_category_item.category.color}}),e.jsx("span",{children:i.stat_category_item.label})]})}),e.jsx(p,{children:R(i)}),e.jsx(p,{children:i.notes||"-"})]},i.id))})]})]},s))]})})]})})]})]})]})}export{Me as default};

import{r as l,j as e,L as Q,$ as g,S as x}from"./app-CbeKh3sQ.js";import{P as V}from"./pagination-CzG18o6Y.js";import{H as _}from"./header-CnbfMSqF.js";import{S as q}from"./SearchFilters-a3iyzjXJ.js";import{A as G,a as J,b as K,c as M,d as W,e as X,f as Y,g as Z}from"./alert-dialog-D_qAOQO4.js";import{B as i}from"./badge-BRzQMVqy.js";import{B as m}from"./button-vsEdbmui.js";import{C as ee,d as te}from"./card-DRnQwPQj.js";import{a as re,b as ae,c as oe,f as se}from"./permission-guard-Jly9WMCD.js";import{T as ne,a as de,b as f,c as o,d as ie,e as a}from"./table-CWG3enOx.js";import{u as le}from"./use-permissions-B4kQ_Xaw.js";import{A as ce}from"./app-layout-CfjUymSY.js";import{u as me}from"./translate-DDGPHNjD.js";import{S as pe,T as xe}from"./triangle-alert-D2IIfKaK.js";import{T as ge}from"./trending-up-BEzp2zoA.js";import{E as fe}from"./eye-DEj99WMU.js";import{P as ue}from"./pencil-WSX-4vNt.js";import{T as he}from"./trash-CUXg8l11.js";import{C as be}from"./check-lRMwoNkK.js";import{C as je}from"./chart-column-ZTAypupu.js";import"./utils-Bb4HXjj7.js";import"./createLucideIcon-C8XIMENg.js";import"./arrow-left-CumcE478.js";import"./plus-L_b-Iqd7.js";import"./select-CmNuGxCi.js";import"./index-DFtoJXdd.js";import"./index-oxwXHx3t.js";import"./index-BLwe4XBe.js";import"./index-D6KZUy1Z.js";import"./index-BogOZRgn.js";import"./input-Bw-0_52B.js";import"./search-BuWAt4Gn.js";import"./filter-x-Bs-M84bd.js";import"./arrow-up-down-W1LN37z0.js";import"./x-CQQzauN7.js";import"./index-DDyZSmUm.js";import"./avatar-BtcH7zJL.js";import"./file-text-C1z44-YN.js";import"./users-C__KGsfH.js";import"./tag-e31-1F12.js";import"./qr-code-B2awKxBM.js";import"./map-pin-CQeslq4k.js";import"./building-1My10aAi.js";import"./database-BoNrNW8a.js";const ye=[{value:"name",label:"Name"},{value:"info_type_id",label:"Type"},{value:"info_category_id",label:"Category"},{value:"department_id",label:"Department"},{value:"created_at",label:"Created Date"},{value:"updated_at",label:"Updated Date"}],Ne=[{value:10,label:"10 per page"},{value:25,label:"25 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}];function pt({infos:n,types:k=[],categories:v=[],departments:C=[],filters:s}){le();const{t:r}=me(),S=[{title:r("info.page_title"),href:"#"},{title:r("info.page_title"),href:route("infos.index")}],[u,h]=l.useState(s.search),[D,p]=l.useState(!1),[c,b]=l.useState(null),[w,j]=l.useState(s.type_id||""),[T,y]=l.useState(s.category_id||""),[A,N]=l.useState(s.department_id||""),P=t=>{t.preventDefault(),d({search:u})},I=t=>{d({sort:t})},O=()=>{const t=s.direction==="asc"?"desc":"asc";d({direction:t})},z=t=>{d({per_page:parseInt(t)})},B=t=>{j(t),d({type_id:t==="_all"?void 0:t})},E=t=>{y(t),d({category_id:t==="_all"?void 0:t})},F=t=>{N(t),d({department_id:t==="_all"?void 0:t})},d=t=>{x.get(route("infos.index"),{...s,...t,page:1},{preserveState:!0,preserveScroll:!0})},H=()=>{h(""),j(""),y(""),N(""),x.get(route("infos.index"),{search:"",sort:"name",direction:"asc",per_page:10,page:1,type_id:void 0,category_id:void 0,department_id:void 0})},L=t=>{b(t),p(!0)},$=()=>{c&&x.delete(route("infos.destroy",c.id),{onSuccess:()=>{b(null),p(!1)}})},R=t=>{x.patch(route("infos.confirm",t.id),{},{onSuccess:()=>{},onError:U=>{console.error("Confirmation error:",U)}})};return e.jsxs(ce,{breadcrumbs:S,children:[e.jsx(Q,{title:r("info.page_title")}),e.jsx(G,{open:D,onOpenChange:p,children:e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(M,{children:r("info.delete_dialog.title")}),e.jsx(W,{children:r("info.delete_dialog.description",{name:(c==null?void 0:c.name)||""})})]}),e.jsxs(X,{children:[e.jsx(Y,{onClick:()=>p(!1),children:r("info.delete_dialog.cancel")}),e.jsx(Z,{onClick:$,className:"bg-red-600 hover:bg-red-700",children:r("info.delete_dialog.confirm")})]})]})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(_,{title:r("info.page_title"),description:r("info.page_description"),buttonText:r("info.add_button"),icon:e.jsx(pe,{className:"h-10 w-10 text-white dark:text-gray-100"}),model:"info",routeName:"infos.create",theme:"purple"}),e.jsx(q,{searchQuery:u,onSearchChange:h,onSearchSubmit:P,searchPlaceholder:r("info.search_placeholder"),filters:{type:w,category:T,department:A,sort:s.sort,direction:s.direction,per_page:s.per_page},onTypeChange:B,onCategoryChange:E,onDepartmentChange:F,onSortChange:I,onDirectionChange:O,onPerPageChange:z,onResetFilters:H,types:[{value:"_all",label:r("info.all_types")},...k.map(t=>({value:t.id.toString(),label:t.name}))],categories:[{value:"_all",label:r("info.all_categories")},...v.map(t=>({value:t.id.toString(),label:t.name}))],departments:[{value:"_all",label:r("info.all_departments")},...C.map(t=>({value:t.id.toString(),label:t.name}))],sortOptions:ye.map(t=>({value:t.value,label:r(`info.sort_options.${t.value}`)})),perPageOptions:Ne.map(t=>({value:t.value,label:r("info.per_page_option",{count:t.value.toString()})})),title:r("info.search_filters"),description:r("info.find_and_filter")}),e.jsxs("div",{className:"mt-8",children:[e.jsx(_,{title:r("info.table.title"),description:r("info.table.description"),icon:e.jsx(ge,{className:"h-6 w-6 text-white"}),model:"info",routeName:"infos.create",theme:"purple",buttonText:r("info.add_button")}),e.jsx(ee,{className:"overflow-hidden rounded-lg border dark:border-gray-700 dark:bg-gray-800 shadow-sm",children:e.jsx(te,{className:"p-0",children:e.jsxs(ne,{children:[e.jsx(de,{children:e.jsxs(f,{className:"bg-muted/50 dark:bg-muted/30",children:[e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.id")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.name")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.type")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.category")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.department")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.owner")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.status")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.visits")}),e.jsx(o,{className:"px-6 py-4 font-semibold text-foreground dark:text-foreground",children:r("info.table.created_at")}),e.jsx(o,{className:"px-6 py-4 text-right font-semibold text-foreground dark:text-foreground",children:r("info.table.actions")})]})}),e.jsx(ie,{children:n.data&&n.data.length>0?n.data.map(t=>e.jsxs(f,{className:"hover:bg-muted/50 dark:hover:bg-muted/30 border-b border-border dark:border-border",children:[e.jsx(a,{className:"px-6 py-4 font-medium text-foreground dark:text-foreground",children:t.id}),e.jsx(a,{className:"px-6 py-4 font-medium text-foreground dark:text-foreground",children:t.name}),e.jsx(a,{className:"px-6 py-4",children:t.infoType?e.jsx(i,{variant:"secondary",className:"bg-secondary text-secondary-foreground dark:bg-secondary dark:text-secondary-foreground",children:t.infoType.name}):e.jsx("span",{className:"text-muted-foreground dark:text-muted-foreground",children:"-"})}),e.jsx(a,{className:"px-6 py-4",children:t.infoCategory?e.jsx(i,{variant:"secondary",className:"bg-secondary text-secondary-foreground dark:bg-secondary dark:text-secondary-foreground",children:t.infoCategory.name}):e.jsx("span",{className:"text-muted-foreground dark:text-muted-foreground",children:"-"})}),e.jsx(a,{className:"px-6 py-4",children:t.department?e.jsx(i,{variant:"secondary",className:"bg-secondary text-secondary-foreground dark:bg-secondary dark:text-secondary-foreground",children:t.department.name}):e.jsx("span",{className:"text-muted-foreground dark:text-muted-foreground",children:"-"})}),e.jsx(a,{className:"px-6 py-4",children:t.user?e.jsx(i,{variant:"outline",className:"border-border text-foreground dark:border-border dark:text-foreground",children:t.user.name}):t.creator?e.jsx(i,{variant:"outline",className:"border-border text-foreground dark:border-border dark:text-foreground",children:t.creator.name}):e.jsx("span",{className:"text-muted-foreground dark:text-muted-foreground",children:"-"})}),e.jsx(a,{className:"px-6 py-4",children:t.confirmed?e.jsx(i,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:r("info.status.confirmed")}):e.jsx(i,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:r("info.status.pending")})}),e.jsx(a,{className:"px-6 py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-foreground dark:text-foreground",children:t.visits_count||0}),e.jsx("div",{className:"text-xs text-muted-foreground dark:text-muted-foreground",children:r("info.table.visits_label")})]})}),e.jsx(a,{className:"px-6 py-4 text-muted-foreground dark:text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()}),e.jsx(a,{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(re,{model:"info",children:e.jsx(m,{variant:"ghost",size:"icon",asChild:!0,title:r("info.actions.view"),className:"h-8 w-8",children:e.jsx(g,{href:route("infos.show",t.id),children:e.jsx(fe,{className:"h-4 w-4"})})})}),e.jsx(ae,{model:"info",children:e.jsx(m,{variant:"ghost",size:"icon",asChild:!0,disabled:t.confirmed,title:t.confirmed?r("info.actions.cannot_edit_confirmed"):r("info.actions.edit"),className:"h-8 w-8",children:e.jsx(g,{href:route("infos.edit",t.id),children:e.jsx(ue,{className:"h-4 w-4"})})})}),e.jsx(oe,{model:"info",children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>L(t),disabled:t.confirmed,title:t.confirmed?r("info.actions.cannot_delete_confirmed"):r("info.actions.delete"),className:"h-8 w-8",children:e.jsx(he,{className:"h-4 w-4"})})}),e.jsx(se,{model:"info",children:!t.confirmed&&e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>R(t),title:r("info.actions.confirm"),className:"h-8 w-8",children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsx(m,{variant:"ghost",size:"icon",asChild:!0,title:r("criminal.analytics.view_analytics"),className:"h-8 w-8",children:e.jsx(g,{href:`/analytics/Info/${t.id}`,children:e.jsx(je,{className:"h-4 w-4"})})})]})})]},t.id)):e.jsx(f,{children:e.jsx(a,{colSpan:10,className:"h-32 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-muted-foreground dark:text-muted-foreground",children:[e.jsx("div",{className:"rounded-full bg-muted dark:bg-black p-4",children:e.jsx(xe,{className:"h-8 w-8 text-muted-foreground dark:text-muted-foreground dark:bg-black"})}),e.jsx("p",{className:"text-lg font-semibold text-foreground dark:text-foreground",children:r("info.no_records")}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-muted-foreground",children:r("info.no_records_description")})]})})})})]})})})]}),n&&n.links&&n.links.length>0&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(V,{links:n.links})})]})]})}export{pt as default};

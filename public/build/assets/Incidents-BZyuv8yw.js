import{j as e,L as u,$ as a}from"./app-i9gygtI7.js";import{B as n}from"./button-DA8WHqQ5.js";import{C as c,d as l,a as f,b as j,c as _}from"./card-NUH92OWN.js";import{B as i}from"./badge-CGb-l8vH.js";import{P as g}from"./page-header-FZ74MmJ8.js";import{A as N}from"./app-layout-COHwvIY4.js";import{u as b}from"./translate-wL0aa-sI.js";import{A as v}from"./arrow-left-262aYfzE.js";import{P as o}from"./plus-DpSM99ox.js";import{f as m}from"./index-CaunA62S.js";import{C as w}from"./calendar-D2wuIBLo.js";import{M as C}from"./users-CRlr-5yi.js";import{F as y}from"./file-text-DN0_y2i8.js";import"./utils-Cqzwlyr3.js";import"./index-BYxWpEkI.js";import"./createLucideIcon-CCdCu9x0.js";import"./index-DvqLlsqE.js";import"./index-CeLN-tmV.js";import"./index-CVa0K7PG.js";import"./x-C8tQnPGz.js";import"./index-BVlwhF2s.js";import"./avatar-sdpJXCM7.js";import"./app-logo-Zw_iVi_A.js";import"./app-logo-icon-CAGB5ViX.js";import"./eye-CM8Mcy_6.js";import"./tag-BP1vVV3I.js";import"./triangle-alert-TrSvGMVO.js";import"./qr-code-5CTkCvG_.js";import"./globe-DI9HJTz2.js";function se({report:r,incidents:d}){const{t}=b(),x=[{title:t("sidebar.intelligence_dashboard"),href:"/dashboard"},{title:t("sidebar.incident_reports"),href:route("incident-reports.index")},{title:r.report_number,href:route("incident-reports.show",r.id)},{title:t("incidents.page_title"),href:route("incident-reports.incidents",r.id)}];function p(s){switch(s){case"high":return e.jsx(i,{variant:"destructive",children:s});case"medium":return e.jsx(i,{variant:"default",children:s});default:return e.jsx(i,{variant:"outline",children:s})}}function h(s){switch(s){case"closed":return e.jsx(i,{variant:"secondary",children:t("incidents.status.closed")});case"in_progress":return e.jsx(i,{variant:"default",children:t("incidents.status.in_progress")});default:return e.jsx(i,{variant:"outline",children:s})}}return e.jsxs(N,{breadcrumbs:x,children:[e.jsx(u,{title:t("incident_reports.incidents.page_title",{number:r.report_number})}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(g,{title:t("incident_reports.incidents.page_header_title",{number:r.report_number}),description:t("incident_reports.incidents.page_header_desc",{date:m(new Date(r.report_date),"PPP")}),actions:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(a,{href:route("incident-reports.show",r.id),children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t("incident_reports.actions.back_to_report")]})}),e.jsx(n,{asChild:!0,children:e.jsxs(a,{href:route("incidents.create",{report_id:r.id}),children:[e.jsx(o,{className:"mr-2 h-4 w-4"}),t("incident_reports.actions.add_incident")]})})]})}),d.length===0?e.jsx(c,{children:e.jsx(l,{className:"flex flex-col items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:t("incidents.no_incidents")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("incident_reports.incidents.empty.description")}),e.jsx(n,{className:"mt-4",asChild:!0,children:e.jsxs(a,{href:route("incidents.create",{report_id:r.id}),children:[e.jsx(o,{className:"mr-2 h-4 w-4"}),t("incident_reports.incidents.empty.add_first")]})})]})})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(s=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(f,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{className:"text-base",children:e.jsx(a,{href:route("incidents.show",s.id),className:"hover:underline text-primary",children:s.title})}),e.jsxs(_,{className:"flex items-center text-xs",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),m(new Date(s.incident_date),"PPP")]})]}),s.category?e.jsx(i,{style:{backgroundColor:s.category.color},children:s.category.name}):e.jsx(i,{variant:"outline",children:t("incident_reports.incidents.uncategorized")})]})}),e.jsxs(l,{className:"flex-1 pb-2",children:[e.jsxs("div",{className:"mb-3 flex items-start text-xs text-muted-foreground",children:[e.jsx(C,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:s.location||t("incidents.unspecified_location")})]}),e.jsx("p",{className:"text-sm line-clamp-3",children:s.description})]}),e.jsx("div",{className:"px-6 pb-4 pt-0 mt-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[p(s.severity),h(s.status)]}),e.jsx(n,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(a,{href:route("incidents.show",s.id),children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),t("incident_reports.view")]})})]})})]},s.id))})]})]})}export{se as default};

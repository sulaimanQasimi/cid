import{m as q,j as e,L as I,$ as L}from"./app-Czsz3ga9.js";import{B as x}from"./button-CKdllIOS.js";import{C as j,a as u,b as _,c as T,d as g,e as w}from"./card-BHa63vbK.js";import{I as d}from"./input-CyzPLHPg.js";import{L as a}from"./label-BpxGcMk3.js";import{T as V}from"./textarea-CcWYeMMo.js";import{P as A}from"./page-header-CHU0HS7M.js";import{I as c}from"./input-error-RV-JOBeR.js";import{S as o,a as m,b as p,c as h,d as l}from"./select-BF7ygK_5.js";import{S as D}from"./separator-BHTCTIwB.js";import{u as k}from"./translate-BwqIl_WO.js";import{A as B}from"./app-layout-SMAHjsOb.js";import{A as E}from"./arrow-left-DuBn3N8j.js";import{S as H}from"./save-iW3X8p4j.js";import"./index-B97srWOL.js";import"./index-Cm_rdgC6.js";import"./index-B2uJwltq.js";import"./index-BugM-CEt.js";import"./createLucideIcon-DJy6bF42.js";import"./index-CrT4wfWz.js";import"./check-DwCBjevf.js";import"./x-Bu793gJv.js";import"./index-DRTj8I4Z.js";import"./avatar-DKeaeSW8.js";import"./app-logo-DhSe7mJZ.js";import"./app-logo-icon-DbyAI1nt.js";import"./triangle-alert-CBAp-B0X.js";import"./file-text-rlW4jRe5.js";import"./users--TnmxFgG.js";import"./tag-C2luWRjz.js";import"./qr-code-GVeF0qj1.js";const P=[{title:"Incidents",href:route("incidents.index")},{title:"Create",href:route("incidents.create")}];function _e({districts:f,categories:y,reports:N}){const{t:i}=k(),{data:t,setData:n,post:C,processing:S,errors:r,reset:b}=q({title:"",description:"",incident_date:new Date().toISOString().split("T")[0],incident_time:"",district_id:"",incident_category_id:"",incident_report_id:"none",location:"",coordinates:"",casualties:"0",injuries:"0",incident_type:"",status:"reported"}),F=s=>{s.preventDefault(),{...t},C(route("incidents.store"),{onSuccess:()=>{}})};return e.jsxs(B,{breadcrumbs:P,children:[e.jsx(I,{title:i("incidents.create_title")}),e.jsx(A,{title:i("incidents.create_title"),description:i("incidents.create_description"),actions:e.jsx(x,{variant:"outline",asChild:!0,children:e.jsxs(L,{href:route("incidents.index"),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),i("incidents.back_to_list")]})})}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(_,{children:i("incidents.basic_info")}),e.jsx(T,{children:i("incidents.basic_info_description")})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"title",children:[i("incidents.form.title")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(d,{id:"title",value:t.title,onChange:s=>n("title",s.target.value),placeholder:i("incidents.form.title_placeholder"),required:!0}),e.jsx(c,{message:r.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"incident_type",children:[i("incidents.form.type")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(d,{id:"incident_type",value:t.incident_type,onChange:s=>n("incident_type",s.target.value),placeholder:i("incidents.form.type_placeholder"),required:!0}),e.jsx(c,{message:r.incident_type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"description",children:[i("incidents.form.description")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(V,{id:"description",value:t.description,onChange:s=>n("description",s.target.value),placeholder:i("incidents.form.description_placeholder"),rows:5,required:!0}),e.jsx(c,{message:r.description})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"incident_date",children:[i("incidents.form.date")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(d,{id:"incident_date",type:"date",value:t.incident_date,onChange:s=>n("incident_date",s.target.value),required:!0}),e.jsx(c,{message:r.incident_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"incident_time",children:i("incidents.form.time")}),e.jsx(d,{id:"incident_time",type:"time",value:t.incident_time,onChange:s=>n("incident_time",s.target.value)}),e.jsx(c,{message:r.incident_time})]})]})]})]}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(_,{children:i("incidents.location_classification")})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"district_id",children:[i("incidents.form.district")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(o,{value:t.district_id,onValueChange:s=>n("district_id",s),required:!0,children:[e.jsx(m,{children:e.jsx(p,{placeholder:i("incidents.form.select_district")})}),e.jsx(h,{children:f.map(s=>{var v;return e.jsxs(l,{value:s.id.toString(),children:[s.name," (",(v=s.province)==null?void 0:v.name,")"]},s.id)})})]}),e.jsx(c,{message:r.district_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"incident_category_id",children:[i("incidents.form.category")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(o,{value:t.incident_category_id,onValueChange:s=>n("incident_category_id",s),required:!0,children:[e.jsx(m,{children:e.jsx(p,{placeholder:i("incidents.form.select_category")})}),e.jsx(h,{children:y.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(c,{message:r.incident_category_id})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"location",children:i("incidents.form.location")}),e.jsx(d,{id:"location",value:t.location,onChange:s=>n("location",s.target.value),placeholder:i("incidents.form.location_placeholder")}),e.jsx(c,{message:r.location})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"coordinates",children:i("incidents.form.coordinates")}),e.jsx(d,{id:"coordinates",value:t.coordinates,onChange:s=>n("coordinates",s.target.value),placeholder:i("incidents.form.coordinates_placeholder")}),e.jsx(c,{message:r.coordinates})]})]})]}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(_,{children:i("incidents.impact_status")})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"casualties",children:i("incidents.form.casualties")}),e.jsx(d,{id:"casualties",type:"number",min:"0",value:t.casualties,onChange:s=>n("casualties",s.target.value)}),e.jsx(c,{message:r.casualties})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"injuries",children:i("incidents.form.injuries")}),e.jsx(d,{id:"injuries",type:"number",min:"0",value:t.injuries,onChange:s=>n("injuries",s.target.value)}),e.jsx(c,{message:r.injuries})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"status",children:[i("incidents.form.status")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(o,{value:t.status,onValueChange:s=>n("status",s),required:!0,children:[e.jsx(m,{children:e.jsx(p,{placeholder:i("incidents.form.select_status")})}),e.jsxs(h,{children:[e.jsx(l,{value:"reported",children:i("incidents.status.reported")}),e.jsx(l,{value:"investigating",children:i("incidents.status.investigating")}),e.jsx(l,{value:"resolved",children:i("incidents.status.resolved")}),e.jsx(l,{value:"closed",children:i("incidents.status.closed")})]})]}),e.jsx(c,{message:r.status})]}),e.jsx(D,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"incident_report_id",children:i("incidents.form.assign_report")}),e.jsxs(o,{value:t.incident_report_id,onValueChange:s=>n("incident_report_id",s),children:[e.jsx(m,{children:e.jsx(p,{placeholder:i("incidents.form.select_report_optional")})}),e.jsxs(h,{children:[e.jsx(l,{value:"none",children:i("incidents.none")}),N.map(s=>e.jsx(l,{value:s.id.toString(),children:s.report_number},s.id))]})]}),e.jsx(c,{message:r.incident_report_id})]})]}),e.jsxs(w,{className:"flex justify-end space-x-2",children:[e.jsx(x,{variant:"outline",onClick:()=>b(),children:i("common.cancel")}),e.jsxs(x,{type:"submit",disabled:S,children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),i("incidents.save_incident")]})]})]})]})]})}export{_e as default};

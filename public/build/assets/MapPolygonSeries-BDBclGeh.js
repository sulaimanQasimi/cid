import{e as ut,s as Ue,w as si,x as ai,r as li,T as ui,y as hi,u as Ve,d as ci,f as Xt,n as fi,z as pi}from"./Theme-Dgo0XspA.js";import{a2 as Mn,o as Qe,a as Ke,a3 as de,a4 as gi,J as di,a5 as Ln,a6 as mi,a7 as It,a8 as vi,m as yi,R as _i,e as Pi,O as tn,f as en,G as On,a9 as wi}from"./SerialChart-CAnqEg8j.js";import{e as Si,g as bi}from"./app-Dek5SzaG.js";class jt extends Mn{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geometries",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geoJSONparsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_excluded",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_notIncluded",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){this.fields.push("geometry","geometryType"),this._setRawDefault("geometryField","geometry"),this._setRawDefault("geometryTypeField","geometryType"),this._setRawDefault("idField","id"),this.on("geoJSON",t=>{let n=this._prevSettings.geoJSON;n&&n!=t&&this.data.clear()}),super._afterNew()}_handleDirties(){const t=this.get("geoJSON");let n=this._prevSettings.geoJSON;n&&n!=t&&(this._prevSettings.geoJSON=void 0,this._geoJSONparsed=!1),this._geoJSONparsed||(this._parseGeoJSON(),this._geoJSONparsed=!0)}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty&&this._handleDirties(),this.get("geoJSON")&&(this.isDirty("geoJSON")||this.isDirty("include")||this.isDirty("exclude"))){this._handleDirties();const t=this.chart,n=this.get("exclude");n&&(t&&(t._centerLocation=null),ut(n,o=>{const r=this.getDataItemById(o);r&&this._excludeDataItem(r)}),ut(this._excluded,o=>{const r=o.get("id");r&&n.indexOf(r)==-1&&this._unexcludeDataItem(o)})),(!n||n.length==0)&&(ut(this._excluded,o=>{this._unexcludeDataItem(o)}),this._excluded=[]);const i=this.get("include");i&&(t&&(t._centerLocation=null),ut(this.dataItems,o=>{const r=o.get("id");r&&i.indexOf(r)==-1?this._notIncludeDataItem(o):this._unNotIncludeDataItem(o)})),i||(ut(this._notIncluded,o=>{this._unNotIncludeDataItem(o)}),this._notIncluded=[])}}_excludeDataItem(t){this._removeGeometry(t.get("geometry")),Ue(this._excluded,t)}_unexcludeDataItem(t){this._addGeometry(t.get("geometry"),this)}_notIncludeDataItem(t){this._removeGeometry(t.get("geometry")),Ue(this._notIncluded,t)}_unNotIncludeDataItem(t){this._addGeometry(t.get("geometry"),this)}checkInclude(t,n,i){if(n){if(n.length==0)return!1;if(n.indexOf(t)==-1)return!1}return!(i&&i.length>0&&i.indexOf(t)!=-1)}_parseGeoJSON(){const t=this.get("geoJSON");if(t){let n;t.type=="FeatureCollection"?n=t.features:t.type=="Feature"?n=[t]:["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(t.type)!=-1?n=[{geometry:t}]:console.log("nothing found in geoJSON");const i=this.get("geodataNames");if(n){const r=this.get("idField","id");for(let s=0,a=n.length;s<a;s++){let u=n[s],c=u.geometry;if(c){let l=c.type,h=u[r];if(i&&i[h]&&(u.properties.name=i[h]),this._types.indexOf(l)!=-1){let f;h!=null&&(f=si(this.dataItems,g=>g.get("id")==h));let p;f&&(p=f.dataContext),f?p.geometry||(p.geometry=c,p.geometryType=l,f.set("geometry",c),f.set("geometryType",l),this.processDataItem(f)):(p={geometry:c,geometryType:l,madeFromGeoData:!0},p[r]=h,this.data.push(p)),ai(u.properties,p)}}}}const o="geodataprocessed";this.events.isEnabled(o)&&this.events.dispatch(o,{type:o,target:this})}}_placeBulletsContainer(t){this.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){}projection(){const t=this.chart;if(t)return t.get("projection")}geoPath(){const t=this.chart;if(t)return t.getPrivate("geoPath")}_addGeometry(t,n){if(t&&n.get("affectsBounds",!0)){this._geometries.push(t);const i=this.chart;i&&i.markDirtyGeometries()}}_removeGeometry(t){if(t){li(this._geometries,t);const n=this.chart;n&&n.markDirtyGeometries()}}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}_onDataClear(){super._onDataClear(),this._geoJSONparsed=!1,this._markDirtyKey("exclude")}}Object.defineProperty(jt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapSeries"});Object.defineProperty(jt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mn.classNames.concat([jt.className])});class J{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let o=0;o<this._n&&o<32;o++){const r=n[o],s=t+r,a=Math.abs(t)<Math.abs(r)?t-(s-r):r-(s-t);a&&(n[i++]=a),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,o,r,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,o=t[--n],s=i+o,r=o-(s-i),!r););n>0&&(r<0&&t[n-1]<0||r>0&&t[n-1]>0)&&(o=r*2,i=s+o,o==i-s&&(s=i))}return s}}function*Di(e){for(const t of e)yield*t}function Rn(e){return Array.from(Di(e))}var j=1e-6,nn=1e-12,O=Math.PI,V=O/2,Ht=O/4,q=O*2,I=180/O,x=O/180,$=Math.abs,Nn=Math.atan,gt=Math.atan2,R=Math.cos,Yo=Math.ceil,Ei=Math.exp,we=Math.hypot,xi=Math.log,M=Math.sin,Ci=Math.sign||function(e){return e>0?1:e<0?-1:0},dt=Math.sqrt,Mi=Math.tan;function Li(e){return e>1?0:e<-1?O:Math.acos(e)}function yt(e){return e>1?V:e<-1?-V:Math.asin(e)}function Go(e){return(e=M(e/2))*e}function k(){}function Ut(e,t){e&&rn.hasOwnProperty(e.type)&&rn[e.type](e,t)}var on={Feature:function(e,t){Ut(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,o=n.length;++i<o;)Ut(n[i].geometry,t)}},rn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Se(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)Se(n[i],t,0)},Polygon:function(e,t){sn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)sn(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,o=n.length;++i<o;)Ut(n[i],t)}};function Se(e,t,n){var i=-1,o=e.length-n,r;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function sn(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Se(e[n],t,1);t.polygonEnd()}function ht(e,t){e&&on.hasOwnProperty(e.type)?on[e.type](e,t):Ut(e,t)}var Vt=new J,Qt=new J,zn,jn,be,De,Ee,rt={point:k,lineStart:k,lineEnd:k,polygonStart:function(){Vt=new J,rt.lineStart=Oi,rt.lineEnd=Ri},polygonEnd:function(){var e=+Vt;Qt.add(e<0?q+e:e),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Qt.add(q)}};function Oi(){rt.point=Ni}function Ri(){Tn(zn,jn)}function Ni(e,t){rt.point=Tn,zn=e,jn=t,e*=x,t*=x,be=e,De=R(t=t/2+Ht),Ee=M(t)}function Tn(e,t){e*=x,t*=x,t=t/2+Ht;var n=e-be,i=n>=0?1:-1,o=i*n,r=R(t),s=M(t),a=Ee*s,u=De*r+a*R(o),c=a*i*M(o);Vt.add(gt(c,u)),be=e,De=r,Ee=s}function $n(e){return Qt=new J,ht(e,rt),Qt*2}function Kt(e){return[gt(e[1],e[0]),yt(e[2])]}function _t(e){var t=e[0],n=e[1],i=R(n);return[i*R(t),i*M(t),M(n)]}function Bt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Et(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function me(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Zt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function te(e){var t=dt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Y,U,G,K,vt,Yn,Gn,Dt,zt,pt,ft,lt={point:xe,lineStart:an,lineEnd:ln,polygonStart:function(){lt.point=In,lt.lineStart=zi,lt.lineEnd=ji,zt=new J,rt.polygonStart()},polygonEnd:function(){rt.polygonEnd(),lt.point=xe,lt.lineStart=an,lt.lineEnd=ln,Vt<0?(Y=-(G=180),U=-(K=90)):zt>j?K=90:zt<-1e-6&&(U=-90),ft[0]=Y,ft[1]=G},sphere:function(){Y=-(G=180),U=-(K=90)}};function xe(e,t){pt.push(ft=[Y=e,G=e]),t<U&&(U=t),t>K&&(K=t)}function Xn(e,t){var n=_t([e*x,t*x]);if(Dt){var i=Et(Dt,n),o=[i[1],-i[0],0],r=Et(o,i);te(r),r=Kt(r);var s=e-vt,a=s>0?1:-1,u=r[0]*I*a,c,l=$(s)>180;l^(a*vt<u&&u<a*e)?(c=r[1]*I,c>K&&(K=c)):(u=(u+360)%360-180,l^(a*vt<u&&u<a*e)?(c=-r[1]*I,c<U&&(U=c)):(t<U&&(U=t),t>K&&(K=t))),l?e<vt?Q(Y,e)>Q(Y,G)&&(G=e):Q(e,G)>Q(Y,G)&&(Y=e):G>=Y?(e<Y&&(Y=e),e>G&&(G=e)):e>vt?Q(Y,e)>Q(Y,G)&&(G=e):Q(e,G)>Q(Y,G)&&(Y=e)}else pt.push(ft=[Y=e,G=e]);t<U&&(U=t),t>K&&(K=t),Dt=n,vt=e}function an(){lt.point=Xn}function ln(){ft[0]=Y,ft[1]=G,lt.point=xe,Dt=null}function In(e,t){if(Dt){var n=e-vt;zt.add($(n)>180?n+(n>0?360:-360):n)}else Yn=e,Gn=t;rt.point(e,t),Xn(e,t)}function zi(){rt.lineStart()}function ji(){In(Yn,Gn),rt.lineEnd(),$(zt)>j&&(Y=-(G=180)),ft[0]=Y,ft[1]=G,Dt=null}function Q(e,t){return(t-=e)<0?t+360:t}function Ti(e,t){return e[0]-t[0]}function un(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function $i(e){var t,n,i,o,r,s,a;if(K=G=-(Y=U=1/0),pt=[],ht(e,lt),n=pt.length){for(pt.sort(Ti),t=1,i=pt[0],r=[i];t<n;++t)o=pt[t],un(i,o[0])||un(i,o[1])?(Q(i[0],o[1])>Q(i[0],i[1])&&(i[1]=o[1]),Q(o[0],i[1])>Q(i[0],i[1])&&(i[0]=o[0])):r.push(i=o);for(s=-1/0,n=r.length-1,t=0,i=r[n];t<=n;i=o,++t)o=r[t],(a=Q(i[1],o[0]))>s&&(s=a,Y=o[0],G=i[1])}return pt=ft=null,Y===1/0||U===1/0?[[NaN,NaN],[NaN,NaN]]:[[Y,U],[G,K]]}var Mt,ee,ne,ie,oe,re,se,ae,Ce,Me,Le,Bn,Zn,A,F,W,nt={sphere:k,point:Ae,lineStart:hn,lineEnd:cn,polygonStart:function(){nt.lineStart=Xi,nt.lineEnd=Ii},polygonEnd:function(){nt.lineStart=hn,nt.lineEnd=cn}};function Ae(e,t){e*=x,t*=x;var n=R(t);Yt(n*R(e),n*M(e),M(t))}function Yt(e,t,n){++Mt,ne+=(e-ne)/Mt,ie+=(t-ie)/Mt,oe+=(n-oe)/Mt}function hn(){nt.point=Yi}function Yi(e,t){e*=x,t*=x;var n=R(t);A=n*R(e),F=n*M(e),W=M(t),nt.point=Gi,Yt(A,F,W)}function Gi(e,t){e*=x,t*=x;var n=R(t),i=n*R(e),o=n*M(e),r=M(t),s=gt(dt((s=F*r-W*o)*s+(s=W*i-A*r)*s+(s=A*o-F*i)*s),A*i+F*o+W*r);ee+=s,re+=s*(A+(A=i)),se+=s*(F+(F=o)),ae+=s*(W+(W=r)),Yt(A,F,W)}function cn(){nt.point=Ae}function Xi(){nt.point=Bi}function Ii(){kn(Bn,Zn),nt.point=Ae}function Bi(e,t){Bn=e,Zn=t,e*=x,t*=x,nt.point=kn;var n=R(t);A=n*R(e),F=n*M(e),W=M(t),Yt(A,F,W)}function kn(e,t){e*=x,t*=x;var n=R(t),i=n*R(e),o=n*M(e),r=M(t),s=F*r-W*o,a=W*i-A*r,u=A*o-F*i,c=we(s,a,u),l=yt(c),h=c&&-l/c;Ce.add(h*s),Me.add(h*a),Le.add(h*u),ee+=l,re+=l*(A+(A=i)),se+=l*(F+(F=o)),ae+=l*(W+(W=r)),Yt(A,F,W)}function Zi(e){Mt=ee=ne=ie=oe=re=se=ae=0,Ce=new J,Me=new J,Le=new J,ht(e,nt);var t=+Ce,n=+Me,i=+Le,o=we(t,n,i);return o<nn&&(t=re,n=se,i=ae,ee<j&&(t=ne,n=ie,i=oe),o=we(t,n,i),o<nn)?[NaN,NaN]:[gt(n,t)*I,yt(i/o)*I]}function St(e){return function(){return e}}function Oe(e,t){function n(i,o){return i=e(i,o),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,o){return i=t.invert(i,o),i&&e.invert(i[0],i[1])}),n}function Re(e,t){return $(e)>O&&(e-=Math.round(e/q)*q),[e,t]}Re.invert=Re;function Fe(e,t,n){return(e%=q)?t||n?Oe(pn(e),gn(t,n)):pn(e):t||n?gn(t,n):Re}function fn(e){return function(t,n){return t+=e,$(t)>O&&(t-=Math.round(t/q)*q),[t,n]}}function pn(e){var t=fn(e);return t.invert=fn(-e),t}function gn(e,t){var n=R(e),i=M(e),o=R(t),r=M(t);function s(a,u){var c=R(u),l=R(a)*c,h=M(a)*c,f=M(u),p=f*n+l*i;return[gt(h*o-p*r,l*n-f*i),yt(p*o+h*r)]}return s.invert=function(a,u){var c=R(u),l=R(a)*c,h=M(a)*c,f=M(u),p=f*o-h*r;return[gt(h*o+f*r,l*n+p*i),yt(p*n-l*i)]},s}function ki(e){e=Fe(e[0]*x,e[1]*x,e.length>2?e[2]*x:0);function t(n){return n=e(n[0]*x,n[1]*x),n[0]*=I,n[1]*=I,n}return t.invert=function(n){return n=e.invert(n[0]*x,n[1]*x),n[0]*=I,n[1]*=I,n},t}function An(e,t,n,i,o,r){if(n){var s=R(t),a=M(t),u=i*n;o==null?(o=t+i*q,r=t-u/2):(o=dn(s,o),r=dn(s,r),(i>0?o<r:o>r)&&(o+=i*q));for(var c,l=o;i>0?l>r:l<r;l-=u)c=Kt([s,-a*R(l),-a*M(l)]),e.point(c[0],c[1])}}function dn(e,t){t=_t(t),t[0]-=e,te(t);var n=Li(-t[1]);return((-t[2]<0?-n:n)+q-j)%q}function Ai(){var e=St([0,0]),t=St(90),n=St(2),i,o,r={point:s};function s(u,c){i.push(u=o(u,c)),u[0]*=I,u[1]*=I}function a(){var u=e.apply(this,arguments),c=t.apply(this,arguments)*x,l=n.apply(this,arguments)*x;return i=[],o=Fe(-u[0]*x,-u[1]*x,0).invert,An(r,c,l,1),u={type:"Polygon",coordinates:[i]},i=o=null,u}return a.center=function(u){return arguments.length?(e=typeof u=="function"?u:St([+u[0],+u[1]]),a):e},a.radius=function(u){return arguments.length?(t=typeof u=="function"?u:St(+u),a):t},a.precision=function(u){return arguments.length?(n=typeof u=="function"?u:St(+u),a):n},a}function Fn(){var e=[],t;return{point:function(n,i,o){t.push([n,i,o])},lineStart:function(){e.push(t=[])},lineEnd:k,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Jt(e,t){return $(e[0]-t[0])<j&&$(e[1]-t[1])<j}function kt(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Wn(e,t,n,i,o){var r=[],s=[],a,u;if(e.forEach(function(g){if(!((m=g.length-1)<=0)){var m,v=g[0],P=g[m],_;if(Jt(v,P)){if(!v[2]&&!P[2]){for(o.lineStart(),a=0;a<m;++a)o.point((v=g[a])[0],v[1]);o.lineEnd();return}P[0]+=2*j}r.push(_=new kt(v,g,null,!0)),s.push(_.o=new kt(v,null,_,!1)),r.push(_=new kt(P,g,null,!1)),s.push(_.o=new kt(P,null,_,!0))}}),!!r.length){for(s.sort(t),mn(r),mn(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var c=r[0],l,h;;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return;l=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,u=l.length;a<u;++a)o.point((h=l[a])[0],h[1]);else i(f.x,f.n.x,1,o);f=f.n}else{if(p)for(l=f.p.z,a=l.length-1;a>=0;--a)o.point((h=l[a])[0],h[1]);else i(f.x,f.p.x,-1,o);f=f.p}f=f.o,l=f.z,p=!p}while(!f.v);o.lineEnd()}}}function mn(e){if(t=e.length){for(var t,n=0,i=e[0],o;++n<t;)i.n=o=e[n],o.p=i,i=o;i.n=o=e[0],o.p=i}}function ve(e){return $(e[0])<=O?e[0]:Ci(e[0])*(($(e[0])+O)%q-O)}function Fi(e,t){var n=ve(t),i=t[1],o=M(i),r=[M(n),-R(n),0],s=0,a=0,u=new J;o===1?i=V+j:o===-1&&(i=-V-j);for(var c=0,l=e.length;c<l;++c)if(f=(h=e[c]).length)for(var h,f,p=h[f-1],g=ve(p),m=p[1]/2+Ht,v=M(m),P=R(m),_=0;_<f;++_,g=w,v=D,P=N,p=y){var y=h[_],w=ve(y),b=y[1]/2+Ht,D=M(b),N=R(b),E=w-g,L=E>=0?1:-1,z=L*E,S=z>O,Z=v*D;if(u.add(gt(Z*L*M(z),P*N+Z*R(z))),s+=S?E+L*q:E,S^g>=n^w>=n){var X=Et(_t(p),_t(y));te(X);var T=Et(r,X);te(T);var d=(S^E>=0?-1:1)*yt(T[2]);(i>d||i===d&&(X[0]||X[1]))&&(a+=S^E>=0?1:-1)}}return(s<-1e-6||s<j&&u<-1e-12)^a&1}function Jn(e,t,n,i){return function(o){var r=t(o),s=Fn(),a=t(s),u=!1,c,l,h,f={point:p,lineStart:m,lineEnd:v,polygonStart:function(){f.point=P,f.lineStart=_,f.lineEnd=y,l=[],c=[]},polygonEnd:function(){f.point=p,f.lineStart=m,f.lineEnd=v,l=Rn(l);var w=Fi(c,i);l.length?(u||(o.polygonStart(),u=!0),Wn(l,Ji,w,n,o)):w&&(u||(o.polygonStart(),u=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),u&&(o.polygonEnd(),u=!1),l=c=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(w,b){e(w,b)&&o.point(w,b)}function g(w,b){r.point(w,b)}function m(){f.point=g,r.lineStart()}function v(){f.point=p,r.lineEnd()}function P(w,b){h.push([w,b]),a.point(w,b)}function _(){a.lineStart(),h=[]}function y(){P(h[0][0],h[0][1]),a.lineEnd();var w=a.clean(),b=s.result(),D,N=b.length,E,L,z;if(h.pop(),c.push(h),h=null,!!N){if(w&1){if(L=b[0],(E=L.length-1)>0){for(u||(o.polygonStart(),u=!0),o.lineStart(),D=0;D<E;++D)o.point((z=L[D])[0],z[1]);o.lineEnd()}return}N>1&&w&2&&b.push(b.pop().concat(b.shift())),l.push(b.filter(Wi))}}return f}}function Wi(e){return e.length>1}function Ji(e,t){return((e=e.x)[0]<0?e[1]-V-j:V-e[1])-((t=t.x)[0]<0?t[1]-V-j:V-t[1])}const vn=Jn(function(){return!0},qi,Ui,[-O,-V]);function qi(e){var t=NaN,n=NaN,i=NaN,o;return{lineStart:function(){e.lineStart(),o=1},point:function(r,s){var a=r>0?O:-O,u=$(r-t);$(u-O)<j?(e.point(t,n=(n+s)/2>0?V:-V),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(r,n),o=0):i!==a&&u>=O&&($(t-i)<j&&(t-=i*j),$(r-a)<j&&(r-=a*j),n=Hi(t,n,r,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),o=0),e.point(t=r,n=s),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-o}}}function Hi(e,t,n,i){var o,r,s=M(e-n);return $(s)>j?Nn((M(t)*(r=R(i))*M(n)-M(i)*(o=R(t))*M(e))/(o*r*s)):(t+i)/2}function Ui(e,t,n,i){var o;if(e==null)o=n*V,i.point(-O,o),i.point(0,o),i.point(O,o),i.point(O,0),i.point(O,-o),i.point(0,-o),i.point(-O,-o),i.point(-O,0),i.point(-O,o);else if($(e[0]-t[0])>j){var r=e[0]<t[0]?O:-O;o=n*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(t[0],t[1])}function Vi(e){var t=R(e),n=2*x,i=t>0,o=$(t)>j;function r(l,h,f,p){An(p,e,n,f,l,h)}function s(l,h){return R(l)*R(h)>t}function a(l){var h,f,p,g,m;return{lineStart:function(){g=p=!1,m=1},point:function(v,P){var _=[v,P],y,w=s(v,P),b=i?w?0:c(v,P):w?c(v+(v<0?O:-O),P):0;if(!h&&(g=p=w)&&l.lineStart(),w!==p&&(y=u(h,_),(!y||Jt(h,y)||Jt(_,y))&&(_[2]=1)),w!==p)m=0,w?(l.lineStart(),y=u(_,h),l.point(y[0],y[1])):(y=u(h,_),l.point(y[0],y[1],2),l.lineEnd()),h=y;else if(o&&h&&i^w){var D;!(b&f)&&(D=u(_,h,!0))&&(m=0,i?(l.lineStart(),l.point(D[0][0],D[0][1]),l.point(D[1][0],D[1][1]),l.lineEnd()):(l.point(D[1][0],D[1][1]),l.lineEnd(),l.lineStart(),l.point(D[0][0],D[0][1],3)))}w&&(!h||!Jt(h,_))&&l.point(_[0],_[1]),h=_,p=w,f=b},lineEnd:function(){p&&l.lineEnd(),h=null},clean:function(){return m|(g&&p)<<1}}}function u(l,h,f){var p=_t(l),g=_t(h),m=[1,0,0],v=Et(p,g),P=Bt(v,v),_=v[0],y=P-_*_;if(!y)return!f&&l;var w=t*P/y,b=-t*_/y,D=Et(m,v),N=Zt(m,w),E=Zt(v,b);me(N,E);var L=D,z=Bt(N,L),S=Bt(L,L),Z=z*z-S*(Bt(N,N)-1);if(!(Z<0)){var X=dt(Z),T=Zt(L,(-z-X)/S);if(me(T,N),T=Kt(T),!f)return T;var d=l[0],C=h[0],B=l[1],H=h[1],tt;C<d&&(tt=d,d=C,C=tt);var Ct=C-d,st=$(Ct-O)<j,mt=st||Ct<j;if(!st&&H<B&&(tt=B,B=H,H=tt),mt?st?B+H>0^T[1]<($(T[0]-d)<j?B:H):B<=T[1]&&T[1]<=H:Ct>O^(d<=T[0]&&T[0]<=C)){var at=Zt(L,(-z+X)/S);return me(at,N),[T,Kt(at)]}}}function c(l,h){var f=i?e:O-e,p=0;return l<-f?p|=1:l>f&&(p|=2),h<-f?p|=4:h>f&&(p|=8),p}return Jn(s,a,r,i?[0,-e]:[-O,e-O])}function Qi(e,t,n,i,o,r){var s=e[0],a=e[1],u=t[0],c=t[1],l=0,h=1,f=u-s,p=c-a,g;if(g=n-s,!(!f&&g>0)){if(g/=f,f<0){if(g<l)return;g<h&&(h=g)}else if(f>0){if(g>h)return;g>l&&(l=g)}if(g=o-s,!(!f&&g<0)){if(g/=f,f<0){if(g>h)return;g>l&&(l=g)}else if(f>0){if(g<l)return;g<h&&(h=g)}if(g=i-a,!(!p&&g>0)){if(g/=p,p<0){if(g<l)return;g<h&&(h=g)}else if(p>0){if(g>h)return;g>l&&(l=g)}if(g=r-a,!(!p&&g<0)){if(g/=p,p<0){if(g>h)return;g>l&&(l=g)}else if(p>0){if(g<l)return;g<h&&(h=g)}return l>0&&(e[0]=s+l*f,e[1]=a+l*p),h<1&&(t[0]=s+h*f,t[1]=a+h*p),!0}}}}}var At=1e9,Ft=-1e9;function Ki(e,t,n,i){function o(c,l){return e<=c&&c<=n&&t<=l&&l<=i}function r(c,l,h,f){var p=0,g=0;if(c==null||(p=s(c,h))!==(g=s(l,h))||u(c,l)<0^h>0)do f.point(p===0||p===3?e:n,p>1?i:t);while((p=(p+h+4)%4)!==g);else f.point(l[0],l[1])}function s(c,l){return $(c[0]-e)<j?l>0?0:3:$(c[0]-n)<j?l>0?2:1:$(c[1]-t)<j?l>0?1:0:l>0?3:2}function a(c,l){return u(c.x,l.x)}function u(c,l){var h=s(c,1),f=s(l,1);return h!==f?h-f:h===0?l[1]-c[1]:h===1?c[0]-l[0]:h===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,h=Fn(),f,p,g,m,v,P,_,y,w,b,D,N={point:E,lineStart:Z,lineEnd:X,polygonStart:z,polygonEnd:S};function E(d,C){o(d,C)&&l.point(d,C)}function L(){for(var d=0,C=0,B=p.length;C<B;++C)for(var H=p[C],tt=1,Ct=H.length,st=H[0],mt,at,Gt=st[0],wt=st[1];tt<Ct;++tt)mt=Gt,at=wt,st=H[tt],Gt=st[0],wt=st[1],at<=i?wt>i&&(Gt-mt)*(i-at)>(wt-at)*(e-mt)&&++d:wt<=i&&(Gt-mt)*(i-at)<(wt-at)*(e-mt)&&--d;return d}function z(){l=h,f=[],p=[],D=!0}function S(){var d=L(),C=D&&d,B=(f=Rn(f)).length;(C||B)&&(c.polygonStart(),C&&(c.lineStart(),r(null,null,1,c),c.lineEnd()),B&&Wn(f,a,d,r,c),c.polygonEnd()),l=c,f=p=g=null}function Z(){N.point=T,p&&p.push(g=[]),b=!0,w=!1,_=y=NaN}function X(){f&&(T(m,v),P&&w&&h.rejoin(),f.push(h.result())),N.point=E,w&&l.lineEnd()}function T(d,C){var B=o(d,C);if(p&&g.push([d,C]),b)m=d,v=C,P=B,b=!1,B&&(l.lineStart(),l.point(d,C));else if(B&&w)l.point(d,C);else{var H=[_=Math.max(Ft,Math.min(At,_)),y=Math.max(Ft,Math.min(At,y))],tt=[d=Math.max(Ft,Math.min(At,d)),C=Math.max(Ft,Math.min(At,C))];Qi(H,tt,e,t,n,i)?(w||(l.lineStart(),l.point(H[0],H[1])),l.point(tt[0],tt[1]),B||l.lineEnd(),D=!1):B&&(l.lineStart(),l.point(d,C),D=!1)}_=d,y=C,w=B}return N}}const Ne=e=>e;var ye=new J,ze=new J,qn,Hn,je,Te,ct={point:k,lineStart:k,lineEnd:k,polygonStart:function(){ct.lineStart=to,ct.lineEnd=no},polygonEnd:function(){ct.lineStart=ct.lineEnd=ct.point=k,ye.add($(ze)),ze=new J},result:function(){var e=ye/2;return ye=new J,e}};function to(){ct.point=eo}function eo(e,t){ct.point=Un,qn=je=e,Hn=Te=t}function Un(e,t){ze.add(Te*e-je*t),je=e,Te=t}function no(){Un(qn,Hn)}var xt=1/0,le=xt,Tt=-xt,ue=Tt,he={point:io,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var e=[[xt,le],[Tt,ue]];return Tt=ue=-(le=xt=1/0),e}};function io(e,t){e<xt&&(xt=e),e>Tt&&(Tt=e),t<le&&(le=t),t>ue&&(ue=t)}var $e=0,Ye=0,Lt=0,ce=0,fe=0,bt=0,Ge=0,Xe=0,Ot=0,Vn,Qn,it,ot,et={point:Pt,lineStart:yn,lineEnd:_n,polygonStart:function(){et.lineStart=so,et.lineEnd=ao},polygonEnd:function(){et.point=Pt,et.lineStart=yn,et.lineEnd=_n},result:function(){var e=Ot?[Ge/Ot,Xe/Ot]:bt?[ce/bt,fe/bt]:Lt?[$e/Lt,Ye/Lt]:[NaN,NaN];return $e=Ye=Lt=ce=fe=bt=Ge=Xe=Ot=0,e}};function Pt(e,t){$e+=e,Ye+=t,++Lt}function yn(){et.point=oo}function oo(e,t){et.point=ro,Pt(it=e,ot=t)}function ro(e,t){var n=e-it,i=t-ot,o=dt(n*n+i*i);ce+=o*(it+e)/2,fe+=o*(ot+t)/2,bt+=o,Pt(it=e,ot=t)}function _n(){et.point=Pt}function so(){et.point=lo}function ao(){Kn(Vn,Qn)}function lo(e,t){et.point=Kn,Pt(Vn=it=e,Qn=ot=t)}function Kn(e,t){var n=e-it,i=t-ot,o=dt(n*n+i*i);ce+=o*(it+e)/2,fe+=o*(ot+t)/2,bt+=o,o=ot*e-it*t,Ge+=o*(it+e),Xe+=o*(ot+t),Ot+=o*3,Pt(it=e,ot=t)}function ti(e){this._context=e}ti.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,q);break}}},result:k};var Ie=new J,_e,ei,ni,Rt,Nt,$t={point:k,lineStart:function(){$t.point=uo},lineEnd:function(){_e&&ii(ei,ni),$t.point=k},polygonStart:function(){_e=!0},polygonEnd:function(){_e=null},result:function(){var e=+Ie;return Ie=new J,e}};function uo(e,t){$t.point=ii,ei=Rt=e,ni=Nt=t}function ii(e,t){Rt-=e,Nt-=t,Ie.add(dt(Rt*Rt+Nt*Nt)),Rt=e,Nt=t}let Pn,pe,wn,Sn;class bn{constructor(t){this._append=t==null?oi:ho(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==wn||this._append!==pe){const i=this._radius,o=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,wn=i,pe=this._append,Sn=this._,this._=o}this._+=Sn;break}}}result(){const t=this._;return this._="",t.length?t:null}}function oi(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ho(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return oi;if(t!==Pn){const n=10**t;Pn=t,pe=function(o){let r=1;this._+=o[0];for(const s=o.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+o[r]}}return pe}function co(e,t){let n=3,i=4.5,o,r;function s(a){return a&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),ht(a,o(r))),r.result()}return s.area=function(a){return ht(a,o(ct)),ct.result()},s.measure=function(a){return ht(a,o($t)),$t.result()},s.bounds=function(a){return ht(a,o(he)),he.result()},s.centroid=function(a){return ht(a,o(et)),et.result()},s.projection=function(a){return arguments.length?(o=a==null?(e=null,Ne):(e=a).stream,s):e},s.context=function(a){return arguments.length?(r=a==null?(t=null,new bn(n)):new ti(t=a),typeof i!="function"&&r.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(r.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(r=new bn(n)),s},s.projection(e).digits(n).context(t)}function We(e){return function(t){var n=new Be;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Be(){}Be.prototype={constructor:Be,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Je(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),ht(n,e.stream(he)),t(he.result()),i!=null&&e.clipExtent(i),e}function ri(e,t,n){return Je(e,function(i){var o=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=Math.min(o/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),a=+t[0][0]+(o-s*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,u])},n)}function fo(e,t,n){return ri(e,[[0,0],t],n)}function po(e,t,n){return Je(e,function(i){var o=+t,r=o/(i[1][0]-i[0][0]),s=(o-r*(i[1][0]+i[0][0]))/2,a=-r*i[0][1];e.scale(150*r).translate([s,a])},n)}function go(e,t,n){return Je(e,function(i){var o=+t,r=o/(i[1][1]-i[0][1]),s=-r*i[0][0],a=(o-r*(i[1][1]+i[0][1]))/2;e.scale(150*r).translate([s,a])},n)}var Dn=16,mo=R(30*x);function En(e,t){return+t?yo(e,t):vo(e)}function vo(e){return We({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function yo(e,t){function n(i,o,r,s,a,u,c,l,h,f,p,g,m,v){var P=c-i,_=l-o,y=P*P+_*_;if(y>4*t&&m--){var w=s+f,b=a+p,D=u+g,N=dt(w*w+b*b+D*D),E=yt(D/=N),L=$($(D)-1)<j||$(r-h)<j?(r+h)/2:gt(b,w),z=e(L,E),S=z[0],Z=z[1],X=S-i,T=Z-o,d=_*X-P*T;(d*d/y>t||$((P*X+_*T)/y-.5)>.3||s*f+a*p+u*g<mo)&&(n(i,o,r,s,a,u,S,Z,L,w/=N,b/=N,D,m,v),v.point(S,Z),n(S,Z,L,w,b,D,c,l,h,f,p,g,m,v))}}return function(i){var o,r,s,a,u,c,l,h,f,p,g,m,v={point:P,lineStart:_,lineEnd:w,polygonStart:function(){i.polygonStart(),v.lineStart=b},polygonEnd:function(){i.polygonEnd(),v.lineStart=_}};function P(E,L){E=e(E,L),i.point(E[0],E[1])}function _(){h=NaN,v.point=y,i.lineStart()}function y(E,L){var z=_t([E,L]),S=e(E,L);n(h,f,l,p,g,m,h=S[0],f=S[1],l=E,p=z[0],g=z[1],m=z[2],Dn,i),i.point(h,f)}function w(){v.point=P,i.lineEnd()}function b(){_(),v.point=D,v.lineEnd=N}function D(E,L){y(o=E,L),r=h,s=f,a=p,u=g,c=m,v.point=y}function N(){n(h,f,l,p,g,m,r,s,o,a,u,c,Dn,i),v.lineEnd=w,w()}return v}}var _o=We({point:function(e,t){this.stream.point(e*x,t*x)}});function Po(e){return We({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function wo(e,t,n,i,o){function r(s,a){return s*=i,a*=o,[t+e*s,n-e*a]}return r.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*o]},r}function xn(e,t,n,i,o,r){if(!r)return wo(e,t,n,i,o);var s=R(r),a=M(r),u=s*e,c=a*e,l=s/e,h=a/e,f=(a*n-s*t)/e,p=(a*t+s*n)/e;function g(m,v){return m*=i,v*=o,[u*m-c*v+t,n-c*m-u*v]}return g.invert=function(m,v){return[i*(l*m-h*v+f),o*(p-h*m-l*v)]},g}function So(e){return bo(function(){return e})()}function bo(e){var t,n=150,i=480,o=250,r=0,s=0,a=0,u=0,c=0,l,h=0,f=1,p=1,g=null,m=vn,v=null,P,_,y,w=Ne,b=.5,D,N,E,L,z;function S(d){return E(d[0]*x,d[1]*x)}function Z(d){return d=E.invert(d[0],d[1]),d&&[d[0]*I,d[1]*I]}S.stream=function(d){return L&&z===d?L:L=_o(Po(l)(m(D(w(z=d)))))},S.preclip=function(d){return arguments.length?(m=d,g=void 0,T()):m},S.postclip=function(d){return arguments.length?(w=d,v=P=_=y=null,T()):w},S.clipAngle=function(d){return arguments.length?(m=+d?Vi(g=d*x):(g=null,vn),T()):g*I},S.clipExtent=function(d){return arguments.length?(w=d==null?(v=P=_=y=null,Ne):Ki(v=+d[0][0],P=+d[0][1],_=+d[1][0],y=+d[1][1]),T()):v==null?null:[[v,P],[_,y]]},S.scale=function(d){return arguments.length?(n=+d,X()):n},S.translate=function(d){return arguments.length?(i=+d[0],o=+d[1],X()):[i,o]},S.center=function(d){return arguments.length?(r=d[0]%360*x,s=d[1]%360*x,X()):[r*I,s*I]},S.rotate=function(d){return arguments.length?(a=d[0]%360*x,u=d[1]%360*x,c=d.length>2?d[2]%360*x:0,X()):[a*I,u*I,c*I]},S.angle=function(d){return arguments.length?(h=d%360*x,X()):h*I},S.reflectX=function(d){return arguments.length?(f=d?-1:1,X()):f<0},S.reflectY=function(d){return arguments.length?(p=d?-1:1,X()):p<0},S.precision=function(d){return arguments.length?(D=En(N,b=d*d),T()):dt(b)},S.fitExtent=function(d,C){return ri(S,d,C)},S.fitSize=function(d,C){return fo(S,d,C)},S.fitWidth=function(d,C){return po(S,d,C)},S.fitHeight=function(d,C){return go(S,d,C)};function X(){var d=xn(n,0,0,f,p,h).apply(null,t(r,s)),C=xn(n,i-d[0],o-d[1],f,p,h);return l=Fe(a,u,c),N=Oe(t,C),E=Oe(l,N),D=En(N,b),T()}function T(){return L=z=null,S}return function(){return t=e.apply(this,arguments),S.invert=t.invert&&Z,X()}}function qe(e,t){return[e,xi(Mi((V+t)/2))]}qe.invert=function(e,t){return[e,2*Nn(Ei(t))-V]};function Do(){return Eo(qe).scale(961/q)}function Eo(e){var t=So(e),n=t.center,i=t.scale,o=t.translate,r=t.clipExtent,s=null,a,u,c;t.scale=function(h){return arguments.length?(i(h),l()):i()},t.translate=function(h){return arguments.length?(o(h),l()):o()},t.center=function(h){return arguments.length?(n(h),l()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=a=u=c=null:(s=+h[0][0],a=+h[0][1],u=+h[1][0],c=+h[1][1]),l()):s==null?null:[[s,a],[u,c]]};function l(){var h=O*i(),f=t(ki(t.rotate()).invert([0,0]));return r(s==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:e===qe?[[Math.max(f[0]-h,s),a],[Math.min(f[0]+h,u),c]]:[[s,Math.max(f[1]-h,a)],[u,Math.min(f[1]+h,c)]])}return l()}class xo extends ui{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,n=this.rule.bind(this);n("MapChart").setAll({projection:Do(),panX:"translateX",panY:"translateY",pinchZoom:!0,zoomStep:2,zoomLevel:1,rotationX:0,rotationY:0,rotationZ:0,maxZoomLevel:32,minZoomLevel:1,wheelY:"zoom",wheelX:"none",animationEasing:Qe(Ke),wheelEasing:Qe(Ke),wheelDuration:0,wheelSensitivity:1,maxPanOut:.4,centerMapOnZoomOut:!0});{const i=n("MapLine");i.setAll({precision:.5,role:"figure"}),de(i,"stroke",t,"grid")}n("MapPolygonSeries").setAll({affectsBounds:!0}),n("MapPointSeries").setAll({affectsBounds:!1,clipFront:!1,clipBack:!0,autoScale:!1}),n("ClusteredPointSeries").setAll({minDistance:20,scatterDistance:3,scatterRadius:8,stopClusterZoom:.95}),n("MapLineSeries").setAll({affectsBounds:!1});{const i=n("MapPolygon");i.setAll({precision:.5,isMeasured:!1,role:"figure",fillOpacity:1,position:"absolute",strokeWidth:.2,strokeOpacity:1}),de(i,"fill",t,"primaryButton"),de(i,"stroke",t,"background")}n("Button",["zoomtools","home"]).setAll({visible:!1}),n("GraticuleSeries").setAll({step:10})}}function Xo(e,t){return Ai().center([e.longitude,e.latitude]).radius(t)()}function He(e){const t=Zi(e);return{longitude:t[0],latitude:t[1]}}function Io(e){return $n(e)}function qt(e){const t=$i(e);if(t){const n={left:t[0][0],right:t[1][0],top:t[1][1],bottom:t[0][1]};return n.right<n.left&&(n.right=180,n.left=-180),n}return{left:0,right:0,top:0,bottom:0}}function Bo(e,t,n,i){let o=[];i<=-180&&(i=-179.9999),n<=-90&&(n=-89.9999),e>=90&&(e=89.9999),t>=180&&(t=179.9999);let r=Math.min(90,(t-i)/Math.ceil((t-i)/90)),s=(e-n)/Math.ceil((e-n)/90);for(let a=i;a<t;a=a+r){let u=[];o.push([u]),a+r>t&&(r=t-a);for(let c=a;c<=a+r;c=c+5)u.push([c,e]);for(let c=e;c>=n;c=c-s)u.push([a+r,c]);for(let c=a+r;c>=a;c=c-5)u.push([c,n]);for(let c=n;c<=e;c=c+s)u.push([a,c])}return{type:"MultiPolygon",coordinates:o}}function Zo(e){let t=Pe(e.longitude),n=Math.asin(Math.sin(e.latitude*gi))*di,i=Pe(e.latitude);return Math.abs(i)>90&&(t=Pe(t+180)),e.longitude=t,e.latitude=n,e}function Pe(e){return e=e%360,e>180&&(e-=360),e<-180&&(e+=360),e}class Ze extends Ln{constructor(){super(...arguments),Object.defineProperty(this,"_downTranslateX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downTranslateY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pLat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pLon",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downZoomLevel",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_doubleDownDistance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dirtyGeometries",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_geometryColection",{enumerable:!0,configurable:!0,writable:!0,value:{type:"GeometryCollection",geometries:[]}}),Object.defineProperty(this,"_centerLocation",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rxa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapBounds",{enumerable:!0,configurable:!0,writable:!0,value:[[0,0],[0,0]]}),Object.defineProperty(this,"_geoCentroid",{enumerable:!0,configurable:!0,writable:!0,value:{longitude:0,latitude:0}}),Object.defineProperty(this,"_geoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_prevGeoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_dispatchBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapFitted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_centerX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_centerY",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGeoPath(){const t=this.get("projection"),n=co();n.projection(t),this.setPrivateRaw("geoPath",n)}geoPoint(){return this.invert(this.seriesContainer.toGlobal({x:this.width()/2,y:this.height()/2}))}geoCentroid(){return this._geoCentroid}geoBounds(){return this._geoBounds}_handleSetWheel(){const t=this.get("wheelX"),n=this.get("wheelY"),i=this.chartContainer;t!="none"||n!="none"?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=i.events.on("wheel",o=>{const r=this.get("wheelEasing"),s=this.get("wheelSensitivity",1),a=this.get("wheelDuration",0),u=o.originalEvent;let c=!1;if(mi(u,this))c=!0;else return;const l=i._display.toLocal(o.point);if(n=="zoom"){if(this.get("zoomLevel")==this.get("minZoomLevel",1)&&u.deltaY>0)return;this._handleWheelZoom(u.deltaY,l)}else n=="rotateY"?this._handleWheelRotateY(u.deltaY/5*s,a,r):n=="rotateX"&&this._handleWheelRotateX(u.deltaY/5*s,a,r);t=="zoom"?this._handleWheelZoom(u.deltaX,l):t=="rotateY"?this._handleWheelRotateY(u.deltaX/5*s,a,r):t=="rotateX"&&this._handleWheelRotateX(u.deltaX/5*s,a,r),c&&u.preventDefault()}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_prepareChildren(){super._prepareChildren();const t=this.get("projection"),n=this.innerWidth(),i=this.innerHeight(),o=this._geometryColection.geometries;if(this.isDirty("projection")){this._makeGeoPath(),this.markDirtyProjection(),this._fitMap(),t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),t.rotate&&t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]);let r=this._prevSettings.projection;if(r&&r!=t){let s=n/2,a=i/2;if(r.invert){let u=r.invert([s,a]);if(u){let c=t(u);if(c){let l=t.translate(),h=s-(c[0]-l[0]),f=a-(c[1]-l[1]);t.translate([h,f]),this.setRaw("translateX",h),this.setRaw("translateY",f)}}}}}if((this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this._dirtyGeometries&&(this._geometryColection.geometries=[],this.series.each(r=>{hi(this._geometryColection.geometries,r._geometries)}),this._fitMap()),o.length!=0&&(n!=this._pw||i!=this._ph||this._dirtyGeometries)&&n>0&&i>0){let r=n/2,s=i/2;t.fitSize([n,i],this._geometryColection);const a=t.scale();if(this.setPrivateRaw("mapScale",a),t.scale(a*this.get("zoomLevel",1)),this._centerLocation){let c=t(this._centerLocation);if(c){let l=t.translate(),h=r-(c[0]-l[0]),f=s-(c[1]-l[1]);t.translate([h,f]),this.setRaw("translateX",h),this.setRaw("translateY",f),this._centerX=l[0],this._centerY=l[1]}}this.markDirtyProjection();const u=this.getPrivate("geoPath");this._mapBounds=u.bounds(this._geometryColection)}if(this._pw=n,this._ph=i,this.isDirty("zoomControl")){const r=this._prevSettings.zoomControl,s=this.get("zoomControl");s!==r&&(this._disposeProperty("zoomControl"),r&&r.dispose(),s&&(s.setPrivate("chart",this),this.children.push(s)),this.setRaw("zoomControl",s))}if(this.isDirty("zoomLevel")){t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),this.markDirtyProjection(),this.series.each(s=>{s.isType("MapPointSeries")&&s.get("autoScale")&&ut(s.dataItems,a=>{const u=a.bullets;u&&ut(u,c=>{const l=c.get("sprite");l&&l.set("scale",this.get("zoomLevel"))})})});const r=this.get("zoomControl");if(r){const s=this.get("zoomLevel",1);s==this.get("minZoomLevel",1)?this.root.events.once("frameended",()=>{r.minusButton.set("disabled",!0)}):r.minusButton.set("disabled",!1),s==this.get("maxZoomLevel",32)?r.plusButton.set("disabled",!0):r.plusButton.set("disabled",!1)}}(this.isDirty("translateX")||this.isDirty("translateY"))&&(t.translate([this.get("translateX",this.width()/2),this.get("translateY",this.height()/2)]),this.markDirtyProjection()),t.rotate&&(this.isDirty("rotationX")||this.isDirty("rotationY")||this.isDirty("rotationZ"))&&(t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]),this.markDirtyProjection()),(this.isDirty("pinchZoom")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_fitMap(){const t=this.get("projection");let n=this.innerWidth(),i=this.innerHeight();if(n>0&&i>0){t.fitSize([n,i],this._geometryColection),this.setPrivateRaw("mapScale",t.scale());const o=t.translate();this.setRaw("translateX",o[0]),this.setRaw("translateY",o[1]),this._centerX=o[0],this._centerY=o[1];const r=this.getPrivate("geoPath");this._mapBounds=r.bounds(this._geometryColection),this._geoCentroid=He(this._geometryColection);const s=qt(this._geometryColection);if(this._geoBounds=s,this._geometryColection.geometries.length>0){s.left=It(this._geoBounds.left,3),s.right=It(this._geoBounds.right,3),s.top=It(this._geoBounds.top,3),s.bottom=It(this._geoBounds.bottom,3);const a=this._prevGeoBounds;a&&!vi(s,a)&&(this._dispatchBounds=!0,this._prevGeoBounds=s)}this._mapFitted=!0}}homeGeoPoint(){let t=this.get("homeGeoPoint");if(!t){const i=this.getPrivate("geoPath").bounds(this._geometryColection),o=i[0][0],r=i[0][1],s=i[1][0],a=i[1][1];t=this.invert({x:o+(s-o)/2,y:r+(a-r)/2})}return t}goHome(t){this.zoomToGeoPoint(this.homeGeoPoint(),this.get("homeZoomLevel",1),!0,t,this.get("homeRotationX"),this.get("homeRotationY"))}_updateChildren(){const t=this.get("projection");if(t.invert){let n=this.innerWidth(),i=this.innerHeight();n>0&&i>0&&(this._centerLocation=t.invert([this.innerWidth()/2,this.innerHeight()/2]))}super._updateChildren()}_afterChanged(){if(super._afterChanged(),this._dispatchBounds){this._dispatchBounds=!1;const t="geoboundschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}}_setUpTouch(){this.chartContainer._display.cancelTouch||(this.chartContainer._display.cancelTouch=!!(this.get("pinchZoom")||this.get("panX")||this.get("panY")))}markDirtyGeometries(){this._dirtyGeometries=!0,this.markDirty()}markDirtyProjection(){this.series.each(t=>{t.markDirtyProjection()})}_afterNew(){this._defaultThemes.push(xo.new(this._root)),this._settings.themeTags=yi(this._settings.themeTags,["map"]),this.children.push(this.bulletsContainer),super._afterNew(),this._makeGeoPath(),this.chartContainer.children.push(this.seriesContainer),this.get("translateX")==null&&this.set("translateX",this.width()/2),this.get("translateY")==null&&this.set("translateY",this.height()/2),this.chartContainer.set("interactive",!0),this.chartContainer.set("interactiveChildren",!1),this.chartContainer.set("background",_i.new(this._root,{themeTags:["map","background"],fill:Pi.fromHex(0),fillOpacity:0})),this._disposers.push(this.chartContainer.events.on("pointerdown",n=>{this._handleChartDown(n)})),this._disposers.push(this.chartContainer.events.on("globalpointerup",n=>{this._handleChartUp(n)})),this._disposers.push(this.chartContainer.events.on("globalpointermove",n=>{this._handleChartMove(n)}));let t=!1;for(let n=0;n<tn.licenses.length;n++)tn.licenses[n].match(/^AM5M.{5,}/i)&&(t=!0);t?this._root._licenseApplied():this._root._showBranding(),this._setUpTouch()}_handleChartDown(t){this._downZoomLevel=this.get("zoomLevel",1);const n=this.chartContainer._downPoints;let i=Ve(n).length;if(i==1){let o=n[1];o||(o=n[0]),o&&o.x==t.point.x&&o.y==t.point.y&&(i=0)}if(i>0){this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");const o=this.chartContainer._getDownPointId();if(o){let r=this._movePoints[o];r&&(this.chartContainer._downPoints[o]=r)}}else if(i==0){let o=this.chartContainer.get("background");if(o&&o.events.enableType("click"),this.get("panX")||this.get("panY")){this._za&&this._za.stop(),this._txa&&this._txa.stop(),this._tya&&this._tya.stop(),this._rxa&&this._rxa.stop(),this._rya&&this._rya.stop();const r=this.chartContainer._display.toLocal(t.point);this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");let s=this.get("projection");if(s.invert){let a=s.invert([r.x,r.y]),u=s.invert([r.x+1,r.y+1]);a&&u&&(this._pLon=Math.abs(u[0]-a[0]),this._pLat=Math.abs(u[1]-a[1]))}}}}invert(t){let n=this.get("projection");if(n.invert){const i=n.invert([t.x,t.y]);if(i)return{longitude:i[0],latitude:i[1]}}return{longitude:0,latitude:0}}convert(t,n,i){let o=this.get("projection"),r;if(o.rotate||(n=void 0,i=void 0),n!=null||i!=null){n==null&&(n=0),i==null&&(i=0);let s=o.rotate();o.rotate([n,i,0]),r=o([t.longitude,t.latitude]),o.rotate(s)}else r=o([t.longitude,t.latitude]);return r?{x:r[0],y:r[1]}:{x:0,y:0}}_handleChartUp(t){this.chartContainer._downPoints={}}_handlePinch(){const t=this.chartContainer;let n=0,i=[],o=[];if(ci(t._downPoints,(r,s)=>{i[n]=s;let a=this._movePoints[r];a&&(o[n]=a),n++}),i.length>1&&o.length>1){const r=t._display;let s=i[0],a=i[1],u=o[0],c=o[1];if(s&&a&&u&&c){s=r.toLocal(s),a=r.toLocal(a),u=r.toLocal(u),c=r.toLocal(c);let l=Math.hypot(a.x-s.x,a.y-s.y),f=Math.hypot(c.x-u.x,c.y-u.y)/l*this._downZoomLevel;f=en(f,this.get("minZoomLevel",1),this.get("maxZoomLevel",32));let p={x:u.x+(c.x-u.x)/2,y:u.y+(c.y-u.y)/2},g={x:s.x+(a.x-s.x)/2,y:s.y+(a.y-s.y)/2},m=this._downTranslateX||0,v=this._downTranslateY||0,P=this._downZoomLevel,_=p.x-(-m+g.x)/P*f,y=p.y-(-v+g.y)/P*f;this.set("zoomLevel",f),this.set("translateX",_),this.set("translateY",y)}}}_handleChartMove(t){const n=this.chartContainer;let i=n._getDownPoint();const o=n._getDownPointId(),s=t.originalEvent.pointerId;if(this.get("pinchZoom")&&s&&(this._movePoints[s]=t.point,Ve(n._downPoints).length>1)){this._handlePinch();return}if(!(o&&s&&s!=o)&&i){const a=this.get("panX"),u=this.get("panY");if(a!="none"||u!="none"){const c=n._display;let l=c.toLocal(t.point);i=c.toLocal(i);let h=this._downTranslateX,f=this._downTranslateY;if(Math.hypot(i.x-l.x,i.y-l.y)>5){let p=n.get("background");if(p&&p.events.disableType("click"),Xt(h)&&Xt(f)){let g=this.get("projection");const m=this.get("zoomLevel",1),v=this.get("maxPanOut",.4),P=this._mapBounds,_=this.width(),y=this.height(),w=P[1][0]-P[0][0],b=P[1][1]-P[0][1];if(a=="translateX"){h+=l.x-i.x;const D=_/2-(_/2-this._centerX)*m;h=Math.min(h,D+w*v*m),h=Math.max(h,D-w*v*m)}if(u=="translateY"){f+=l.y-i.y;const D=y/2-(y/2-this._centerY)*m;f=Math.min(f,D+b*v*m),f=Math.max(f,D-b*v*m)}if(this.set("translateX",h),this.set("translateY",f),g.invert){let D=g.invert([i.x,i.y]);location&&D&&(a=="rotateX"&&this.set("rotationX",this._downRotationX-(i.x-l.x)*this._pLon),u=="rotateY"&&this.set("rotationY",this._downRotationY+(i.y-l.y)*this._pLat))}}}}}}_handleWheelRotateY(t,n,i){this._rya=this.animate({key:"rotationY",to:this.get("rotationY",0)-t,duration:n,easing:i})}_handleWheelRotateX(t,n,i){this._rxa=this.animate({key:"rotationX",to:this.get("rotationX",0)-t,duration:n,easing:i})}_handleWheelZoom(t,n){let i=this.get("zoomStep",2),o=this.get("zoomLevel",1),r=o;t>0?r=o/i:t<0&&(r=o*i),r!=o&&this.zoomToPoint(n,r)}zoomToGeoBounds(t,n,i,o){t.right<t.left&&(t.right=180,t.left=-180);const s=this.getPrivate("geoPath").bounds(this._geometryColection);let a=this.convert({longitude:t.left,latitude:t.top},i,o),u=this.convert({longitude:t.right,latitude:t.bottom},i,o);a.y<s[0][1]&&(a.y=s[0][1]),u.y>s[1][1]&&(u.y=s[1][1]);let c=this.get("zoomLevel",1),l={left:a.x,right:u.x,top:a.y,bottom:u.y},h=this.seriesContainer,f=.9*Math.min(h.innerWidth()/(l.right-l.left)*c,h.innerHeight()/(l.bottom-l.top)*c),p=l.left+(l.right-l.left)/2,g=l.top+(l.bottom-l.top)/2,m=this.invert({x:p,y:g});return(i!=null||o!=null)&&this.rotate(i,o),this.zoomToGeoPoint(m,f,!0,n)}zoomToPoint(t,n,i,o){n&&(n=en(n,this.get("minZoomLevel",1),this.get("maxZoomLevel",32))),Xt(o)||(o=this.get("animationDuration",0));const r=this.get("animationEasing"),s=this.get("zoomLevel",1);this.get("centerMapOnZoomOut")&&n==this.get("homeZoomLevel",1)&&(t=this.convert(this.homeGeoPoint(),this.get("homeRotationX"),this.get("homeRotationY")),i=!0);let a=t.x,u=t.y,c=this.get("translateX",0),l=this.get("translateY",0),h=a,f=u;i&&(h=this.width()/2,f=this.height()/2);let p=h-(a-c)/s*n,g=f-(u-l)/s*n;return this._txa=this.animate({key:"translateX",to:p,duration:o,easing:r}),this._tya=this.animate({key:"translateY",to:g,duration:o,easing:r}),this._za=this.animate({key:"zoomLevel",to:n,duration:o,easing:r}),s!=n&&this._root.readerAlert(this._t("Zoom level changed to %1",this._root.locale,fi(n))),this._za}zoomToGeoPoint(t,n,i,o,r,s){let a=this.convert(t,r,s);if((r!=null||s!=null)&&this.rotate(r,s,o),a)return this.zoomToPoint(a,n,i,o)}rotate(t,n,i){if(this.get("projection").rotate){Xt(i)||(i=this.get("animationDuration",0));const r=this.get("animationEasing");t!=null&&this.animate({key:"rotationX",to:t,duration:i,easing:r}),n!=null&&this.animate({key:"rotationY",to:n,duration:i,easing:r})}}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)/this.get("zoomStep",2))}_clearDirty(){super._clearDirty(),this._dirtyGeometries=!1,this._mapFitted=!1}getArea(t){const n=this.getPrivate("geoPath"),i=t.get("geometry");return i?n.area(i):0}}Object.defineProperty(Ze,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapChart"});Object.defineProperty(Ze,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ln.classNames.concat([Ze.className])});var Wt={exports:{}};class Co{constructor(t=[],n=Mo){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,o=n[t];for(;t>0;){const r=t-1>>1,s=n[r];if(i(o,s)>=0)break;n[t]=s,t=r}n[t]=o}_down(t){const{data:n,compare:i}=this,o=this.length>>1,r=n[t];for(;t<o;){let s=(t<<1)+1,a=n[s];const u=s+1;if(u<this.length&&i(n[u],a)<0&&(s=u,a=n[u]),i(a,r)>=0)break;n[t]=a,t=s}n[t]=r}}function Mo(e,t){return e<t?-1:e>t?1:0}const Lo=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Oo=Si(Lo);var Cn;function Ro(){if(Cn)return Wt.exports;Cn=1;var e=Oo;e.default&&(e=e.default),Wt.exports=t,Wt.exports.default=t;function t(a,u,c){u=u||1;for(var l,h,f,p,g=0;g<a[0].length;g++){var m=a[0][g];(!g||m[0]<l)&&(l=m[0]),(!g||m[1]<h)&&(h=m[1]),(!g||m[0]>f)&&(f=m[0]),(!g||m[1]>p)&&(p=m[1])}var v=f-l,P=p-h,_=Math.min(v,P),y=_/2;if(_===0){var w=[l,h];return w.distance=0,w}for(var b=new e(void 0,n),D=l;D<f;D+=_)for(var N=h;N<p;N+=_)b.push(new i(D+y,N+y,y,a));var E=r(a),L=new i(l+v/2,h+P/2,0,a);L.d>E.d&&(E=L);for(var z=b.length;b.length;){var S=b.pop();S.d>E.d&&(E=S,c&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,z)),!(S.max-E.d<=u)&&(y=S.h/2,b.push(new i(S.x-y,S.y-y,y,a)),b.push(new i(S.x+y,S.y-y,y,a)),b.push(new i(S.x-y,S.y+y,y,a)),b.push(new i(S.x+y,S.y+y,y,a)),z+=4)}c&&(console.log("num probes: "+z),console.log("best distance: "+E.d));var Z=[E.x,E.y];return Z.distance=E.d,Z}function n(a,u){return u.max-a.max}function i(a,u,c,l){this.x=a,this.y=u,this.h=c,this.d=o(a,u,l),this.max=this.d+this.h*Math.SQRT2}function o(a,u,c){for(var l=!1,h=1/0,f=0;f<c.length;f++)for(var p=c[f],g=0,m=p.length,v=m-1;g<m;v=g++){var P=p[g],_=p[v];P[1]>u!=_[1]>u&&a<(_[0]-P[0])*(u-P[1])/(_[1]-P[1])+P[0]&&(l=!l),h=Math.min(h,s(a,u,P,_))}return h===0?0:(l?1:-1)*Math.sqrt(h)}function r(a){for(var u=0,c=0,l=0,h=a[0],f=0,p=h.length,g=p-1;f<p;g=f++){var m=h[f],v=h[g],P=m[0]*v[1]-v[0]*m[1];c+=(m[0]+v[0])*P,l+=(m[1]+v[1])*P,u+=P*3}return u===0?new i(h[0][0],h[0][1],0,a):new i(c/u,l/u,0,a)}function s(a,u,c,l){var h=c[0],f=c[1],p=l[0]-h,g=l[1]-f;if(p!==0||g!==0){var m=((a-h)*p+(u-f)*g)/(p*p+g*g);m>1?(h=l[0],f=l[1]):m>0&&(h+=p*m,f+=g*m)}return p=a-h,g=u-f,p*p+g*g}return Wt.exports}var No=Ro();const zo=bi(No);class ge extends On{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.setPrivate("trustBounds",!0)}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const n=this.series;if(n){const i=n.projection();i&&i.precision(this.get("precision",.5));const o=n.geoPath();o&&(this._clear=!0,this.set("draw",r=>{o.context(this._display),o(t),o.context(null)}),this.isHover()&&this.showTooltip())}}}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}geoCentroid(){const t=this.get("geometry");return t?He(t):{latitude:0,longitude:0}}visualCentroid(){let t=0,n=[];const i=this.get("geometry");if(i){if(i.type=="Polygon")n=i.coordinates;else if(i.type=="MultiPolygon")for(let o=0;o<i.coordinates.length;o++){let r=i.coordinates[o],s=$n({type:"Polygon",coordinates:r});s>t&&(n=r,t=s)}if(n){let o=zo(n);return{longitude:o[0],latitude:o[1]}}}return{longitude:0,latitude:0}}_getTooltipPoint(){const t=this.series;if(t){const n=t.projection();if(n){const i=this.visualCentroid(),o=n([i.longitude,i.latitude]);if(o)return{x:o[0],y:o[1]}}}return{x:0,y:0}}}Object.defineProperty(ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygon"});Object.defineProperty(ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:On.classNames.concat([ge.className])});class ke extends jt{constructor(){super(...arguments),Object.defineProperty(this,"mapPolygons",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new wi(pi.new({}),()=>ge._new(this._root,{},[this.mapPolygons.template])))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Polygon","MultiPolygon"]})}makeMapPolygon(t){const n=this.children.push(this.mapPolygons.make());return n._setDataItem(t),this.mapPolygons.push(n),n}markDirtyProjection(){ut(this.dataItems,t=>{let n=t.get("mapPolygon");n&&n.markDirtyProjection()})}_prepareChildren(){super._prepareChildren(),this.isDirty("fill")&&this.mapPolygons.template.set("fill",this.get("fill")),this.isDirty("stroke")&&this.mapPolygons.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let n=t.get("mapPolygon");n||(n=this.makeMapPolygon(t)),t.set("mapPolygon",n);let i=t.get("geometry");if(i){if(this.get("reverseGeodata")&&i.coordinates)for(let r=0;r<i.coordinates.length;r++)if(i.type=="MultiPolygon")for(let s=0;s<i.coordinates[r].length;s++)i.coordinates[r][s].reverse();else i.coordinates[r].reverse();n.set("geometry",i)}n.series=this,this._addGeometry(t.get("geometry"),this)}disposeDataItem(t){super.disposeDataItem(t);const n=t.get("mapPolygon");n&&(this.mapPolygons.removeValue(n),n.dispose()),this._removeGeometry(t.get("geometry"))}_excludeDataItem(t){super._excludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!0)}markDirtyValues(t){if(super.markDirtyValues(),t){const n=t.get("mapPolygon");n&&n.set("geometry",t.get("geometry"))}}zoomToDataItem(t,n){const i=t.get("mapPolygon");if(i){const o=i.get("geometry"),r=this.chart;if(o&&r){if(n){const s=He(o);return r.rotate(-s.longitude,-s.latitude),r.zoomToGeoBounds(qt(o),void 0,-s.longitude,-s.latitude)}return r.zoomToGeoBounds(qt(o))}}}zoomToDataItems(t,n){let i,o,r,s;if(ut(t,a=>{const u=a.get("mapPolygon");if(u){const c=u.get("geometry");if(c){let l=qt(c);i==null&&(i=l.left),o==null&&(o=l.right),r==null&&(r=l.top),s==null&&(s=l.bottom),i=Math.min(l.left,i),o=Math.max(l.right,o),r=Math.max(l.top,r),s=Math.min(l.bottom,s)}}}),i!=null&&o!=null&&r!=null&&s!=null){const a=this.chart;if(a){if(n){const u=i+(o-i)/2,c=s+(r-s)/2;return a.rotate(-u,-c),a.zoomToGeoBounds({left:i,right:o,top:r,bottom:s},void 0,-u,-c)}return a.zoomToGeoBounds({left:i,right:o,top:r,bottom:s})}}}getPolygonByPoint(t){let n;const o=this._display._renderer.getObjectAtPoint(t);if(o)return this.mapPolygons.each(function(r){r._display==o&&(n=r)}),n}getPolygonByGeoPoint(t){return this.getPolygonByPoint(this.chart.convert(t))}}Object.defineProperty(ke,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygonSeries"});Object.defineProperty(ke,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:jt.classNames.concat([ke.className])});export{J as A,ge as B,Bo as C,Xo as D,Zo as E,He as F,qt as G,Io as H,Ze as M,ke as a,ht as b,gt as c,R as d,M as e,$ as f,Do as g,j as h,Yo as i,I as j,yt as k,Go as l,jt as m,k as n,O as o,bo as p,Ci as q,x as r,dt as s,ri as t,fo as u,po as v,go as w,So as x,nn as y,xo as z};

import{r as g,j as e,L as D}from"./app-BtTEgW9J.js";import{B as b}from"./button-gGOf78zu.js";import{u as $}from"./translate-C5oEGxGi.js";import{a as A}from"./date-BaJKjiu2.js";import{m as P}from"./index-BPijI7X7.js";import{A as z}from"./arrow-left-pFLVeCQ7.js";import{S as Y,X as E}from"./x-C__OvfAX.js";import{F as j}from"./file-text-ULtIO4cN.js";import{U as I}from"./user-BuiMExWD.js";import{T as N}from"./tag-Dfw80CG5.js";import{T as v}from"./tablet-smartphone-DctM6RPY.js";import{f as L}from"./index-CaunA62S.js";import"./utils-CVSqjLj9.js";import"./createLucideIcon-6Q9HhWKD.js";function re({criminals:c,filters:H}){const{t}=$(),[_,o]=g.useState(!1),[d,y]=g.useState("labels"),[a,w]=g.useState({governmentName:"امارت اسلامی افغانستان",ministryName:"وزارت دفاع",reportTitle:"فهرست مجرمین",dateFormat:"persian"}),k=()=>{window.print()},S=()=>{window.history.back()},n=(r,s)=>{w(i=>({...i,[r]:s}))},T=r=>{var s,i,f;try{const l=new Intl.DateTimeFormat("en-US-u-ca-islamic",{year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(r),p=((s=l.find(m=>m.type==="year"))==null?void 0:s.value)||"",h=((i=l.find(m=>m.type==="month"))==null?void 0:i.value)||"",M=((f=l.find(m=>m.type==="day"))==null?void 0:f.value)||"";return`${p}/${h.padStart(2,"0")}/${M.padStart(2,"0")}`}catch(u){console.error("Error converting to Hijri:",u);const l=Math.floor((r.getFullYear()-622)*.970224),p=Math.floor((r.getMonth()+1)*.970224),h=Math.floor(r.getDate()*.970224);return`${l}/${p.toString().padStart(2,"0")}/${h.toString().padStart(2,"0")}`}},C=r=>A(r.toISOString()),F=r=>{if(!r)return null;try{if(r.includes("/")){const i=P(r,"jYYYY/jMM/jDD");if(i.isValid())return i.toDate()}const s=new Date(r);return isNaN(s.getTime())?null:s}catch(s){return console.error("Error parsing date:",s),null}},x=r=>{if(!r)return"-";try{const s=F(r);if(!s)return r;switch(a.dateFormat){case"hijri":return T(s);case"persian":return C(s);case"gregorian":default:return L(s,"yyyy/MM/dd")}}catch(s){return console.error("Error formatting date:",s),r}};return e.jsxs("div",{className:"print:m-0 print:max-w-none print:p-0",style:{fontFamily:"Amiri, serif"},children:[e.jsx(D,{title:t("criminal.comprehensive_list.print.title")||"فهرست مجرمین"}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
          
          @media print {
              @page {
                  size: A4 landscape;
                  margin: 2.5cm;
              }
              body {
                  font-size: 11px;
                  line-height: 1.5;
                  font-family: 'Amiri', serif !important;
              }
              * {
                  font-family: 'Amiri', serif !important;
              }
              .print\\:text-xs {
                  font-size: 9px !important;
              }
              .print\\:border-gray-800 {
                  border-color: #1f2937 !important;
              }
              .print\\:border-gray-600 {
                  border-color: #4b5563 !important;
              }
              .print\\:hidden {
                  display: none !important;
              }
              table {
                  page-break-inside: auto;
              }
              tr {
                  page-break-inside: avoid;
                  page-break-after: auto;
              }
          }
      `}}),e.jsx("div",{className:"mb-6 print:hidden",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(b,{onClick:S,variant:"outline",size:"lg",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),t("criminal.comprehensive_list.print.back_button")||"بازگشت"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{onClick:()=>o(!0),variant:"outline",size:"lg",className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),t("criminal.comprehensive_list.print.settings_button")||"تنظیمات چاپ"]}),e.jsxs(b,{onClick:k,size:"lg",className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700",children:[e.jsx(j,{className:"h-4 w-4"}),t("criminal.comprehensive_list.print.print_button")||"چاپ"]})]})]})}),e.jsxs("div",{className:"print:page-break-inside-avoid relative mx-auto max-w-7xl px-4",children:[e.jsxs("div",{className:"mb-10 border-b-2 border-gray-300 pb-6 text-center print:border-gray-800",children:[e.jsxs("div",{className:"relative mb-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:"/images/logos/logo 1.png",alt:"logo",className:"h-20 w-20 object-contain print:h-16 print:w-16"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"mb-1 text-3xl font-bold text-gray-900 print:text-2xl",children:a.governmentName}),e.jsx("h2",{className:"mb-1 text-2xl font-semibold text-gray-800 print:text-xl",children:a.ministryName}),e.jsx("h3",{className:"text-xl font-medium text-gray-700 print:text-lg",children:a.reportTitle})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:"/images/logos/logo 2.png",alt:"logo",className:"h-20 w-20 object-contain print:h-16 print:w-16"})})]}),e.jsxs("div",{className:"mt-4 rounded-lg bg-gray-100 px-4 py-2 text-base font-medium text-gray-800 print:bg-gray-200 print:text-sm",children:[t("criminal.comprehensive_list.print.date")||"تاریخ",": ",x(new Date().toISOString()),c.length>0&&e.jsxs(e.Fragment,{children:[" | ",t("criminal.comprehensive_list.print.total")||"تعداد کل",": ",c.length]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-300 print:border-gray-800",children:e.jsxs("table",{className:"min-w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-b from-gray-700 to-gray-800 text-white print:bg-gray-900",children:[e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:"#"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.photo")||"عکس"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.name")||"نوم"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.father_name")||"د پلار نوم"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.number")||"شمېره"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.id_card_number")||"د تذکره شمېره"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.phone_number")||"د تلیفون شمېره"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.crime_type")||"د جرم ډول"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.department")||"څانګه"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.arrest_date")||"د نیول کېدو نېټه"}),e.jsx("th",{className:"border border-gray-400 px-3 py-2 text-center text-xs font-bold print:border-gray-800",children:t("criminal.comprehensive_list.table.arrest_location")||"د نیول کېدو ځای"})]})}),e.jsx("tbody",{children:c.length>0?c.map((r,s)=>{var i;return e.jsxs("tr",{className:`transition-colors ${s%2===0?"bg-white print:bg-white":"bg-gray-50 print:bg-gray-100"} hover:bg-gray-100 print:hover:bg-inherit`,children:[e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",children:s+1}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center print:border-gray-800",children:r.photo?e.jsx("img",{src:`/storage/${r.photo}`,alt:r.name,className:"mx-auto h-12 w-12 rounded object-cover print:h-10 print:w-10"}):e.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded bg-gray-200 print:h-10 print:w-10",children:e.jsx(I,{className:"h-6 w-6 text-gray-400 print:h-5 print:w-5"})})}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",children:r.name}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",children:r.father_name||"-"}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",children:r.number||"-"}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",dir:"ltr",children:r.id_card_number||"-"}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",dir:"ltr",children:r.phone_number||"-"}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",children:r.crime_type||"-"}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs text-gray-900 print:border-gray-800",children:((i=r.department)==null?void 0:i.name)||"-"}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs font-medium text-gray-900 print:border-gray-800",children:x(r.arrest_date)}),e.jsx("td",{className:"border border-gray-300 px-3 py-2 text-justify text-xs leading-relaxed text-gray-900 break-words whitespace-normal print:border-gray-800",children:r.arrest_location||"-"})]},r.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"border border-gray-300 px-4 py-8 text-center text-sm text-gray-500 print:border-gray-800",children:t("criminal.comprehensive_list.no_records")||"هیچ موردی یافت نشد"})})})]})})})]}),_&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[e.jsx(j,{className:"mr-2 h-5 w-5"}),t("criminal.comprehensive_list.print.settings_title")||"تنظیمات چاپ"]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:e.jsx(E,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{onClick:()=>y("labels"),className:`px-4 py-2 border-b-2 font-medium text-sm ${d==="labels"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),t("criminal.comprehensive_list.print.settings.tabs.labels")||"عنوان‌ها"]})}),e.jsx("button",{onClick:()=>y("date_format"),className:`px-4 py-2 border-b-2 font-medium text-sm ${d==="date_format"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),t("criminal.comprehensive_list.print.settings.tabs.date_format")||"فرمت تاریخ"]})})]}),d==="labels"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"mr-2 h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-md font-medium",children:t("criminal.comprehensive_list.print.settings_labels_title")||"عنوان‌ها"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("criminal.comprehensive_list.print.settings_government_name")||"نام دولت:"}),e.jsx("input",{type:"text",value:a.governmentName,onChange:r=>n("governmentName",r.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"امارت اسلامی افغانستان"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("criminal.comprehensive_list.print.settings_ministry_name")||"نام وزارت:"}),e.jsx("input",{type:"text",value:a.ministryName,onChange:r=>n("ministryName",r.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"وزارت دفاع"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("criminal.comprehensive_list.print.settings_report_title")||"عنوان گزارش:"}),e.jsx("input",{type:"text",value:a.reportTitle,onChange:r=>n("reportTitle",r.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"فهرست مجرمین"})]})]})]}),d==="date_format"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"mr-2 h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-md font-medium",children:t("criminal.comprehensive_list.print.settings.date_format.title")||"فرمت تاریخ"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("criminal.comprehensive_list.print.settings.date_format.title")||"فرمت تاریخ"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"dateFormat",value:"gregorian",checked:a.dateFormat==="gregorian",onChange:r=>n("dateFormat",r.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("criminal.comprehensive_list.print.settings.date_format.gregorian")||"میلادی (Gregorian)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"dateFormat",value:"hijri",checked:a.dateFormat==="hijri",onChange:r=>n("dateFormat",r.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("criminal.comprehensive_list.print.settings.date_format.hijri")||"هجری (Hijri)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"dateFormat",value:"persian",checked:a.dateFormat==="persian",onChange:r=>n("dateFormat",r.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("criminal.comprehensive_list.print.settings.date_format.persian")||"شمسی (Persian)"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:t("criminal.comprehensive_list.print.settings.date_format.preview")||"نمونه تاریخ:"}),e.jsx("div",{className:"text-sm text-gray-600",children:x(new Date().toISOString())})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("h3",{className:"text-md font-medium mb-3",children:t("criminal.comprehensive_list.print.settings_preview")||"پیش‌نمایش"}),e.jsx("div",{className:"border rounded overflow-hidden bg-white p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-1 text-2xl font-bold text-gray-900",children:a.governmentName}),e.jsx("h2",{className:"mb-1 text-xl font-semibold text-gray-800",children:a.ministryName}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:a.reportTitle})]})})]})]}),e.jsxs("div",{className:"border-t px-4 py-3 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:t("common.cancel")||"لغو"}),e.jsx("button",{onClick:()=>{o(!1)},className:"px-4 py-2 bg-primary border border-transparent rounded-md text-sm font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:t("common.save")||"ذخیره"}),e.jsx("button",{onClick:()=>{o(!1),setTimeout(()=>window.print(),300)},className:"px-4 py-2 bg-purple-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:t("criminal.comprehensive_list.print.apply_and_print")||"ذخیره و چاپ"})]})]})})]})}export{re as default};

import{m as E,r as N,j as e,L as O}from"./app-r9KjYKQw.js";import{A as R}from"./app-layout-s8tY0T3c.js";import{B as _}from"./button-BLp9L4TL.js";import{C as m,a as v,b as y,d as x}from"./card-BZcmnj_i.js";import{I as w}from"./input-CE6qfAFJ.js";import{L as n}from"./label-B8PADfn2.js";import{T as q}from"./textarea-CYrFZEnB.js";import{u as P}from"./translate-ClYFkYht.js";import{u as X}from"./use-permissions-DrfLCIBC.js";import{c as G}from"./permission-guard-CdStMc5D.js";import{S as J,a as K,b as M,c as Q,d as C}from"./select-CsfpLZ-U.js";import{T as U}from"./TreeViewStatSelector-7Hmc6eN6.js";import{B as W}from"./badge-vGU7Yrf4.js";import{H as Y}from"./header-CEKMnHQI.js";import{F as h}from"./file-text-V54dO7J0.js";import{S}from"./save-Bb1pAVJm.js";import{X as u}from"./x-C1JX4jt7.js";import{C as Z}from"./chart-column-D_gxgsd3.js";import{T}from"./triangle-alert-B3GFIgzD.js";import{B as $}from"./building-2-B6NaTs19.js";import"./utils-7dIywwA9.js";import"./index-tFRpsIsb.js";import"./createLucideIcon-Cdw61txb.js";import"./index-DgKbVT4N.js";import"./index-TKr9olnX.js";import"./index-lhjovZWR.js";import"./index-i12yFJzw.js";import"./avatar-BVPoHnaT.js";import"./users-DGphhVhk.js";import"./tag-BKmJyYOw.js";import"./qr-code-CxnETE4N.js";import"./map-pin-C6HvqFCw.js";import"./building-CKERwL7o.js";import"./database-CJk8tJiZ.js";import"./index-B8h5Zggw.js";import"./check-aj__vOL8.js";import"./arrow-left-BE_6Qb74.js";import"./plus-DF0fvk5y.js";function Ee({statItems:f,statCategories:k}){const{t}=P();X();const{data:d,setData:o,post:B,processing:g,errors:a}=E({name:"",code:"",description:""}),[c,b]=N.useState({}),[i,F]=N.useState(null),L=[{title:t("info.page_title"),href:route("info-types.index")},{title:t("info_types.page_title"),href:route("info-types.index")},{title:t("info_types.create.page_title"),href:"#"}],D=s=>{s.preventDefault();const l=Object.entries(c).filter(([r,{value:p}])=>p.trim()!=="").map(([r,{value:p,notes:z}])=>({stat_category_item_id:parseInt(r),value:p,notes:z||void 0}));l.length>0&&o("stats",l),B(route("info-types.store"))},I=k.map(s=>({id:s.id,label:s.label,color:s.color})),j=i?f.filter(s=>s.category.id===i):f;function V(s,l){b(r=>({...r,[s]:{...r[s]||{notes:null},value:l}}))}function A(s,l){b(r=>({...r,[s]:{...r[s]||{value:""},notes:l||null}}))}const H=Object.keys(c).length;return e.jsxs(R,{breadcrumbs:L,children:[e.jsx(O,{title:t("info_types.create.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(Y,{title:t("info_types.create.page_title"),description:t("info_types.create.page_description"),icon:e.jsx(h,{className:"h-6 w-6 text-white"}),model:"info_type",routeName:"info-types.create",buttonText:t("info_types.create.save_button"),theme:"purple",buttonSize:"lg",showBackButton:!0,backRouteName:"info-types.index",backButtonText:t("info_types.create.back_button")}),e.jsx(G,{model:"info_type",children:e.jsx("form",{onSubmit:D,children:e.jsxs("div",{className:"grid gap-8",children:[e.jsxs(m,{className:"shadow-2xl bg-gradient-to-bl from-white to-purple-50/30 border-0 rounded-3xl overflow-hidden",children:[e.jsx(v,{className:"bg-gradient-to-l from-purple-500 to-purple-600 text-white py-6",children:e.jsxs(y,{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm shadow-lg",children:e.jsx(S,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:t("info_types.create.form_title")}),e.jsx("div",{className:"text-purple-100 text-sm font-medium",children:t("info_types.create.form_description")})]})]})}),e.jsxs(x,{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{htmlFor:"name",className:"text-lg font-semibold text-purple-800 flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),t("info_types.create.name_label")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{id:"name",value:d.name,onChange:s=>o("name",s.target.value),required:!0,className:"h-12 text-lg border-purple-200 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 to-white rounded-xl shadow-lg",placeholder:t("info_types.create.name_placeholder")}),a.name&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:a.name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{htmlFor:"code",className:"text-lg font-semibold text-purple-800 flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),t("info_types.create.code_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{id:"code",value:d.code,onChange:s=>o("code",s.target.value),className:"h-12 text-lg border-purple-200 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 to-white rounded-xl shadow-lg",placeholder:t("info_types.create.code_placeholder")}),a.code&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:a.code})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{htmlFor:"description",className:"text-lg font-semibold text-purple-800 flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),t("info_types.create.description_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{id:"description",value:d.description,onChange:s=>o("description",s.target.value),rows:4,className:"text-lg border-purple-200 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 to-white rounded-xl shadow-lg resize-none",placeholder:t("info_types.create.description_placeholder")}),a.description&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:a.description})]})]})]})]})]}),e.jsxs(m,{className:"shadow-2xl bg-gradient-to-bl from-white to-purple-50/30 border-0 rounded-3xl overflow-hidden",children:[e.jsx(v,{className:"bg-gradient-to-l from-purple-500 to-purple-600 text-white py-6",children:e.jsxs(y,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm shadow-lg",children:e.jsx(T,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:t("info_types.stats.title")}),e.jsx("div",{className:"text-purple-100 text-sm font-medium",children:t("info_types.stats.description")})]})]}),e.jsxs(W,{variant:"secondary",className:"bg-white/20 text-white px-3 py-1",children:[H," ",t("info_types.stats.selected_count")]})]})}),e.jsxs(x,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(n,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-purple-700 text-right",dir:"rtl",children:[t("info_types.stats.filter_by_category"),e.jsx($,{className:"h-4 w-4"})]}),e.jsxs(J,{value:(i==null?void 0:i.toString())||"all",onValueChange:s=>F(s!=="all"?parseInt(s):null),children:[e.jsx(K,{id:"category-filter",className:"h-12 border-purple-200 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 to-white text-right",children:e.jsx(M,{placeholder:t("incidents.filters.all_categories")})}),e.jsxs(Q,{children:[e.jsx(C,{value:"all",children:t("incidents.filters.all_categories")}),I.map(s=>e.jsx(C,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:s.color}}),s.label]})},s.id))]})]})]}),j.length>0?e.jsx(U,{items:j,statsData:c,onValueChange:V,onNotesChange:A}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"p-4 bg-purple-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(T,{className:"h-8 w-8 text-purple-400"})}),e.jsx("p",{className:"text-lg font-semibold text-purple-800 mb-2",children:t("info_types.stats.no_items")}),e.jsx("p",{className:"text-purple-600",children:t("info_types.stats.no_items_description")})]})]})]}),e.jsx(m,{className:"shadow-2xl bg-gradient-to-bl from-white to-purple-50/30 border-0 rounded-3xl overflow-hidden",children:e.jsxs(x,{className:"px-8 py-6 bg-gradient-to-l from-purple-50 to-white border-t border-purple-200 flex justify-end gap-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>window.history.back(),className:"h-12 px-6 shadow-lg border-purple-300 text-purple-700 hover:bg-purple-100 hover:border-purple-400 rounded-xl transition-all duration-300 hover:scale-105 text-lg font-semibold",children:t("info_types.create.cancel_button")}),e.jsx(_,{type:"submit",disabled:g,className:"h-12 px-8 bg-gradient-to-l from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700 shadow-2xl rounded-xl transition-all duration-300 hover:scale-105 text-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),t("info_types.create.saving_button")]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),t("info_types.create.save_button")]})})]})})]})})})]})]})}export{Ee as default};

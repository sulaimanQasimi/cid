import{r as N,j as e,L as T,U as m}from"./app-GSRKIW_T.js";import{B as w}from"./button-Bhpc0mxF.js";import{u as z}from"./translate-DpzX0cI9.js";import{a as p,b as D}from"./date-BaJKjiu2.js";import{I as E,Q as L}from"./browser-CiupcZkk.js";import{A}from"./arrow-left-C_Tb0prb.js";import{F as P}from"./file-text-CE615OX-.js";import{T as u}from"./tag-Cv3AiiQv.js";import{C as v}from"./circle-check-big-ClNWJR8U.js";import{C as k}from"./clock-DlJAoy_7.js";import{C as d}from"./calendar-DQQS-Q5F.js";import{U as F}from"./user-BiEwVa9d.js";import{F as C}from"./file-check-IX7KYO4e.js";import{B as S}from"./building-2-C1dbMP5I.js";import{C as O}from"./chart-column-BtfunLoJ.js";import"./utils-BxWwq5MK.js";import"./createLucideIcon-ByoieD3J.js";function ae({nationalInsightCenterInfo:t,infos:x}){var b,g,f,_;const{t:r}=z(),[h,Q]=N.useState("");N.useEffect(()=>{(async()=>{try{const l=t.code||t.id.toString(),c=await L.toDataURL(l,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});Q(c)}catch(l){console.error("Error generating QR code:",l)}})()},[t.code,t.id]);const R=()=>{window.print()},U=()=>{window.history.back()};return e.jsxs("div",{className:"print:max-w-none print:p-0 print:m-0",style:{fontFamily:"Arial, sans-serif"},children:[e.jsx(T,{title:r("national_insight_center_info.print.title",{name:t.name})}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    @media print {
                        @page {
                            size: A4;
                            margin: 1cm;
                        }
                        body {
                            font-size: 12px;
                            line-height: 1.4;
                        }
                        .print\\:text-xs {
                            font-size: 10px !important;
                        }
                        .print\\:border-gray-800 {
                            border-color: #1f2937 !important;
                        }
                        .print\\:border-gray-600 {
                            border-color: #4b5563 !important;
                        }
                        .print\\:hidden {
                            display: none !important;
                        }
                    }
                `}}),e.jsx("div",{className:"mb-6 print:hidden",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(w,{onClick:U,variant:"outline",size:"lg",className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),r("national_insight_center_info.print.back_button")]}),e.jsxs(w,{onClick:R,size:"lg",className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700",children:[e.jsx(P,{className:"h-4 w-4"}),r("national_insight_center_info.print.print_button")]})]})}),e.jsxs("div",{className:"print:page-break-inside-avoid relative",children:[e.jsx("h1",{className:"text-2xl font-bold text-black text-center mb-2",children:r("national_insight_center_info.print.header_title")}),e.jsx("h2",{className:"text-xl font-semibold text-black text-center pt-2 mb-4",children:t.name}),h&&e.jsx("div",{className:"absolute top-0 right-0 print:top-0 print:right-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:h,alt:"QR Code",className:"w-24 h-24 print:w-20 print:h-20 border border-gray-300 print:border-gray-600"}),e.jsx("p",{className:"text-xs text-gray-600 print:text-gray-800 mt-1",children:t.code||t.id})]})})]}),e.jsxs("table",{className:"w-full mt-4 print:text-xs",style:{borderCollapse:"collapse"},children:[e.jsxs("tr",{className:"text-sm border-b border-gray-900 print:border-gray-800",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),r("national_insight_center_info.print.code"),":"]}),e.jsx("td",{className:"pr-4",children:t.code}),e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[t.confirmed?e.jsx(v,{className:"h-3 w-3 text-green-600"}):e.jsx(k,{className:"h-3 w-3 text-yellow-600"}),r("national_insight_center_info.print.status"),":"]}),e.jsx("td",{className:"pr-4",children:t.confirmed?r("national_insight_center_info.confirmed"):r("national_insight_center_info.pending")}),e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(d,{className:"h-3 w-3"}),r("national_insight_center_info.print.created_at"),":"]}),e.jsx("td",{className:"pr-4",children:p(t.created_at)})]}),e.jsxs("tr",{className:"text-sm border-b border-gray-900 print:border-gray-800",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3"}),r("national_insight_center_info.print.created_by"),":"]}),e.jsx("td",{className:"pr-4",children:(b=t.creator)==null?void 0:b.name}),e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(C,{className:"h-3 w-3"}),r("national_insight_center_info.print.confirmed_by"),":"]}),e.jsx("td",{className:"pr-4",children:((g=t.confirmer)==null?void 0:g.name)||"-"}),e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(d,{className:"h-3 w-3"}),r("national_insight_center_info.print.confirmed_at"),":"]}),e.jsx("td",{className:"pr-4",children:t.confirmed_at?p(t.confirmed_at):"-"})]}),e.jsxs("tr",{className:"text-sm pt-2 py-2",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(S,{className:"h-3 w-3"}),r("national_insight_center_info.print.info.department"),":"]}),e.jsx("td",{colSpan:5,children:((_=(f=t.creator)==null?void 0:f.department)==null?void 0:_.name)||"-"})]})]}),e.jsx("hr",{className:"my-4 border-gray-900 print:border-gray-800"}),x.map((s,l)=>{var c,j,y;return e.jsxs("div",{className:"mt-4 print:page-break-inside-avoid",children:[e.jsx("div",{className:"pt-4 mb-2",children:e.jsxs("h3",{className:"text-lg font-semibold text-black mb-2",children:[l+1,". ",s.title]})}),e.jsxs("table",{className:"w-full print:text-xs",style:{borderCollapse:"collapse"},children:[e.jsxs("tr",{className:"border-b border-gray-300 print:border-gray-600",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),r("national_insight_center_info.print.info.info_category"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:((c=s.info_category)==null?void 0:c.name)||"-"}),e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(S,{className:"h-3 w-3"}),r("national_insight_center_info.print.info.department"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:((j=s.department)==null?void 0:j.name)||"-"}),e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3"}),r("national_insight_center_info.print.info.creator"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:((y=s.creator)==null?void 0:y.name)||"-"})]}),e.jsxs("tr",{className:"border-b border-gray-300 print:border-gray-600",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[s.confirmed?e.jsx(v,{className:"h-3 w-3 text-green-600"}):e.jsx(k,{className:"h-3 w-3 text-yellow-600"}),r("national_insight_center_info.print.info.confirmed"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:s.confirmed?r("national_insight_center_info.print.info.confirmed"):r("national_insight_center_info.print.info.pending")}),e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(d,{className:"h-3 w-3"}),r("national_insight_center_info.print.info.created_at"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:p(s.created_at)}),e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(C,{className:"h-3 w-3"}),r("national_insight_center_info.print.registration_number"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:s.registration_number||"-"})]})]}),s.description&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 print:bg-white print:border print:border-gray-300 rounded",children:[e.jsxs("h4",{className:"font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),r("national_insight_center_info.print.description"),":"]}),e.jsx("p",{className:"text-sm text-justify leading-relaxed",children:s.description})]}),s.item_stats&&s.item_stats.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),r("national_insight_center_info.print.statistics"),":"]}),e.jsx("table",{className:"w-full print:text-xs border border-gray-300 print:border-gray-600",style:{borderCollapse:"collapse"},children:(()=>{const B=s.item_stats.reduce((a,i)=>{const n=i.stat_category_item.category.id;return a[n]||(a[n]={category:i.stat_category_item.category,items:[]}),a[n].items.push(i),a},{}),o=Object.entries(B);return e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-gray-300 print:border-gray-600",children:o.map(([a,i])=>e.jsx("td",{colSpan:i.items.length,className:"font-bold text-center py-2 border-r border-gray-300 print:border-gray-600",style:{backgroundColor:i.category.color+"20"},children:i.category.label},a))}),e.jsx("tr",{className:"border-b border-gray-300 print:border-gray-600",children:o.map(([a,i])=>e.jsx(m.Fragment,{children:i.items.map(n=>e.jsx("th",{className:"text-center py-1 font-semibold border-r border-gray-300 print:border-gray-600",children:n.stat_category_item.label},n.id))},a))}),e.jsx("tr",{className:"border-b border-gray-300 print:border-gray-600",children:o.map(([a,i])=>e.jsx(m.Fragment,{children:i.items.map(n=>e.jsx("td",{className:"text-center py-1 border-r border-gray-300 print:border-gray-600",children:n.string_value},n.id))},a))}),s.item_stats.some(a=>a.notes)&&e.jsx("tr",{className:"border-b border-gray-300 print:border-gray-600",children:o.map(([a,i])=>e.jsx(m.Fragment,{children:i.items.map(n=>e.jsx("td",{className:"text-center py-1 text-xs border-r border-gray-300 print:border-gray-600",children:n.notes||""},`notes-${n.id}`))},a))})]})})()})]}),l<x.length-1&&e.jsx("hr",{className:"my-4 border-gray-300 print:border-gray-600"})]},s.id)}),e.jsx("div",{className:"mt-8 pt-4 border-t border-gray-300 print:border-gray-600 print:mt-12",children:e.jsx("div",{className:"text-center text-sm text-gray-600 print:text-gray-800",children:e.jsxs("p",{className:"flex items-center justify-center gap-2",children:[e.jsx(d,{className:"h-4 w-4"}),r("national_insight_center_info.print.footer.generated_on"),": ",D(new Date().toISOString())]})})})]})}export{ae as default};

import{r as c,K as X,j as e,L as Y,$ as y,a as Z}from"./app-CbeKh3sQ.js";import{A as ee}from"./app-layout-CfjUymSY.js";import{B as o}from"./button-vsEdbmui.js";import{C as se,a as ae,b as te,c as re,d as le,e as ne}from"./card-DRnQwPQj.js";import{T as oe,a as ie,b as S,c as w,d as ce,e as j}from"./table-CWG3enOx.js";import{S as P,a as D,b as H,c as $,d as T}from"./select-CmNuGxCi.js";import{I as E}from"./input-Bw-0_52B.js";import{u as de}from"./translate-DDGPHNjD.js";import{D as ue}from"./download-BmpO791M.js";import{c as me}from"./createLucideIcon-C8XIMENg.js";import{P as xe}from"./plus-L_b-Iqd7.js";import{S as pe}from"./search-BuWAt4Gn.js";import"./utils-Bb4HXjj7.js";import"./index-BLwe4XBe.js";import"./index-DFtoJXdd.js";import"./index-oxwXHx3t.js";import"./index-D6KZUy1Z.js";import"./x-CQQzauN7.js";import"./index-DDyZSmUm.js";import"./avatar-BtcH7zJL.js";import"./eye-DEj99WMU.js";import"./file-text-C1z44-YN.js";import"./users-C__KGsfH.js";import"./tag-e31-1F12.js";import"./triangle-alert-D2IIfKaK.js";import"./qr-code-B2awKxBM.js";import"./chart-column-ZTAypupu.js";import"./map-pin-CQeslq4k.js";import"./building-1My10aAi.js";import"./database-BoNrNW8a.js";import"./index-BogOZRgn.js";import"./check-lRMwoNkK.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ge=me("Upload",he);function Xe({languages:f=[],translations:l={data:[],current_page:1,last_page:1,per_page:15,total:0},groups:B=[],filters:v={}}){var O;const{t:a}=de(),[u,F]=c.useState(""),{auth:je,csrf_token:fe}=X().props,[L,G]=c.useState(!1),[m,C]=c.useState({}),[x,N]=c.useState({}),[R,K]=c.useState(!1),i=v.language||((O=f[0])==null?void 0:O.code)||"en",n=v.group||"all",z=c.useMemo(()=>{var s;return(s=f.find(t=>t.code===i))==null?void 0:s.id},[f,i]),A=B.map(s=>s||"unnamed-group"),b=(l==null?void 0:l.data)||[],p=(l==null?void 0:l.current_page)||1,I=(l==null?void 0:l.last_page)||1,V=(l==null?void 0:l.total)||0,M=u?b.filter(s=>{var t,r;return((t=s.key)==null?void 0:t.toLowerCase().includes(u.toLowerCase()))||((r=s.value)==null?void 0:r.toLowerCase().includes(u.toLowerCase()))}):b,k=c.useMemo(()=>Object.keys(m).length>0||Object.keys(x).length>0,[m,x]),Q=(s,t)=>{C(r=>({...r,[s]:t}))},U=(s,t)=>{N(r=>({...r,[s]:t}))},q=()=>{C({}),N({})},J=s=>{const t=s.indexOf(".");return t>0?s.slice(0,t):"general"},W=async()=>{if(k)try{K(!0);const s={};b.forEach(r=>{const h=r.key,d=(x[h]??h).trim();if(!d)return;const _=m[h]??r.value??"",g=J(d);s[g]||(s[g]={}),s[g][d]=_});const t=Object.entries(s);for(const[r,h]of t){const d=Object.entries(h).map(([_,g])=>Z.post("translations/import",{language_id:z,key:_,value:g,group:r}));console.log(d),await Promise.all(d)}C({}),N({}),window.location.href=route("translations.index",{page:p,language:i,group:n==="all"?"":n})}catch(s){console.error("Failed to save translations",s)}finally{K(!1)}};return e.jsxs(ee,{children:[e.jsx(Y,{title:a("translations.translations")}),e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("translations.translations")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(y,{href:route("translations.export",{language_id:i,group:v.group==="all"?"":v.group}),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),a("translations.export")]})}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(y,{href:route("translations.export-json"),children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),a("translations.export_translations")]})}),e.jsx(o,{asChild:!0,children:e.jsxs(y,{href:route("translations.create"),children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),a("translations.add_translation")]})}),e.jsx(o,{variant:"outline",onClick:()=>G(s=>!s),children:a("common.edit")}),e.jsx(o,{onClick:W,disabled:!k||R,children:a("common.save")}),e.jsx(o,{variant:"outline",onClick:q,disabled:!k,children:a("common.cancel")})]})]}),e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:a("translations.translations")}),e.jsx(re,{children:a("translations.description")})]}),e.jsxs(le,{children:[e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(P,{value:i,onValueChange:s=>window.location.href=route("translations.index",{language:s,group:n==="all"?"":n}),children:[e.jsx(D,{children:e.jsx(H,{placeholder:a("translations.select_language")})}),e.jsx($,{children:f.map(s=>e.jsx(T,{value:s.code,children:s.name},s.code))})]})}),e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(P,{value:n,onValueChange:s=>window.location.href=route("translations.index",{language:i,group:s==="all"?"":s}),children:[e.jsx(D,{children:e.jsx(H,{placeholder:a("translations.select_group")})}),e.jsxs($,{children:[e.jsx(T,{value:"all",children:a("translations.all_groups")}),A.map(s=>e.jsx(T,{value:s,children:s},s))]})]})}),e.jsxs("div",{className:"w-full md:w-1/3 relative",children:[e.jsx(E,{placeholder:a("translations.filter_translations"),value:u,onChange:s=>F(s.target.value),className:"pr-8"}),e.jsx(pe,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs(oe,{children:[e.jsx(ie,{children:e.jsxs(S,{children:[e.jsx(w,{children:a("translations.key")}),e.jsx(w,{children:a("translations.value")}),e.jsx(w,{children:a("translations.group")}),e.jsx(w,{className:"text-right",children:a("common.actions")})]})}),e.jsx(ce,{children:M.length===0?e.jsx(S,{children:e.jsx(j,{colSpan:4,className:"text-center py-8",children:a(u?"common.no_results":"translations.no_translations")})}):M.map((s,t)=>e.jsxs(S,{children:[e.jsx(j,{className:"font-medium max-w-[250px]",title:x[s.key]??s.key,children:L?e.jsx(E,{value:x[s.key]??s.key,onChange:r=>U(s.key,r.target.value)}):e.jsx("span",{className:"truncate block",children:s.key})}),e.jsx(j,{className:"max-w-[300px]",title:m[s.key]??s.value,children:L?e.jsx(E,{value:m[s.key]??s.value??"",onChange:r=>Q(s.key,r.target.value)}):e.jsx("span",{className:s.value?"":"text-muted-foreground italic",children:s.value||"Empty"})}),e.jsx(j,{children:s.group}),e.jsx(j,{className:"text-right"})]},s.id??`${s.key}-${t}`))})]}),I>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("languages.total_languages",{count:String(V)})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{variant:"outline",size:"sm",disabled:p<=1,onClick:()=>window.location.href=route("translations.index",{page:p-1,language:i,group:n==="all"?"":n}),children:a("departments.prev")}),e.jsx(o,{variant:"outline",size:"sm",disabled:p>=I,onClick:()=>window.location.href=route("translations.index",{page:p+1,language:i,group:n==="all"?"":n}),children:a("departments.next")})]})]})]}),e.jsxs(ne,{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:a("translations.total_translations",{count:String(V)})}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsx(y,{href:route("languages.index"),children:a("languages.manage_languages")})})]})]})]})]})}export{Xe as default};

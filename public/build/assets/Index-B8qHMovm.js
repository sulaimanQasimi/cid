import{r as l,j as e,L,$,S as p}from"./app-ClkBox42.js";import{B as T}from"./button-D4jyYQ1Q.js";import{B as f}from"./badge-BQRvAoLL.js";import{C as z,d as I}from"./card-CAe-xxiW.js";import{P as M}from"./pagination-BK9j26_m.js";import{H as D}from"./header-36GTO9cq.js";import{S as Q}from"./SearchFilters-BLwVnHAz.js";import{T as q,a as G,b as _,c as d,d as J,e as c}from"./table-_urkndrf.js";import{A as K,h as V,a as W,b as X,c as Y,d as Z,e as ee,f as te,g as se}from"./alert-dialog-43faSfQ4.js";import{A as ie}from"./app-layout-CW0bKekL.js";import{u as re}from"./translate-BkG5lsBL.js";import{S as ae}from"./shield-DmXAlHnm.js";import{T as ne}from"./trending-up-lUgn1NXx.js";import{T as oe}from"./triangle-alert-Db_kNgQZ.js";import{P as le}from"./pencil-G1Baw13u.js";import{T as ce}from"./trash-2-DNK5aWxK.js";import"./utils-TGRqflit.js";import"./chevron-left-k9I3g6AI.js";import"./createLucideIcon-BTLmC541.js";import"./permission-guard-LybUEl--.js";import"./arrow-left-CAwGfP5w.js";import"./plus-CsuFJYSH.js";import"./select-BnHLK8ZW.js";import"./index-l6ogYteW.js";import"./index-BArnEXsB.js";import"./index-F8D-J14_.js";import"./tslib.es6-CmEaCU22.js";import"./index-DHwxsUht.js";import"./index-BXfllusH.js";import"./check-BIk4Cd1m.js";import"./input-CJ5-gOpr.js";import"./search-CQJsVZWG.js";import"./filter-x-CXQ5QOQt.js";import"./arrow-up-down-B44RVdl8.js";import"./x-DmLGt7Xb.js";import"./index-PkKjS6kf.js";import"./avatar-Bbg9wF6n.js";import"./calendar-CbTlw5nf.js";import"./file-text-DzDNqiSK.js";import"./users-BvldaJhh.js";import"./tag-k7aO0S0T.js";import"./qr-code-Bg9gKvMq.js";import"./map-pin-B_TOKvLv.js";import"./database-DPqzEiYp.js";const de=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Categories",href:route("incident-categories.index")}];function tt({categories:h,filters:a={}}){const{t:s}=re(),[x,g]=l.useState(null),[j,v]=l.useState(a.search||""),[n,N]=l.useState(a.status||""),[m,S]=l.useState(a.sort_field||"name"),[o,b]=l.useState(a.sort_direction||"asc"),C=l.useRef(!0),u=l.useRef({status:a.status,sortField:a.sort_field,sortDirection:a.sort_direction}),w=[{value:"all",label:s("incident_categories.filters.all_statuses")},{value:"active",label:s("incident_categories.form.status.active")},{value:"inactive",label:s("incident_categories.form.status.inactive")}],y=[{value:"name:asc",label:s("incident_categories.sort.name_asc")},{value:"name:desc",label:s("incident_categories.sort.name_desc")},{value:"severity_level:asc",label:s("incident_categories.sort.severity_low")},{value:"severity_level:desc",label:s("incident_categories.sort.severity_high")},{value:"incidents_count:asc",label:s("incident_categories.sort.incidents_low")},{value:"incidents_count:desc",label:s("incident_categories.sort.incidents_high")},{value:"created_at:desc",label:s("incident_categories.sort.created_at")}],A=[{value:10,label:"10 per page"},{value:25,label:"25 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],F=()=>{try{const t={search:j,status:n==="all"?"":n,sort_field:m,sort_direction:o},i=route("incident-categories.index"),r={preserveState:!0,replace:!0};setTimeout(()=>{p.get(i,t,r)},0)}catch(t){console.error("Error applying search:",t)}},P=()=>{try{const t={search:a.search||"",status:n==="all"?"":n,sort_field:m,sort_direction:o},i=route("incident-categories.index"),r={preserveState:!0,replace:!0};setTimeout(()=>{p.get(i,t,r)},0)}catch(t){console.error("Error applying filters:",t)}};l.useEffect(()=>{if(C.current){C.current=!1;return}const t=n!==u.current.status,i=m!==u.current.sortField,r=o!==u.current.sortDirection;(t||i||r)&&(u.current={status:n,sortField:m,sortDirection:o},P())},[n,m,o]);const k=t=>{t.preventDefault(),F()},E=t=>{N(t==="all"?"":t)},B=t=>{const[i,r]=t.split(":");S(i),b(r)},H=()=>{b(o==="asc"?"desc":"asc")},O=t=>{console.log("Per page changed to:",t)},R=()=>{v(""),N("all"),S("name"),b("asc");try{const t={search:"",status:"",sort_field:"name",sort_direction:"asc"},i=route("incident-categories.index"),r={preserveState:!0,replace:!0};setTimeout(()=>{p.get(i,t,r)},0)}catch(t){console.error("Error clearing filters:",t)}},U=()=>{if(x)try{const t=route("incident-categories.destroy",x);setTimeout(()=>{p.delete(t)},0)}catch(t){console.error("Error deleting category:",t),g(null)}};return e.jsxs(ie,{breadcrumbs:de,children:[e.jsx(L,{title:s("incident_categories.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(D,{title:s("incident_categories.page_title"),description:s("incident_categories.page_description"),icon:e.jsx(ae,{className:"h-6 w-6"}),model:"incident-categories",routeName:()=>route("incident-categories.create"),buttonText:s("incident_categories.new_category"),theme:"blue",buttonSize:"lg"}),e.jsx(Q,{searchQuery:j,onSearchChange:v,onSearchSubmit:k,searchPlaceholder:s("incident_categories.search_placeholder"),filters:{type:n,sort:`${m}:${o}`,direction:o,per_page:10},onTypeChange:E,onCategoryChange:()=>{},onDepartmentChange:()=>{},onSortChange:B,onDirectionChange:H,onPerPageChange:O,onResetFilters:R,types:w,categories:[],departments:[],sortOptions:y,perPageOptions:A,title:s("incident_categories.search_filters"),description:s("incident_categories.find_and_filter"),className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-blue-50/30 dark:to-blue-900/20 border-0 overflow-hidden"}),e.jsxs("div",{className:"mt-8",children:[e.jsx(D,{title:s("incident_categories.table.title"),description:s("incident_categories.table.description"),icon:e.jsx(ne,{className:"h-6 w-6"}),model:"incident-categories",routeName:()=>"",buttonText:"",theme:"blue",showButton:!1}),e.jsx(z,{className:"shadow-lg",children:e.jsx(I,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(G,{children:e.jsxs(_,{className:"bg-gradient-to-l from-blue-100 to-blue-200 border-0",children:[e.jsx(d,{className:"h-12 px-6 text-left align-middle font-bold text-blue-800 text-lg",children:s("incident_categories.table.name")}),e.jsx(d,{className:"h-12 px-6 text-left align-middle font-bold text-blue-800 text-lg",children:s("incident_categories.table.code")}),e.jsx(d,{className:"h-12 px-6 text-left align-middle font-bold text-blue-800 text-lg",children:s("incident_categories.table.color")}),e.jsx(d,{className:"h-12 px-6 text-left align-middle font-bold text-blue-800 text-lg",children:s("incident_categories.table.severity")}),e.jsx(d,{className:"h-12 px-6 text-left align-middle font-bold text-blue-800 text-lg",children:s("incident_categories.table.incidents")}),e.jsx(d,{className:"h-12 px-6 text-left align-middle font-bold text-blue-800 text-lg",children:s("incident_categories.table.status")}),e.jsx(d,{className:"h-12 px-6 text-left align-middle font-bold text-blue-800 text-lg",children:s("common.actions")})]})}),e.jsx(J,{children:h.data.length===0?e.jsx(_,{children:e.jsx(c,{colSpan:7,className:"h-32 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-muted-foreground",children:[e.jsx(oe,{className:"h-16 w-16"}),e.jsx("p",{className:"text-xl font-bold",children:s("incident_categories.no_categories")}),e.jsx("p",{children:"No incident categories found"})]})})}):h.data.map(t=>e.jsxs(_,{children:[e.jsxs(c,{children:[e.jsx("div",{className:"font-bold text-lg",children:t.name}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.description&&t.description.length>0?t.description:"-"})]}),e.jsx(c,{children:t.code||"-"}),e.jsx(c,{children:t.color&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-gray-200",style:{backgroundColor:t.color}}),e.jsx("span",{className:"font-medium",children:t.color})]})}),e.jsx(c,{children:e.jsxs(f,{variant:t.severity_level>4?"destructive":t.severity_level>2?"default":"outline",children:["Level ",t.severity_level]})}),e.jsx(c,{children:e.jsx(f,{variant:"outline",children:t.incidents_count})}),e.jsx(c,{children:e.jsx(f,{variant:t.status==="active"?"default":"secondary",children:t.status})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"ghost",size:"icon",asChild:!0,title:s("incident_categories.actions.edit"),children:e.jsx($,{href:route("incident-categories.edit",t.id),children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs(K,{open:x===t.id,onOpenChange:i=>{i||g(null)},children:[e.jsx(V,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>g(t.id),title:s("incident_categories.actions.delete"),children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsxs(W,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:s("incident_categories.delete_title")}),e.jsx(Z,{children:s("incident_categories.delete_description")})]}),e.jsxs(ee,{children:[e.jsx(te,{children:s("common.cancel")}),e.jsx(se,{onClick:U,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:s("common.delete")})]})]})]})]})})]},t.id))})]})})})]}),h.links&&h.links.length>0&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:"bg-gradient-to-l from-blue-50 to-white p-4 rounded-3xl shadow-2xl border border-blue-200",children:e.jsx(M,{links:h.links})})})]})]})}export{tt as default};

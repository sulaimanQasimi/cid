import{r,j as a}from"./app-ClkBox42.js";import{B as o}from"./button-D4jyYQ1Q.js";import{I as F}from"./input-CJ5-gOpr.js";import{L as T}from"./label-FP9VqPXL.js";import{c as f}from"./utils-TGRqflit.js";import{u as W}from"./translate-BkG5lsBL.js";import{m as i}from"./index-Bo8VSZos.js";import{C as D}from"./calendar-CbTlw5nf.js";import{d as q}from"./app-layout-CW0bKekL.js";import{C as A}from"./chevron-left-k9I3g6AI.js";const ae=({value:c="",onChange:g,placeholder:Y,label:b,required:C=!1,error:m,className:O,disabled:x=!1,id:y})=>{const{t:s}=W(),[j,d]=r.useState(!1),[v,k]=r.useState(null),[t,N]=r.useState(i()),[S,h]=r.useState(""),p=r.useRef(null),z=[s("persian_calendar.months.farvardin"),s("persian_calendar.months.ordibehesht"),s("persian_calendar.months.khordad"),s("persian_calendar.months.tir"),s("persian_calendar.months.mordad"),s("persian_calendar.months.shahrivar"),s("persian_calendar.months.mehr"),s("persian_calendar.months.aban"),s("persian_calendar.months.azar"),s("persian_calendar.months.dey"),s("persian_calendar.months.bahman"),s("persian_calendar.months.esfand")],E=[s("persian_calendar.weekdays.shanbe"),s("persian_calendar.weekdays.yekshanbe"),s("persian_calendar.weekdays.doshanbe"),s("persian_calendar.weekdays.seshanbe"),s("persian_calendar.weekdays.chaharshanbe"),s("persian_calendar.weekdays.panjshanbe"),s("persian_calendar.weekdays.jome")];r.useEffect(()=>{if(c){const e=i(c,"jYYYY/jMM/jDD");e.isValid()&&(k(e),h(e.format("jYYYY/jMM/jDD")))}},[c]),r.useEffect(()=>{const e=l=>{p.current&&!p.current.contains(l.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const w=e=>{k(e),h(e.format("jYYYY/jMM/jDD")),d(!1),g&&g(e.format("jYYYY/jMM/jDD"))},L=()=>{N(t.clone().subtract(1,"jMonth"))},I=()=>{N(t.clone().add(1,"jMonth"))},P=()=>{const e=t.clone().startOf("jMonth"),l=t.clone().endOf("jMonth"),u=[],V=e.day();for(let n=0;n<V;n++)u.push(null);for(let n=1;n<=l.jDate();n++){const B=t.clone().jDate(n);u.push(B)}return u},_=e=>e.isSame(i(),"day"),M=e=>v&&e.isSame(v,"day"),R=P();return a.jsxs("div",{ref:p,className:f("relative",O),children:[b&&a.jsxs(T,{htmlFor:y,className:"text-base font-medium flex items-center gap-2 text-gray-800 dark:text-gray-200 text-right",dir:"rtl",children:[C&&a.jsx("span",{className:"text-red-500",children:"*"}),b,a.jsx(D,{className:"h-4 w-4"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(F,{id:y,type:"text",value:S,onChange:e=>h(e.target.value),onFocus:()=>d(!0),placeholder:Y||s("persian_calendar.select_date"),disabled:x,className:f("h-12 border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-blue-500/20 bg-white dark:bg-gray-800 text-right",m&&"border-red-500 focus:border-red-500 focus:ring-red-500/20"),readOnly:!0}),a.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"absolute left-3 top-1/2 -translate-y-1/2 h-8 w-8 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>d(!j),disabled:x,children:a.jsx(D,{className:"h-4 w-4 text-gray-500"})})]}),m&&a.jsx("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right mt-2",children:m}),j&&a.jsxs("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:L,className:"h-8 w-8 p-0",children:a.jsx(q,{className:"h-4 w-4"})}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[z[t.jMonth()]," ",t.jYear()]})}),a.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:I,className:"h-8 w-8 p-0",children:a.jsx(A,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 p-2",children:E.map(e=>a.jsx("div",{className:"h-8 flex items-center justify-center text-sm font-medium text-gray-500 dark:text-gray-400",children:e},e))}),a.jsx("div",{className:"grid grid-cols-7 gap-1 p-2",children:R.map((e,l)=>a.jsx("div",{className:"h-8 flex items-center justify-center",children:e?a.jsx(o,{type:"button",variant:"ghost",size:"sm",className:f("h-8 w-8 p-0 text-sm",_(e)&&"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 font-semibold",M(e)&&"bg-blue-500 text-white hover:bg-blue-600",!_(e)&&!M(e)&&"hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>w(e),children:e.jDate()}):a.jsx("div",{className:"h-8 w-8"})},l))}),a.jsxs("div",{className:"flex justify-between p-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const e=i();w(e)},className:"text-sm",children:s("persian_calendar.today")}),a.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(!1),className:"text-sm",children:s("persian_calendar.close")})]})]})]})};export{ae as P};

import{m as E,j as e,L,$ as F}from"./app-wp6Guzzg.js";import{B as j}from"./button-DdhFDbBb.js";import{C as p,a as u,b as g,c as V,d as v,e as B}from"./card-DCX32ycO.js";import{I as c}from"./input-DOaZA_KP.js";import{L as n}from"./label-uuIrNZy3.js";import{T as R}from"./textarea-CW2xkV61.js";import{P as k}from"./page-header-DdK3B3eG.js";import{I as d}from"./input-error-I4jQTGZQ.js";import{S as o,a as m,b as h,c as x,d as l}from"./select-tzjXi50L.js";import{S as A}from"./separator-BEpq0n0X.js";import{A as P}from"./arrow-left-DJBr152w.js";import{S as $}from"./save-DvbBlXES.js";import"./utils-BoYQRibn.js";import"./index-kSuzMWFK.js";import"./index-XAn5yQ2E.js";import"./index-DtlMaX7Z.js";import"./index-BW6aKdAO.js";import"./createLucideIcon-WLF4tROH.js";import"./index-BJlsjxrB.js";import"./check-bJLwwkQ5.js";function de({incident:i,districts:I,categories:b,reports:T}){var _,y,N,C,S;const{data:t,setData:a,put:q,processing:w,errors:r}=E({title:i.title||"",description:i.description||"",incident_date:i.incident_date||new Date().toISOString().split("T")[0],incident_time:i.incident_time||"",district_id:((_=i.district_id)==null?void 0:_.toString())||"",incident_category_id:((y=i.incident_category_id)==null?void 0:y.toString())||"",incident_report_id:((N=i.incident_report_id)==null?void 0:N.toString())||"none",location:i.location||"",coordinates:i.coordinates||"",casualties:((C=i.casualties)==null?void 0:C.toString())||"0",injuries:((S=i.injuries)==null?void 0:S.toString())||"0",incident_type:i.incident_type||"",status:i.status||"reported"}),D=s=>{s.preventDefault(),t.incident_report_id==="none"&&a("incident_report_id",""),q(route("incidents.update",i.id))};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:`Edit Incident - ${i.title}`}),e.jsx(k,{title:"Edit Incident",description:"incident.label",actions:e.jsx(j,{variant:"outline",asChild:!0,children:e.jsxs(F,{href:route("incidents.show",i.id),children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back to Incident"]})})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs(p,{children:[e.jsxs(u,{children:[e.jsx(g,{children:"Basic Information"}),e.jsx(V,{children:"Update the incident's basic details"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"title",children:["Title ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"title",value:t.title,onChange:s=>a("title",s.target.value),placeholder:"Enter incident title",required:!0}),e.jsx(d,{message:r.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"incident_type",children:["Incident Type ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"incident_type",value:t.incident_type,onChange:s=>a("incident_type",s.target.value),placeholder:"e.g. Theft, Security Breach, Violence",required:!0}),e.jsx(d,{message:r.incident_type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"description",children:["Description ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(R,{id:"description",value:t.description,onChange:s=>a("description",s.target.value),placeholder:"Provide a detailed description of the incident",rows:5,required:!0}),e.jsx(d,{message:r.description})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"incident_date",children:["Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"incident_date",type:"date",value:t.incident_date,onChange:s=>a("incident_date",s.target.value),required:!0}),e.jsx(d,{message:r.incident_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"incident_time",children:"Time"}),e.jsx(c,{id:"incident_time",type:"time",value:t.incident_time,onChange:s=>a("incident_time",s.target.value)}),e.jsx(d,{message:r.incident_time})]})]})]})]}),e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(g,{children:"Location & Classification"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"district_id",children:["District ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(o,{value:t.district_id,onValueChange:s=>a("district_id",s),required:!0,children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select a district"})}),e.jsx(x,{children:I.map(s=>{var f;return e.jsxs(l,{value:s.id.toString(),children:[s.name," (",(f=s.province)==null?void 0:f.name,")"]},s.id)})})]}),e.jsx(d,{message:r.district_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"incident_category_id",children:["Category ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(o,{value:t.incident_category_id,onValueChange:s=>a("incident_category_id",s),required:!0,children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select a category"})}),e.jsx(x,{children:b.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(d,{message:r.incident_category_id})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"location",children:"Specific Location"}),e.jsx(c,{id:"location",value:t.location,onChange:s=>a("location",s.target.value),placeholder:"e.g. Main Market, North Checkpoint"}),e.jsx(d,{message:r.location})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"coordinates",children:"Coordinates"}),e.jsx(c,{id:"coordinates",value:t.coordinates,onChange:s=>a("coordinates",s.target.value),placeholder:"e.g. 34.5553° N, 69.2075° E"}),e.jsx(d,{message:r.coordinates})]})]})]}),e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(g,{children:"Impact & Status"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"casualties",children:"Casualties"}),e.jsx(c,{id:"casualties",type:"number",min:"0",value:t.casualties,onChange:s=>a("casualties",s.target.value)}),e.jsx(d,{message:r.casualties})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"injuries",children:"Injuries"}),e.jsx(c,{id:"injuries",type:"number",min:"0",value:t.injuries,onChange:s=>a("injuries",s.target.value)}),e.jsx(d,{message:r.injuries})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"status",children:["Status ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(o,{value:t.status,onValueChange:s=>a("status",s),required:!0,children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select status"})}),e.jsxs(x,{children:[e.jsx(l,{value:"reported",children:"Reported"}),e.jsx(l,{value:"investigating",children:"Investigating"}),e.jsx(l,{value:"resolved",children:"Resolved"}),e.jsx(l,{value:"closed",children:"Closed"})]})]}),e.jsx(d,{message:r.status})]}),e.jsx(A,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"incident_report_id",children:"Assign to Report (Optional)"}),e.jsxs(o,{value:t.incident_report_id,onValueChange:s=>a("incident_report_id",s),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select a report (optional)"})}),e.jsxs(x,{children:[e.jsx(l,{value:"none",children:"None"}),T.map(s=>e.jsx(l,{value:s.id.toString(),children:s.report_number},s.id))]})]}),e.jsx(d,{message:r.incident_report_id})]})]}),e.jsxs(B,{className:"flex justify-end space-x-2",children:[e.jsx(j,{variant:"outline",asChild:!0,children:e.jsx(F,{href:route("incidents.show",i.id),children:"Cancel"})}),e.jsxs(j,{type:"submit",disabled:w,children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Update Incident"]})]})]})]})]})}export{de as default};

import{T as lt}from"./Root-KLg9UpOR.js";import{c as Jt,C as Kt,D as Ut,b as Qt,I as ei,N as ti,P as ii,R as si,a as ri}from"./Root-KLg9UpOR.js";import{M as ht,C as ut,e as K,o as ue,z as ct,f as P,i as dt,R as Ne,a as et,d as Ze,t as pt}from"./Theme-Dgo0XspA.js";import{A as ni,D as oi,W as li,T as hi,S as ui,U as ci,V as di}from"./Theme-Dgo0XspA.js";import{E as re,an as gt,d as pe,v as tt,_ as Re,ao as D,G as S,ad as ge,C as L,L as U,a9 as ft,m as fe,e as Q,p as j,c as it,P as ee,ap as st,X as rt,a4 as Oe,D as mt,ae as V,aa as I,ab as H,a6 as yt,aq as F,R as bt,ac as _t}from"./SerialChart-CAnqEg8j.js";import{B as gi,aA as fi,al as mi,ai as yi,N as bi,M as _i,aD as wi,az as vi,aC as xi,aB as Pi,a5 as Di,a2 as ki,T as Ci,V as Ti,av as Ni,aw as Ri,ar as Oi,ax as Si,as as Mi,aE as ji,A as Ai,ay as Li,O as Fi,at as Ei,au as Bi}from"./SerialChart-CAnqEg8j.js";import{B as Gi,C as zi}from"./Circle-DJKlttmY.js";import{R as te,B as wt}from"./Button-Dxks9qV6.js";import{Z as Ii,a as Hi}from"./ZoomTools-CCR8UINi.js";import{L as vt,G as at}from"./LinearGradient-B6IotMss.js";import{C as Xi,L as Yi,a as qi,T as Zi}from"./ColorSet-CCEFxBY6.js";import"./tslib.es6-CmEaCU22.js";let ce;function xt(c,e,t){const i=e.interfaceColors,s=i.get("secondaryButton").toCSS(),r=i.get("text").toCSS(),n=i.get("alternativeBackground").toCSS(.45);if(!ce){const a=new ht([new D(c,".am5-modal",{width:"100%",height:"100%",position:"absolute","z-index":"100000",top:"0",left:"0"},e.nonce),new D(c,".am5-modal-curtain",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute",background:i.get("background").toCSS(.5),"z-index":"100"},e.nonce),new D(c,".am5-modal-wrapper",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute","text-align":"center","white-space":"nowrap",background:i.get("background").toCSS(.5),"z-index":"101"},e.nonce),new D(c,".am5-modal-wrapper:before",{content:"''",display:"inline-block",height:"100%","vertical-align":"middle","margin-right":"-0.25em"},e.nonce),new D(c,".am5-modal-content",{display:"inline-block",padding:"1.2em","vertical-align":"middle","text-align":"start","white-space":"normal",background:i.get("background").toCSS(),"border-radius":"4px","-webkit-box-shadow":"0px 0px 36px 0px "+n,"box-shadow":"0px 0px 36px 0px "+n,color:r},e.nonce),new D(c,".am5-modal-content h1",{"font-size":"1em",margin:"0 0 0.5em 0"},e.nonce),new D(c,".am5-modal-table",{display:"table",margin:"1em 0"},e.nonce),new D(c,".am5-modal-table-row",{display:"table-row"},e.nonce),new D(c,".am5-modal-table-heading",{display:"table-heading",padding:"3px 10px 3px 0"},e.nonce),new D(c,".am5-modal-table-cell",{display:"table-cell",padding:"3px 0 3px 0"},e.nonce),new D(c,".am5-modal-table-cell > *",{"vertical-align":"middle"},e.nonce),new D(c,".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select",{border:"1px solid "+s,"border-radius":"4px",padding:"3px 5px",margin:"2px"},e.nonce),new D(c,".am5-modal-input-narrow",{width:"50px"},e.nonce),new D(c,".am5-modal-button",{"font-weight":"400",color:i.get("secondaryButtonText").toCSS(),"line-height":"1.5","text-align":"center","text-decoration":"none","vertical-align":"middle",cursor:"pointer",padding:"0.2em 0.8em","font-size":"1em","border-radius":"0.25em",margin:"0 0.25em 0 0",border:"1px solid "+i.get("secondaryButtonStroke").toCSS(),background:i.get("secondaryButton").toCSS()},e.nonce),new D(c,".am5-modal-button:hover",{background:i.get("secondaryButtonHover").toCSS()},e.nonce),new D(c,".am5-modal-button.am5-modal-primary",{color:i.get("primaryButtonText").toCSS(),border:"1px solid "+i.get("primaryButtonStroke").toCSS(),background:i.get("primaryButton").toCSS()},e.nonce),new D(c,".am5-modal-button.am5-modal-primary:hover",{background:i.get("primaryButtonHover").toCSS()},e.nonce)]);ce=new ut(()=>{ce=void 0,a.dispose()})}return ce.increment()}class Se extends re{_afterNew(){super._afterNewApplyThemes(),this._setRawDefault("deactivateRoot",!0),xt(gt(this._root.dom),this._root);const e=document.createElement("div");e.className="am5-modal",e.style.display="none",this.root._inner.appendChild(e),this.setPrivate("container",e);const t=document.createElement("div");t.className="am5-modal-curtain",e.appendChild(t),this.setPrivate("curtain",t),this._disposers.push(pe(t,"click",()=>{this.cancel()}));const i=document.createElement("div");i.className="am5-modal-wrapper",e.appendChild(i),this.setPrivate("wrapper",i);const s=document.createElement("div");s.className="am5-modal-content",i.appendChild(s),this.setPrivate("content",s);const r=this.get("content");r&&(s.innerHTML=r),tt("keyboardevents")&&this._disposers.push(pe(document,"keydown",n=>{this.isOpen()&&Re(n)=="Escape"&&this.cancel()}))}_beforeChanged(){super._beforeChanged(),this.isDirty("content")&&(this.getPrivate("content").innerHTML=this.get("content",""))}isOpen(){return this.getPrivate("container").style.display!="none"}open(){this.getPrivate("container").style.display="block",this.get("deactivateRoot")&&this.setTimeout(()=>{this._root._renderer.interactionsEnabled=!1},10),this.events.dispatch("opened",{type:"opened",target:this})}close(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("closed",{type:"closed",target:this})}cancel(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("cancelled",{type:"cancelled",target:this})}_dispose(){super._dispose();const e=this.getPrivate("container");e.parentElement&&e.parentElement.removeChild(e)}}Object.defineProperty(Se,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Modal"});Object.defineProperty(Se,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:re.classNames.concat([Se.className])});class Me extends S{constructor(){super(...arguments),Object.defineProperty(this,"morphAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){if(super._beforeChanged(),this.isDirty("coordinates")){const e=[],t=this.get("coordinates");t&&K(t,i=>{e.push({x:i[0],y:i[1]})}),this.set("points",e)}if(this.isPrivateDirty("points")&&(this._clear=!0),this.isDirty("points")){this._clear=!0;const e=this.get("points"),t=this._prevSettings.points;if(t){if(e){let a=ue(e),h=ue(t),l=a.length,o=h.length;if(l>o){let d=ue(a);for(let u=0;u<l;u++){let p=Math.floor(u/l*o);d[u]={x:h[p].x,y:h[p].y}}h=d}else if(o>l){let d=ue(h);for(let u=0;u<o;u++){let p=Math.floor(u/o*l);d[u]={x:a[p].x,y:a[p].y}}a=d}this.setPrivateRaw("previousPoints",h),this.setPrivateRaw("points",a),this.morphAnimation=this.animatePrivate({key:"morphProgress",from:0,to:1,duration:this.get("animationDuration",0),easing:this.get("animationEasing")}),this._root.events.once("frameended",()=>{this._markDirtyPrivateKey("morphProgress")})}}else this.setPrivateRaw("previousPoints",e),this.setPrivateRaw("points",e);let i=1/0,s=-1/0,r=1/0,n=-1/0;if(e)for(let a=1,h=e.length;a<h;a++){const l=e[a];i=Math.min(i,l.x),s=Math.max(s,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}this.setPrivate("minX",i),this.setPrivate("maxX",s),this.setPrivate("minY",r),this.setPrivate("maxY",r)}this.isPrivateDirty("morphProgress")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._draw()}_draw(){const e=this.getPrivate("previousPoints"),t=this.getPrivate("points"),i=this.getPrivate("morphProgress",1);if(t&&e){const s=t[0],r=e[0];s&&this._display.moveTo(r.x+(s.x-r.x)*i,r.y+(s.y-r.y)*i);for(let n=1,a=t.length;n<a;n++){const h=t[n],l=e[n];this._display.lineTo(l.x+(h.x-l.x)*i,l.y+(h.y-l.y)*i)}this._display.closePath()}}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(Me,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Polygon"});Object.defineProperty(Me,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([Me.className])});class je extends S{_beforeChanged(){super._beforeChanged(),(this.isDirty("radiusX")||this.isDirty("radiusY")||this.isDirty("rotation"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawEllipse(0,0,Math.abs(this.get("radiusX")),Math.abs(this.get("radiusY")))}}Object.defineProperty(je,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Ellipse"});Object.defineProperty(je,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([je.className])});class Ae extends S{_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("spikes"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this._display,t=this.get("radius",0),i=ge(this.get("innerRadius",0),t),s=this.get("spikes",0),r=Math.PI/s;let n=Math.PI/2*3;e.moveTo(0,-t);for(let a=0;a<s;a++)e.lineTo(Math.cos(n)*t,Math.sin(n)*t),n+=r,e.lineTo(Math.cos(n)*i,Math.sin(n)*i),n+=r;e.lineTo(0,-t),e.closePath()}}}Object.defineProperty(Ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Star"});Object.defineProperty(Ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([Ae.className])});class Le extends L{constructor(){super(...arguments),Object.defineProperty(this,"labelContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(L.new(this._root,{}))}),Object.defineProperty(this,"markerContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(L.new(this._root,{}))}),Object.defineProperty(this,"startLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(U.new(this._root,{themeTags:["start"]}))}),Object.defineProperty(this,"endLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(U.new(this._root,{themeTags:["end"]}))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new ft(ct.new({}),()=>te._new(this._root,{themeTags:fe(this.markers.template.get("themeTags",[]),[this.get("orientation"),"heatlegend","marker"])},[this.markers.template])))})}_afterNew(){this._settings.themeTags=fe(this._settings.themeTags,["heatlegend",this._settings.orientation]),super._afterNew(),this.set("tooltip",lt.new(this._root,{themeTags:["heatlegend"]}))}makeMarker(){const e=this.markers.make();return e.states.create("disabled",{}),e}showValue(e,t,i){const s=this.getTooltip();if(s&&P(e)){const r=this.get("startValue",0),n=this.get("endValue",1);let a=(e-r)/(n-r);(a==1/0||a==-1/0||isNaN(a))&&(a=.5);const h=this.get("startColor"),l=this.get("endColor");t||(t=this.getNumberFormatter().format(e)),i||(i=Q.interpolate(a,h,l)),s.label.set("text",t);let o;this.get("orientation")=="vertical"?o=this.markerContainer.toGlobal({x:0,y:this.innerHeight()*(1-a)}):o=this.markerContainer.toGlobal({x:this.innerWidth()*a,y:0});let d=s.get("background");d&&d.set("fill",i),s.set("pointTo",o),s.show()}}_prepareChildren(){super._prepareChildren();const e=this.labelContainer,t=this.get("orientation"),i=this.startLabel,s=this.endLabel,r=this.getTooltip();if(this.isDirty("orientation")&&(t=="vertical"?(this.markerContainer.setAll({layout:this._root.verticalLayout,height:j}),this.set("layout",this._root.horizontalLayout),i.setAll({y:j,x:void 0,centerY:j,centerX:j}),s.setAll({y:0,x:void 0,centerY:0,centerX:j}),e.setAll({height:j,width:void 0}),r&&r.set("pointerOrientation","horizontal")):(this.markerContainer.setAll({layout:this._root.horizontalLayout,width:j}),this.set("layout",this._root.verticalLayout),i.setAll({x:0,y:void 0,centerX:0,centerY:0}),s.setAll({x:j,y:void 0,centerX:j,centerY:0}),e.setAll({width:j,height:void 0}),r&&r.set("pointerOrientation","vertical"))),this.isDirty("stepCount")){const n=this.get("stepCount",1),a=this.get("startColor"),h=this.get("endColor");if(this.markerContainer.children.clear(),n>1)for(let l=0;l<n;l++){const o=this.makeMarker();t=="vertical"?this.markerContainer.children.moveValue(o,0):this.markerContainer.children.push(o),a&&h&&o.set("fill",Q.interpolate(l/n,a,h))}else if(n==1){const l=this.makeMarker();this.markerContainer.children.push(l);const o=vt.new(this._root,{stops:[{color:a},{color:h}]});if(t=="vertical"){o.set("rotation",90);let d=o.get("stops");d&&d.reverse()}else o.set("rotation",0);a&&h&&l.set("fillGradient",o)}}(this.isDirty("startText")||this.isDirty("startValue"))&&i.set("text",this.get("startText",this.getNumberFormatter().format(this.get("startValue",0)))),(this.isDirty("endText")||this.isDirty("endValue"))&&s.set("text",this.get("endText",this.getNumberFormatter().format(this.get("endValue",1))))}}Object.defineProperty(Le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HeatLegend"});Object.defineProperty(Le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([Le.className])});class Fe extends U{_afterNew(){super._afterNew();const e=this.children.push(L.new(this._root,{html:'<textarea class="am5-editable-label"></textarea>',isMeasured:!1}));e.hide();const t=this.get("editOn","click");t!="none"&&(e.events.on(t,s=>{}),this.events.on(t,s=>{this.set("active",!0)})),this.setPrivate("input",e);let i=this.get("background");i?i.set("themeTags",["editablelabel","background"]):i=this.set("background",te.new(this._root,{themeTags:["editablelabel","background"]}))}_prepareChildren(){super._prepareChildren(),this._maybeInitTextarea()}_updateChildren(){if(super._updateChildren(),this.isDirty("active")){const e=this.get("active",!1);e?this._startEditing():this._stopEditing();const t=this.get("background");t&&t.set("active",e)}this._syncText(),this._syncStyle()}_maybeInitTextarea(){if(!this._isInited()){const e=this.getPrivate("input");if(e&&e.getPrivate("htmlElement")){const i=e.getPrivate("htmlElement").querySelector(".am5-editable-label");i&&(this.setPrivate("textarea",i),i.addEventListener("input",s=>{this.get("multiLine")===!1&&(i.value=i.value.replace(/\n/g," ")),this.set("text",i.value),this._syncStyle()}),i.addEventListener("blur",s=>this.set("active",!1)),tt("keyboardevents")&&this._disposers.push(pe(document,"keydown",s=>{Re(s)=="Escape"&&this.set("active",!1)})),this._disposers.push(pe(document,"keydown",s=>{Re(s)=="Enter"&&this.get("multiLine")===!1&&(s.preventDefault(),this.set("active",!1))})),this.events.dispatch("inited",{type:"inited",target:this}))}}}_isInited(){return!!this.getPrivate("textarea")}_startEditing(){if(!this._isInited()){this.events.once("inited",()=>{this._startEditing()});return}this._text.set("opacity",0);const e=this.getPrivate("input"),t=this.getPrivate("textarea");t&&(this.get("text","")==""&&this.set("text"," "),e.show(0),this.setTimeout(()=>{this._syncStyle(),t.focus()},100))}_stopEditing(){if(!this._isInited()){this.events.once("inited",()=>{this._stopEditing()});return}const e=this.getPrivate("input"),t=this.getPrivate("textarea");t&&(this.set("text",t.value),e.hide(0),this._text.set("opacity",1))}_syncStyle(){const e=this.getPrivate("input"),t=this.getPrivate("textarea");if(t){const i=e.getPrivate("htmlElement"),s=window.getComputedStyle(t);K(s,u=>{t.style[u]="initial"}),t.style.color=this.get("fill",it(0)).toCSS(this.get("fillOpacity",1)),t.style.backgroundColor="rgba(0, 0, 0, 0)",t.style.border="none",t.style.outline="none",t.style.padding="0",t.wrap="off",t.style.resize="none",t.style.overflow="hidden";const r=this.get("maxWidth",0)-this.get("paddingLeft",0)-this.get("paddingRight",0);r>0?t.style.maxWidth=r+"px":t.style.minWidth="",t.style.height="auto",t.style.minHeight=t.scrollHeight+"px",this.get("width")&&(t.style.width=this.width()-this.get("paddingLeft",0)-this.get("paddingRight",0)+"px",t.style.minWidth="");const n=this.get("lineHeight");n?n instanceof ee?t.style.lineHeight=n.value+"":P(n)&&(t.style.lineHeight=n+""):t.style.lineHeight="1.2";let a=this.get("fontFamily");a||(a=getComputedStyle(e.getPrivate("htmlElement"),"font-family").getPropertyValue("font-family")),t.style.fontFamily=a;let h=this.get("fontSize");h?P(h)?h=h+"px":h=h:h=getComputedStyle(e.getPrivate("htmlElement"),"font-size").getPropertyValue("font-size"),t.style.fontSize=h;let l=this.get("fontWeight");l?l=l:l=getComputedStyle(e.getPrivate("htmlElement"),"font-weight").getPropertyValue("font-weight"),t.style.fontWeight=l;let o=this.get("fontStyle");o?o=o:o=getComputedStyle(e.getPrivate("htmlElement"),"font-style").getPropertyValue("font-style"),t.style.fontStyle=o,this.get("oversizedBehavior")=="wrap"?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="nowrap",this._root.events.on("frameended",()=>{t.style.minWidth==""&&(t.style.minWidth=t.scrollWidth+20+"px");const u=this.get("textAlign","start");u=="center"?(t.style.textAlign="center",!i.style.transform.match(/translateX/)&&!this.get("width")&&(i.style.transform+=" translateX(-50%)")):u=="end"?(t.style.textAlign="right",!i.style.transform.match(/translateX/)&&!this.get("width")&&(i.style.transform+=" translateX(-100%)")):t.style.textAlign=u})}}_syncText(){const e=this.getPrivate("textarea");let t=this.get("text","");t==" "&&(t=""),e&&(e.value=t)}}Object.defineProperty(Fe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"EditableLabel"});Object.defineProperty(Fe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:U.classNames.concat([Fe.className])});class Ee extends st{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makePicture(void 0)})}_changed(){if(super._changed(),this.isDirty("width")){const e=this.get("width");this._display.width=P(e)?e:void 0}if(this.isDirty("height")){const e=this.get("height");this._display.height=P(e)?e:void 0}if(this.isDirty("shadowColor")){this._display.clear();const e=this.get("shadowColor");this._display.shadowColor=e??void 0}this.isDirty("shadowBlur")&&(this._display.clear(),this._display.shadowBlur=this.get("shadowBlur")),this.isDirty("shadowOffsetX")&&(this._display.clear(),this._display.shadowOffsetX=this.get("shadowOffsetX")),this.isDirty("shadowOffsetY")&&(this._display.clear(),this._display.shadowOffsetY=this.get("shadowOffsetY")),this.isDirty("shadowOpacity")&&(this._display.clear(),this._display.shadowOpacity=this.get("shadowOpacity")),(this.isDirty("src")||this.isDirty("cors"))&&(this._display.clear(),this._load())}_load(){const e=this.get("src");if(e){const t=new Image;t.crossOrigin=this.get("cors","anonymous"),t.src=e;const i=this.events;t.decode().then(()=>{this._display.image=t,this._updateSize(),!i.isDisposed()&&i.isEnabled("loaded")&&i.dispatch("loaded",{type:"loaded",target:this})}).catch(s=>{!i.isDisposed()&&i.isEnabled("loaderror")&&i.dispatch("loaderror",{type:"loaderror",target:this})})}}_updateSize(){super._updateSize();const e=this._display.image;if(e){let t=this.getPrivate("width",this.get("width")),i=this.getPrivate("height",this.get("height"));const s=e.width&&e.height?e.width/e.height:0;P(t)&&P(i)?(this._display.width=t,this._display.height=i):P(t)&&s?i=t/s:P(i)&&s?t=i*s:(t=e.width,i=e.height),P(t)&&(this._display.width=t),P(i)&&(this._display.height=i),this.markDirtyBounds(),this.markDirty()}}}Object.defineProperty(Ee,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Picture"});Object.defineProperty(Ee,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:st.classNames.concat([Ee.className])});class me extends rt{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*Oe,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(me,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"});Object.defineProperty(me,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:rt.classNames.concat([me.className])});class Be extends U{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(me.new(this._root,{}))}baseRadius(){const e=this.getPrivate("radius",0),t=this.getPrivate("innerRadius",0),i=this.get("baseRadius",0);return t+ge(i,e-t)}radius(){const e=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const e=this.get("textType","adjusted"),t=this.get("inside",!1),i=this.get("orientation");let s=mt(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",t);const r=H(s),n=I(s);let a=this.baseRadius(),h=this.radius();if(this._display.angle=0,e=="circular")this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw("x",void 0),this.setRaw("y",void 0),this._text.set("orientation",i),this._text.set("radius",h);else{a==0&&(s=0,h=0);let l=h*n,o=h*r;e=="radial"?(this.setRaw("x",l),this.setRaw("y",o),s<90||s>270||i!="auto"?(this._display.angle=s,this._flipped=!1):(this._display.angle=s+180,this._flipped=!0),this._dirty.rotation=!1):e=="adjusted"?(this.setRaw("centerX",V),this.setRaw("centerY",V),this.setRaw("x",l),this.setRaw("y",o)):e=="regular"&&(this.setRaw("x",l),this.setRaw("y",o))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const e=this.get("textType","regular"),t=this.get("inside",!1);let i=0,s=0,r=this.get("labelAngle",0),n=this.localBounds(),a=n.right-n.left,h=n.bottom-n.top;if(e=="radial"){if(this._flipped){let l=this.get("centerX");l instanceof ee&&(a=a*(1-l.value*2)),i=a*I(r),s=a*H(r)}}else!t&&e=="adjusted"&&(i=a/2*I(r),s=h/2*H(r));this.setRaw("dx",i),this.setRaw("dy",s),super._updatePosition()}get text(){return this._text}}Object.defineProperty(Be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"});Object.defineProperty(Be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:U.classNames.concat([Be.className])});class $e extends S{_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){const e=this.width(),t=this.height(),i=this._display;i.moveTo(-e/2,t/2),i.lineTo(0,-t/2),i.lineTo(e/2,t/2),i.lineTo(-e/2,t/2),i.closePath()}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty($e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Triangle"});Object.defineProperty($e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([$e.className])});class ie extends L{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:this._makeThumb()}),Object.defineProperty(this,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_addOrientationClass(){this._settings.themeTags=fe(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=te.new(this._root,{themeTags:fe(this._settings.themeTags,["main","background"])}))}_makeButton(){return this.children.push(wt.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:S.new(this._root,{themeTags:["icon"]})}))}_makeThumb(){return this.children.push(te.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}_handleAnimation(e){e&&this._disposers.push(e.events.on("stopped",()=>{this.setPrivateRaw("isBusy",!1),this._thumbBusy=!1}))}_afterNew(){this._addOrientationClass(),super._afterNew();const e=this.startGrip,t=this.endGrip,i=this.thumb,s=this.get("background");s&&this._disposers.push(s.events.on("click",r=>{this.setPrivateRaw("isBusy",!0);const n=this._display.toLocal(r.point),a=this.width(),h=this.height(),l=this.get("orientation");let o;l=="vertical"?o=(n.y-i.height()/2)/h:o=(n.x-i.width()/2)/a;let d,u;l=="vertical"?(d=o*h,u="y"):(d=o*a,u="x");const p=this.get("animationDuration",0);p>0?(this._thumbBusy=!0,this._handleAnimation(this.thumb.animate({key:u,to:d,duration:p,easing:this.get("animationEasing")}))):(this.thumb.set(u,d),this._root.events.once("frameended",()=>{this.setPrivateRaw("isBusy",!1)}))})),this._disposers.push(i.events.on("dblclick",r=>{if(!yt(r.originalEvent,this))return;const n=this.get("animationDuration",0),a=this.get("animationEasing");this.animate({key:"start",to:0,duration:n,easing:a}),this.animate({key:"end",to:1,duration:n,easing:a})})),this._disposers.push(e.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._startDown=!0,this._gripDown="start"})),this._disposers.push(t.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._endDown=!0,this._gripDown="end"})),this._disposers.push(i.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._thumbDown=!0,this._gripDown=void 0})),this._disposers.push(e.events.on("globalpointerup",()=>{this._startDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._startDown=!1})),this._disposers.push(t.events.on("globalpointerup",()=>{this._endDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._endDown=!1})),this._disposers.push(i.events.on("globalpointerup",()=>{this._thumbDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._thumbDown=!1})),this._disposers.push(e.on("x",()=>{this._updateThumb()})),this._disposers.push(t.on("x",()=>{this._updateThumb()})),this._disposers.push(e.on("y",()=>{this._updateThumb()})),this._disposers.push(t.on("y",()=>{this._updateThumb()})),this._disposers.push(i.events.on("positionchanged",()=>{this._updateGripsByThumb()})),this.get("orientation")=="vertical"?(e.set("x",0),t.set("x",0),this._disposers.push(i.adapters.add("y",r=>Math.max(Math.min(Number(r),this.height()-i.height()),0))),this._disposers.push(i.adapters.add("x",r=>this.width()/2)),this._disposers.push(e.adapters.add("x",r=>this.width()/2)),this._disposers.push(t.adapters.add("x",r=>this.width()/2)),this._disposers.push(e.adapters.add("y",r=>Math.max(Math.min(Number(r),this.height()),0))),this._disposers.push(t.adapters.add("y",r=>Math.max(Math.min(Number(r),this.height()),0)))):(e.set("y",0),t.set("y",0),this._disposers.push(i.adapters.add("x",r=>Math.max(Math.min(Number(r),this.width()-i.width()),0))),this._disposers.push(i.adapters.add("y",r=>this.height()/2)),this._disposers.push(e.adapters.add("y",r=>this.height()/2)),this._disposers.push(t.adapters.add("y",r=>this.height()/2)),this._disposers.push(e.adapters.add("x",r=>Math.max(Math.min(Number(r),this.width()),0))),this._disposers.push(t.adapters.add("x",r=>Math.max(Math.min(Number(r),this.width()),0))))}_updateChildren(){super._updateChildren(),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}_changed(){if(super._changed(),this.isDirty("start")||this.isDirty("end")){const e="rangechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}_released(){const e="released";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}updateGrips(){const e=this.startGrip,t=this.endGrip,i=this.get("orientation"),s=this.height(),r=this.width();i=="vertical"?(e.set("y",s*this.get("start",0)),t.set("y",s*this.get("end",1))):(e.set("x",r*this.get("start",0)),t.set("x",r*this.get("end",1)));const n=this.getPrivate("positionTextFunction"),a=Math.round(this.get("start",0)*100),h=Math.round(this.get("end",0)*100);let l,o;n?(l=n.call(this,this.get("start",0)),o=n.call(this,this.get("end",0))):(l=a+"%",o=h+"%"),e.set("ariaLabel",this._t("From %1",void 0,l)),e.set("ariaValueNow",""+a),e.set("ariaValueText",a+"%"),e.set("ariaValueMin","0"),e.set("ariaValueMax","100"),t.set("ariaLabel",this._t("To %1",void 0,o)),t.set("ariaValueNow",""+h),t.set("ariaValueText",h+"%"),t.set("ariaValueMin","0"),t.set("ariaValueMax","100")}_updateThumb(){const e=this.thumb,t=this.startGrip,i=this.endGrip,s=this.height(),r=this.width();let n=t.x(),a=i.x(),h=t.y(),l=i.y(),o=0,d=1;this.get("orientation")=="vertical"?P(h)&&P(l)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("height",l-h),e.set("y",h)),o=h/s,d=l/s):P(n)&&P(a)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("width",a-n),e.set("x",n)),o=n/r,d=a/r),this.getPrivate("isBusy")&&(this.get("start")!=o||this.get("end")!=d)&&(this.set("start",o),this.set("end",d));const u=this.getPrivate("positionTextFunction"),p=Math.round(this.get("start",0)*100),m=Math.round(this.get("end",0)*100);let y,_;u?(y=u.call(this,this.get("start",0)),_=u.call(this,this.get("end",0))):(y=p+"%",_=m+"%"),e.set("ariaLabel",this._t("From %1 to %2",void 0,y,_)),e.set("ariaValueNow",""+p),e.set("ariaValueText",p+"%")}_updateGripsByThumb(){const e=this.thumb,t=this.startGrip,i=this.endGrip;if(this.get("orientation")=="vertical"){const s=e.height();t.set("y",e.y()),i.set("y",e.y()+s)}else{const s=e.width();t.set("x",e.x()),i.set("x",e.x()+s)}}}Object.defineProperty(ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"});Object.defineProperty(ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([ie.className])});class Ge extends ie{_afterNew(){this._addOrientationClass(),super._afterNew(),this.endGrip.setPrivate("visible",!1),this.thumb.setPrivate("visible",!1)}updateGrips(){super.updateGrips();const e=this.startGrip;this.endGrip.setAll({x:e.x(),y:e.y()}),this.setRaw("end",this.get("start"))}}Object.defineProperty(Ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slider"});Object.defineProperty(Ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([Ge.className])});function z(c){return function(){return c}}const Ue=Math.abs,C=Math.atan2,X=Math.cos,Pt=Math.max,Te=Math.min,A=Math.sin,J=Math.sqrt,T=1e-12,se=Math.PI,ye=se/2,Dt=2*se;function kt(c){return c>1?0:c<-1?se:Math.acos(c)}function Qe(c){return c>=1?ye:c<=-1?-ye:Math.asin(c)}const ze=Math.PI,Ve=2*ze,Y=1e-6,Ct=Ve-Y;function nt(c){this._+=c[0];for(let e=1,t=c.length;e<t;++e)this._+=arguments[e]+c[e]}function Tt(c){let e=Math.floor(c);if(!(e>=0))throw new Error(`invalid digits: ${c}`);if(e>15)return nt;const t=10**e;return function(i){this._+=i[0];for(let s=1,r=i.length;s<r;++s)this._+=Math.round(arguments[s]*t)/t+i[s]}}class Nt{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?nt:Tt(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,s){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(e,t,i,s,r,n){this._append`C${+e},${+t},${+i},${+s},${this._x1=+r},${this._y1=+n}`}arcTo(e,t,i,s,r){if(e=+e,t=+t,i=+i,s=+s,r=+r,r<0)throw new Error(`negative radius: ${r}`);let n=this._x1,a=this._y1,h=i-e,l=s-t,o=n-e,d=a-t,u=o*o+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(u>Y)if(!(Math.abs(d*h-l*o)>Y)||!r)this._append`L${this._x1=e},${this._y1=t}`;else{let p=i-n,m=s-a,y=h*h+l*l,_=p*p+m*m,g=Math.sqrt(y),x=Math.sqrt(u),v=r*Math.tan((ze-Math.acos((y+u-_)/(2*g*x)))/2),w=v/x,k=v/g;Math.abs(w-1)>Y&&this._append`L${e+w*o},${t+w*d}`,this._append`A${r},${r},0,0,${+(d*p>o*m)},${this._x1=e+k*h},${this._y1=t+k*l}`}}arc(e,t,i,s,r,n){if(e=+e,t=+t,i=+i,n=!!n,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(s),h=i*Math.sin(s),l=e+a,o=t+h,d=1^n,u=n?s-r:r-s;this._x1===null?this._append`M${l},${o}`:(Math.abs(this._x1-l)>Y||Math.abs(this._y1-o)>Y)&&this._append`L${l},${o}`,i&&(u<0&&(u=u%Ve+Ve),u>Ct?this._append`A${i},${i},0,1,${d},${e-a},${t-h}A${i},${i},0,1,${d},${this._x1=l},${this._y1=o}`:u>Y&&this._append`A${i},${i},0,${+(u>=ze)},${d},${this._x1=e+i*Math.cos(r)},${this._y1=t+i*Math.sin(r)}`)}rect(e,t,i,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function Rt(c){let e=3;return c.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return c},()=>new Nt(e)}function Ot(c){return c.innerRadius}function St(c){return c.outerRadius}function Mt(c){return c.startAngle}function jt(c){return c.endAngle}function At(c){return c&&c.padAngle}function Lt(c,e,t,i,s,r,n,a){var h=t-c,l=i-e,o=n-s,d=a-r,u=d*h-o*l;if(!(u*u<T))return u=(o*(e-r)-d*(c-s))/u,[c+u*h,e+u*l]}function de(c,e,t,i,s,r,n){var a=c-t,h=e-i,l=(n?r:-r)/J(a*a+h*h),o=l*h,d=-l*a,u=c+o,p=e+d,m=t+o,y=i+d,_=(u+m)/2,g=(p+y)/2,x=m-u,v=y-p,w=x*x+v*v,k=s-r,N=u*y-m*p,B=(v<0?-1:1)*J(Pt(0,k*k*w-N*N)),$=(N*v-x*B)/w,G=(-N*x-v*B)/w,M=(N*v+x*B)/w,R=(-N*x+v*B)/w,O=$-_,f=G-g,b=M-_,W=R-g;return O*O+f*f>b*b+W*W&&($=M,G=R),{cx:$,cy:G,x01:-o,y01:-d,x11:$*(s/k-1),y11:G*(s/k-1)}}function Ft(){var c=Ot,e=St,t=z(0),i=null,s=Mt,r=jt,n=At,a=null,h=Rt(l);function l(){var o,d,u=+c.apply(this,arguments),p=+e.apply(this,arguments),m=s.apply(this,arguments)-ye,y=r.apply(this,arguments)-ye,_=Ue(y-m),g=y>m;if(a||(a=o=h()),p<u&&(d=p,p=u,u=d),!(p>T))a.moveTo(0,0);else if(_>Dt-T)a.moveTo(p*X(m),p*A(m)),a.arc(0,0,p,m,y,!g),u>T&&(a.moveTo(u*X(y),u*A(y)),a.arc(0,0,u,y,m,g));else{var x=m,v=y,w=m,k=y,N=_,B=_,$=n.apply(this,arguments)/2,G=$>T&&(i?+i.apply(this,arguments):J(u*u+p*p)),M=Te(Ue(p-u)/2,+t.apply(this,arguments)),R=M,O=M,f,b;if(G>T){var W=Qe(G/u*A($)),ae=Qe(G/p*A($));(N-=W*2)>T?(W*=g?1:-1,w+=W,k-=W):(N=0,w=k=(m+y)/2),(B-=ae*2)>T?(ae*=g?1:-1,x+=ae,v-=ae):(B=0,x=v=(m+y)/2)}var q=p*X(x),Z=p*A(x),ne=u*X(k),oe=u*A(k);if(M>T){var le=p*X(v),he=p*A(v),ve=u*X(w),xe=u*A(w),E;if(_<se)if(E=Lt(q,Z,ve,xe,le,he,ne,oe)){var Pe=q-E[0],De=Z-E[1],ke=le-E[0],Ce=he-E[1],Je=1/A(kt((Pe*ke+De*Ce)/(J(Pe*Pe+De*De)*J(ke*ke+Ce*Ce)))/2),Ke=J(E[0]*E[0]+E[1]*E[1]);R=Te(M,(u-Ke)/(Je-1)),O=Te(M,(p-Ke)/(Je+1))}else R=O=0}B>T?O>T?(f=de(ve,xe,q,Z,p,O,g),b=de(le,he,ne,oe,p,O,g),a.moveTo(f.cx+f.x01,f.cy+f.y01),O<M?a.arc(f.cx,f.cy,O,C(f.y01,f.x01),C(b.y01,b.x01),!g):(a.arc(f.cx,f.cy,O,C(f.y01,f.x01),C(f.y11,f.x11),!g),a.arc(0,0,p,C(f.cy+f.y11,f.cx+f.x11),C(b.cy+b.y11,b.cx+b.x11),!g),a.arc(b.cx,b.cy,O,C(b.y11,b.x11),C(b.y01,b.x01),!g))):(a.moveTo(q,Z),a.arc(0,0,p,x,v,!g)):a.moveTo(q,Z),!(u>T)||!(N>T)?a.lineTo(ne,oe):R>T?(f=de(ne,oe,le,he,u,-R,g),b=de(q,Z,ve,xe,u,-R,g),a.lineTo(f.cx+f.x01,f.cy+f.y01),R<M?a.arc(f.cx,f.cy,R,C(f.y01,f.x01),C(b.y01,b.x01),!g):(a.arc(f.cx,f.cy,R,C(f.y01,f.x01),C(f.y11,f.x11),!g),a.arc(0,0,u,C(f.cy+f.y11,f.cx+f.x11),C(b.cy+b.y11,b.cx+b.x11),g),a.arc(b.cx,b.cy,R,C(b.y11,b.x11),C(b.y01,b.x01),!g))):a.arc(0,0,u,k,w,g)}if(a.closePath(),o)return a=null,o+""||null}return l.centroid=function(){var o=(+c.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+s.apply(this,arguments)+ +r.apply(this,arguments))/2-se/2;return[X(d)*o,A(d)*o]},l.innerRadius=function(o){return arguments.length?(c=typeof o=="function"?o:z(+o),l):c},l.outerRadius=function(o){return arguments.length?(e=typeof o=="function"?o:z(+o),l):e},l.cornerRadius=function(o){return arguments.length?(t=typeof o=="function"?o:z(+o),l):t},l.padRadius=function(o){return arguments.length?(i=o==null?null:typeof o=="function"?o:z(+o),l):i},l.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:z(+o),l):s},l.endAngle=function(o){return arguments.length?(r=typeof o=="function"?o:z(+o),l):r},l.padAngle=function(o){return arguments.length?(n=typeof o=="function"?o:z(+o),l):n},l.context=function(o){return arguments.length?(a=o??null,l):a},l}class Ie extends S{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:Ft()})}_getTooltipPoint(){let e=this.get("tooltipX"),t=this.get("tooltipY"),i=0,s=0;P(e)&&(i=e),P(t)&&(s=t);let r=this.get("radius",0),n=this.get("innerRadius",0),a=this.get("dRadius",0),h=this.get("dInnerRadius",0);return r+=a,n+=h,n<0&&(n=r+n),e instanceof ee&&(i=this.ix*(n+(r-n)*e.value)),t instanceof ee&&(s=this.iy*(n+(r-n)*t.value)),this.get("arc")>=360&&n==0&&(i=0,s=0),{x:i,y:s}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get("startAngle",0),t=this.get("arc",0);const i=this._generator;t<0&&(e=e+t,t=t*-1),t>.1&&i.cornerRadius(this.get("cornerRadius",0)),i.context(this._display);let s=this.get("radius",0),r=this.get("innerRadius",0),n=this.get("dRadius",0),a=this.get("dInnerRadius",0);s+=n,r+=a,r<0&&(r=s+r),i({innerRadius:r,outerRadius:s,startAngle:(e+90)*Oe,endAngle:(e+t+90)*Oe});let h=e+t/2;this.ix=I(h),this.iy=H(h);const l=this.get("shiftRadius",0);this.setRaw("dx",this.ix*l),this.setRaw("dy",this.iy*l),this.markDirtyPosition()}}}Object.defineProperty(Ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"});Object.defineProperty(Ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([Ie.className])});class He extends F{constructor(){super(...arguments),Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:this.canvas.getContext("2d")}),Object.defineProperty(this,"_clearGrain",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){this.canvas.width=this.get("width",200),this.canvas.height=this.get("height",200),(this.isDirty("size")||this.isDirty("density")||this.isDirty("minOpacity")||this.isDirty("maxOpacity")||this.isDirty("colors")||this.isDirty("horizontalGap")||this.isDirty("verticalGap"))&&(this._clearGrain=!0),super._beforeChanged()}_changed(){if(super._changed(),this._clearGrain){const e=this.get("width",200),t=this.get("height",200),i=this.context.getImageData(0,0,e,t),s=Math.max(1,this.get("size",1)),r=this.get("minOpacity",0),n=this.get("maxOpacity",.3),a=this.get("colors",[this.get("color",Q.fromHex(0))]),h=e/s,l=t/s,o=this.get("density",1),d=this.get("horizontalGap",0)+1,u=this.get("verticalGap",0)+1;for(let p=0;p<l;p++)if(!(u>0&&p/u!=Math.round(p/u)))for(let m=0;m<h;m++){const y=a[Math.floor(Math.random()*a.length)],_=(r+Math.random()*(n-r))*255,g=Math.random();d>0&&m/d!=Math.round(m/d)||g<o&&this._setRectData(m,p,s,e,i.data,y.r,y.g,y.b,_)}this.context.putImageData(i,0,0),this._pattern=this.context.createPattern(this.canvas,"repeat")}this._clearGrain=!1}_checkDirtyFill(){return!1}_setRectData(e,t,i,s,r,n,a,h,l){for(var o=e*i;o<e*i+i;o++)for(var d=t*i;d<t*i+i;d++){var u=(d*s+o)*4;r[u]=n,r[u+1]=a,r[u+2]=h,r[u+3]=l}}}Object.defineProperty(He,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GrainPattern"});Object.defineProperty(He,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.classNames.concat([He.className])});class We extends at{getFill(e){const t=this.getBounds(e);let i=0,s=0,r=t.left||0,n=t.right||0,a=t.top||0,h=t.bottom||0;const l=n-r,o=h-a;let d=e.get("radius");P(d)?(i=0,s=0):(d=Math.min(l,o)/2,i=l/2,s=o/2);let u=this.get("x"),p=this.get("y");u!=null&&(i=ge(u,l)),p!=null&&(s=ge(p,o));const m=this._root._renderer.createRadialGradient(i,s,0,i,s,d),y=this.get("stops");if(y){let _=0;K(y,g=>{let x=g.offset;P(x)||(x=_/(y.length-1));let v=g.opacity;P(v)||(v=1);let w=g.color;if(w){const k=g.lighten;k&&(w=Q.lighten(w,k));const N=g.brighten;N&&(w=Q.brighten(w,N)),m.addColorStop(x,"rgba("+w.r+","+w.g+","+w.b+","+v+")")}_++})}return m}}Object.defineProperty(We,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialGradient"});Object.defineProperty(We,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.classNames.concat([We.className])});class be extends F{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("checkered",!1),t=this.get("centered",!0),i=this.get("gap",0),s=this.get("rotation",0);let r=this.get("width",100),n=this.get("height",100),a=this.get("radius",3),h=a*2+i,l=a*2+i,o=Math.round(r/h),d=Math.round(n/l);h=r/o,l=n/d,s!=0&&(this._display.x=h*I(s),this._display.y=l*H(s));const u=this.get("color"),p=this.get("colorOpacity");(u||p)&&this._display.beginFill(u,p);for(let m=s==0?0:-d*2;m<d*2;m++)for(let y=s==0?0:-o*2;y<o*2;y++)if(!e||(m&1)!=1&&(y&1)!=1||(m&1)==1&&(y&1)==1){let _=y*h,g=m*l;t&&(_+=h+i/2,g+=l+i/2),this._display.drawCircle(_-a,g-a,a)}e?(r=r/2-i*2,n=n/2-i*2):(r-=i,n-=i),(u||p)&&this._display.endFill()}}Object.defineProperty(be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CirclePattern"});Object.defineProperty(be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.classNames.concat([be.className])});class _e extends F{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("width",100),t=this.get("height",100),i=this.get("gap",0),s=this.get("strokeWidth",1);if(!i)this._display.moveTo(0,0),this._display.lineTo(e,0);else{let a=i+s,h=t/a;for(let l=-h;l<h*2;l++){const o=Math.round(l*a-a/2)+.5;this._display.moveTo(-e,o),this._display.lineTo(e*2,o)}}this._display.lineStyle(s,this.get("color"),this.get("colorOpacity"));let r=this.get("strokeDasharray");P(r)&&(r<.5?r=[0]:r=[r]),this._display.setLineDash(r);const n=this.get("strokeDashoffset");n&&this._display.setLineDashOffset(n),this._display.endStroke()}}Object.defineProperty(_e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinePattern"});Object.defineProperty(_e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.classNames.concat([_e.className])});class we extends F{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("checkered",!1),t=this.get("centered",!0),i=this.get("gap",0),s=this.get("rotation",0);let r=this.get("width",100),n=this.get("height",100),a=this.get("maxWidth",5),h=this.get("maxHeight",5);const l=this._display;let o=a+i,d=h+i,u=Math.round(r/o),p=Math.round(n/d);o=r/u,d=n/p,s!=0&&(l.x=o/2*I(s),l.y=-d/2*H(s));for(let _=s==0?0:-p*2;_<p*2;_++)for(let g=s==0?0:-u*2;g<u*2;g++)if(!e||(_&1)!=1&&(g&1)!=1||(_&1)==1&&(g&1)==1){let x=g*o,v=_*d;t&&(x+=(o-a)/2,v+=(d-h)/2),l.drawRect(x,v,a,h)}e?(r=r/2-i*2,n=n/2-i*2):(r-=i,n-=i);const m=this.get("color"),y=this.get("colorOpacity");(m||y)&&(l.beginFill(m,y),l.endFill())}}Object.defineProperty(we,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RectanglePattern"});Object.defineProperty(we,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.classNames.concat([we.className])});class Xe extends F{_beforeChanged(){super._beforeChanged(),this.isDirty("svgPath")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("svgPath");e!=null&&this._display.svgPath(e);const t=this.get("color"),i=this.get("colorOpacity");(t||i)&&(this._display.beginFill(t,i),this._display.endFill())}}Object.defineProperty(Xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PathPattern"});Object.defineProperty(Xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.classNames.concat([Xe.className])});class Ye extends re{_afterNew(){if(super._afterNewApplyThemes(),this.get("patterns",[]).length===0){const e=this.get("color",this.root.interfaceColors.get("stroke"));this.set("patterns",[this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:1,color:e}),this.getRectanglePattern({width:10,height:10,rotation:0,maxWidth:4,maxHeight:4,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:1,gap:6,color:e}),this.getCirclePattern({width:11,height:11,radius:2,color:e}),this.getLinePattern({width:6,height:6,rotation:90,strokeWidth:1,color:e}),this.getRectanglePattern({width:14,height:14,rotation:45,gap:4,maxWidth:6,maxHeight:6,checkered:!0,color:e}),this.getLinePattern({width:6,height:6,rotation:0,strokeWidth:1,color:e}),this.getRectanglePattern({width:15,height:15,rotation:0,gap:5,maxWidth:5,maxHeight:5,checkered:!0,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:2,gap:3,strokeDasharray:[4,2],color:e}),this.getCirclePattern({width:20,height:20,radius:3,gap:4,checkered:!0,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:2,gap:3,strokeDasharray:[4,2],color:e}),this.getRectanglePattern({width:10,height:10,rotation:0,gap:1,maxWidth:9,maxHeight:9,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:2,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:2,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:0,strokeWidth:3,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:90,strokeWidth:3,gap:1,color:e})])}this._dirty.patterns=!1}_beforeChanged(){this.isDirty("patterns")&&this.reset()}getIndex(e){const t=this.get("patterns",[]);if(e<t.length&&t[e]!==null)return t[e];if(e>t.length-1){const i=e-Math.floor(e*(e/t.length));return t[i]}return t[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0))}getLinePattern(e){return _e.new(this.root,e)}getRectanglePattern(e){return we.new(this.root,e)}getCirclePattern(e){return be.new(this.root,e)}}Object.defineProperty(Ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PatternSet"});Object.defineProperty(Ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:re.classNames.concat([Ye.className])});class Ht{static parse(e,t){t=this._applyDefaults(t);try{if(dt(e)){let i=JSON.parse(e);return t.reverse&&Ne(i)&&i.reverse(),i}else{if(Ne(e)||et(e))return e;throw"Unable to parse JSON data"}}catch{return}}static _applyDefaults(e){const t={},i={reverse:!1};return e||(e={}),Ze(i,(s,r)=>{t[s]=e[s]||r}),t}}class Wt{static parse(e,t){t=this._applyDefaults(t);let i=this.CSVToArray(e,t.delimiter),s=[],r=[],n,a;for(a=0;a<t.skipRows;a++)i.shift();if(t.useColumnNames){r=i.shift();for(let l=0;l<r.length;l++)n=r[l]!=null?r[l].replace(/^\s+|\s+$/gm,""):"",n===""&&(n="col"+l),r[l]=n}let h;for(;h=t.reverse?i.pop():i.shift(),!!h;){if(t.skipEmpty&&h.length===1&&h[0]==="")continue;let l={};for(a=0;a<h.length;a++)n=r[a]===void 0?"col"+a:r[a],l[n]=h[a];s.push(l)}return s}static CSVToArray(e,t){t=t||",";let i=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),s=[[]],r=null;for(;r=i.exec(e),!!r;){let n=r[1];n.length&&n!==t&&s.push([]);let a;r[2]?a=r[2].replace(new RegExp('""',"g"),'"'):a=r[3],s[s.length-1].push(a)}return s}static _applyDefaults(e){const t={},i={delimiter:",",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1};return e||(e={}),Ze(i,(s,r)=>{t[s]=e[s]||r}),t}}class Xt extends re{constructor(){super(...arguments),Object.defineProperty(this,"_checkDates",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkNumbers",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkColors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkEmpty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkDeep",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this._checkFeatures(),this.on("dateFields",()=>this._checkFeatures()),this.on("dateFormat",()=>this._checkFeatures()),this.on("numericFields",()=>this._checkFeatures()),this.on("colorFields",()=>this._checkFeatures()),this.on("emptyAs",()=>this._checkFeatures())}_checkFeatures(){(this.isDirty("dateFields")||this.isDirty("dateFormat"))&&(this._checkDates=this.get("dateFields")&&this.get("dateFields").length>0),this.isDirty("numericFields")&&(this._checkNumbers=this.get("numericFields")&&this.get("numericFields").length>0),this.isDirty("colorFields")&&(this._checkColors=this.get("colorFields")&&this.get("colorFields").length>0),this.isDirty("emptyAs")&&(this._checkEmpty=this.get("emptyAs")!=null),this._checkDeepFeatures()}_checkDeepFeatures(){const e=[];K(["dateFields","numericFields","colorFields"],t=>{K(this.get(t,[]),i=>{const s=i.split(".");for(s.pop();s.length>0;)e.push(s.join(".")),s.pop()})}),this._checkDeep=e.length>0,this.setPrivate("deepFields",e)}processMany(e){Ne(e)&&(this._checkDates||this._checkNumbers||this._checkColors||this._checkEmpty)&&K(e,t=>{this.processRow(t)})}processRow(e,t=""){Ze(e,(i,s)=>{const r=t+i;this._checkEmpty&&(e[i]=this._maybeToEmpty(e[i])),this._checkNumbers&&(e[i]=this._maybeToNumber(r,e[i])),this._checkDates&&(e[i]=this._maybeToDate(r,e[i])),this._checkColors&&(e[i]=this._maybeToColor(r,e[i])),this._checkDeep&&this.getPrivate("deepFields",[]).indexOf(r)!==-1&&et(e[i])&&this.processRow(e[i],r+".")})}_maybeToNumber(e,t){return this.get("numericFields").indexOf(e)!==-1?pt(t):t}_maybeToDate(e,t){return this.get("dateFields").indexOf(e)!==-1?this._root.dateFormatter.parse(t,this.get("dateFormat","")).getTime():t}_maybeToEmpty(e){return(e==null||e=="")&&this.get("emptyAs")!=null?this.get("emptyAs"):e}_maybeToColor(e,t){return this.get("colorFields").indexOf(e)!==-1?Q.fromAny(t):t}}class qe extends L{constructor(){super(...arguments),Object.defineProperty(this,"rectangle",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(bt.new(this._root,{themeTags:["rectangle"],fillOpacity:0,fill:it(16777215)}))}),Object.defineProperty(this,"gripL",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("left")}),Object.defineProperty(this,"gripR",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("right")}),Object.defineProperty(this,"gripT",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("top")}),Object.defineProperty(this,"gripB",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("bottom")}),Object.defineProperty(this,"_is",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_iw",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_positionDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHover",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this.addTag("resizer"),this.set("visible",!1),this.gripL.events.on("dragged",e=>{this._resize(e.target,-1)}),this.gripR.events.on("dragged",e=>{this._resize(e.target,1)}),this.gripL.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripR.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripT.events.on("dragged",e=>{this._rotate(e,90)}),this.gripB.events.on("dragged",e=>{this._rotate(e,-90)}),this.gripT.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripB.events.on("dragstart",e=>{this._resizeStart(e.target)})}_resizeStart(e){const t=this.get("sprite");t&&(this._is=t.get("scale",1),this._ix=e.x(),this._iw=this.width()/2)}_resize(e,t){const i=this.get("sprite"),s=this.get("spriteTemplate");if(i){const r=Math.max(.01,this._is*(1+t*(e.x()-this._ix)/this._iw));s?s.set("scale",r):i.set("scale",r),i.states.lookup("default").set("scale",r),this._updatePositions()}}_rotate(e,t){const i=this.get("sprite"),s=this.get("spriteTemplate");if(i){const r=this.parent;if(r){const n=this.get("rotationStep",10);let a=Math.round((_t({x:this.x(),y:this.y()},r.toLocal(e.point))+t)/n)*n;s?s.set("rotation",a):i.set("rotation",a),i.states.lookup("default").set("rotation",a),this._updatePositions()}}}_createGrip(e){const t=this.children.push(L.new(this._root,{themeTags:["grip",e],setStateOnChildren:!0,draggable:!0}));return t.children.push(te.new(this._root,{themeTags:["outline"],centerX:V,centerY:V})),t.children.push(te.new(this._root,{centerX:V,centerY:V})),t}_updateChildren(){if(super._updateChildren(),this.isDirty("sprite")){const e=this.get("sprite");if(e){this.show(0),this.setPrivate("visible",!0),this._updatePositions();const t=e.parent;t&&t.children.moveValue(this,0),this._positionDP=e.events.on("positionchanged",()=>{this._updatePositions()}),this._positionDP=e.events.on("boundschanged",()=>{this._updatePositions()})}else this.hide(0),this.setPrivate("visible",!1),this._positionDP&&this._positionDP.dispose()}(this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation"))&&this._updatePositions()}_updatePositions(){const e=this.get("sprite");if(e){let t=e.localBounds(),i=e.get("scale",1),s=20,r=(t.right-t.left)*i+s,n=(t.bottom-t.top)*i+s,a=e.get("rotation",0);const h=this.rectangle;let l=e.get("centerX",V),o=e.get("centerY",V),d=0;l instanceof ee&&(d=l.value);let u=0;o instanceof ee&&(u=o.value),h.setAll({centerX:l,centerY:o,width:r,height:n}),this.setAll({x:e.x()+s*(d-.5)*I(a)-s*(u-.5)*H(a),y:e.y()+s*(u-.5)*I(a)+s*(d-.5)*H(a),width:r,height:n,rotation:a}),this.gripT.setAll({x:(.5-d)*r,y:-u*n}),this.gripB.setAll({x:(.5-d)*r,y:(1-u)*n}),this.gripL.setAll({x:-d*r,y:(.5-u)*n}),this.gripR.setAll({x:(1-d)*r,y:(.5-u)*n}),this.rectangle.setAll({width:r,height:n})}}}Object.defineProperty(qe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SpriteResizer"});Object.defineProperty(qe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([qe.className])});function Et(c,e,t){return new Promise((i,s)=>{let r=t!=null&&t.responseType=="blob",n=new XMLHttpRequest;if(n.onload=()=>{if(n.status===200){let a,h;if(r){h=n.response,ot(h).then(o=>{let d={xhr:n,error:!1,response:o,blob:h,type:n.getResponseHeader("Content-Type"),target:e};i(d)});return}else a=n.responseText||n.response;let l={xhr:n,error:!1,response:a,blob:h,type:n.getResponseHeader("Content-Type"),target:e};i(l)}else s({xhr:n,error:!0,type:n.getResponseHeader("Content-Type"),target:e})},n.onerror=()=>{s({xhr:n,error:!0,type:n.getResponseHeader("Content-Type"),target:e})},n.open("GET",c,!0),t&&t.withCredentials&&(n.withCredentials=!0),t!=null){if(t.requestHeaders!=null)for(let a=0;a<t.requestHeaders.length;a++){let h=t.requestHeaders[a];n.setRequestHeader(h.key,h.value)}t.responseType!=null&&(n.responseType=t.responseType)}n.send()})}function ot(c){return new Promise((e,t)=>{const i=new FileReader;i.onload=s=>{e(i.result)},i.onerror=s=>{t(s)},i.readAsText(c)})}const Yt=Object.freeze(Object.defineProperty({__proto__:null,load:Et,readBlob:ot},Symbol.toStringTag,{value:"Module"}));export{ni as ArrayDisposer,gi as BlendMode,Gi as Bullet,wt as Button,Wt as CSVParser,Jt as CanvasLayer,Kt as CanvasRenderer,fi as Chart,zi as Circle,be as CirclePattern,Q as Color,Xi as ColorSet,mi as Component,L as Container,ut as CounterDisposer,yi as DataItem,Xt as DataProcessor,Ut as DateFormatter,oi as Disposer,Qt as DurationFormatter,Fe as EditableLabel,je as Ellipse,re as Entity,at as Gradient,He as GrainPattern,S as Graphics,bi as GridLayout,Le as HeatLegend,_i as HorizontalLayout,ei as InterfaceColors,Ht as JSONParser,wi as JsonData,U as Label,vi as Layout,Yi as Legend,qi as Line,_e as LinePattern,vt as LinearGradient,xi as ListData,ft as ListTemplate,Se as Modal,ht as MultiDisposer,li as MutableValueDisposer,ti as NumberFormatter,Xe as PathPattern,F as Pattern,Ye as PatternSet,ee as Percent,Ee as Picture,Pi as PicturePattern,ii as PointedRectangle,Me as Polygon,We as RadialGradient,Be as RadialLabel,me as RadialText,bt as Rectangle,we as RectanglePattern,si as Root,te as RoundedRectangle,ie as Scrollbar,Di as SerialChart,ki as Series,Ie as Slice,Ge as Slider,st as Sprite,qe as SpriteResizer,Ae as Star,ct as Template,rt as Text,Ci as TextFormatter,hi as Theme,Zi as Tick,ri as Timezone,lt as Tooltip,$e as Triangle,Ti as VerticalLayout,Ii as ZoomTools,Hi as ZoomableContainer,Ni as addLicense,ui as array,it as color,Ri as disposeAllRootElements,Oi as ease,Si as getRootById,Mi as math,Yt as net,ci as object,ji as p0,j as p100,V as p50,Ai as percent,Li as ready,Fi as registry,Ei as time,di as type,Bi as utils};

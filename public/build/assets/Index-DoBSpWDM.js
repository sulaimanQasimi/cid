import{r as i,j as e,L,$ as g,S as f}from"./app-BpSUcJGn.js";import{A as M}from"./app-layout-Cci7W_wL.js";import{B as b}from"./button-D5HSAalX.js";import{H as w}from"./header-DKBq-HD0.js";import{S as Q}from"./SearchFilters-DKj_zaqz.js";import{T as V,a as q,b as v,c as m,d as G,e as d}from"./table-pV2y3nC4.js";import{B as J}from"./badge-DmtoVPqk.js";import{C as K,d as W}from"./card-DH7bpRIX.js";import{A as X,a as Y,b as ee,c as te,d as re,e as se,f as ae,g as oe}from"./alert-dialog-BfcA_FNG.js";import{u as ie}from"./translate-De6eSKXZ.js";import{u as le}from"./use-permissions-BBPkzBQo.js";import{C as ne,a as ce,b as de}from"./permission-guard-PRK_BxP5.js";import{P as pe}from"./pagination-BDwyhh7o.js";import{M as A}from"./map-pin-CgRg4Sos.js";import{T as me}from"./trending-up-C2gbP6K6.js";import{E as he}from"./eye-EegdPOj9.js";import{P as ue}from"./pencil-Ca986Y6G.js";import{T as xe}from"./trash-BuFXFCIr.js";import{T as ge}from"./triangle-alert-B3BvgGty.js";import"./utils-x2oEfXY4.js";import"./index-D_7o4Bq4.js";import"./createLucideIcon-Dazand73.js";import"./index-BAL59aVo.js";import"./index-BGe2Ej9s.js";import"./index-Dc7fd2uP.js";import"./x-DgxmVmP_.js";import"./index-B_ZArIVV.js";import"./avatar-CHvk5jYt.js";import"./file-text-CxW02Lyq.js";import"./users-y5BAq2Js.js";import"./tag-DBjzO3ec.js";import"./qr-code-D69zO1WT.js";import"./chart-column-BnoJN4YC.js";import"./building-B0gV305l.js";import"./database-DvJqsiWQ.js";import"./arrow-left-DYn3FwPw.js";import"./plus-DlxkW1Ht.js";import"./select-4eflkJXu.js";import"./index-BfhS0AQq.js";import"./check-C0q8vu5-.js";import"./input-Bf4x-eDe.js";import"./search-BwuiMKS9.js";import"./filter-x-DGh692b7.js";import"./arrow-up-down-DytAzyzV.js";const fe=[{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"},{value:"code:asc",label:"Code (A-Z)"},{value:"code:desc",label:"Code (Z-A)"},{value:"province:asc",label:"Province (A-Z)"},{value:"province:desc",label:"Province (Z-A)"},{value:"status:asc",label:"Status (A-Z)"},{value:"status:desc",label:"Status (Z-A)"},{value:"created_at:desc",label:"Created Date (Newest)"},{value:"created_at:asc",label:"Created Date (Oldest)"}],je=[{value:10,label:"10 per page"},{value:25,label:"25 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}];function ct({districts:a={data:[],links:[],meta:void 0},provinces:T=[],filters:l={}}){le();const{t:r}=ie(),P=[{title:r("dashboard.page_title"),href:route("dashboard")},{title:r("districts.page_title"),href:"#"}],[_,C]=i.useState(l.search||""),[p,N]=i.useState(l.sort_field||"name"),[n,j]=i.useState(l.sort_direction||"asc"),[c,S]=i.useState(l.province_id||"all"),[F,u]=i.useState(!1),[h,D]=i.useState(null),y=i.useRef(!0),x=i.useRef({sortField:l.sort_field,sortDirection:l.sort_direction,provinceId:l.province_id}),k=[{value:"all",label:r("districts.all_provinces")},...T.map(t=>({value:t.id.toString(),label:t.name}))],E=()=>{try{const t={search:_,sort_field:p,sort_direction:n,province_id:c==="all"?"":c},s=route("districts.index"),o={preserveState:!0,replace:!0};setTimeout(()=>{f.get(s,t,o)},0)}catch(t){console.error("Error applying search:",t)}},O=()=>{try{const t={search:l.search||"",sort_field:p,sort_direction:n,province_id:c==="all"?"":c},s=route("districts.index"),o={preserveState:!0,replace:!0};setTimeout(()=>{f.get(s,t,o)},0)}catch(t){console.error("Error applying filters:",t)}};i.useEffect(()=>{if(y.current){y.current=!1;return}const t=p!==x.current.sortField,s=n!==x.current.sortDirection,o=c!==x.current.provinceId;(t||s||o)&&(x.current={sortField:p,sortDirection:n,provinceId:c},O())},[p,n,c]);const Z=t=>{t.preventDefault(),E()},I=t=>{const[s,o]=t.split(":");N(s),j(o)},B=()=>{j(n==="asc"?"desc":"asc")},H=t=>{console.log("Per page changed to:",t)},R=t=>{S(t==="all"?"":t)},U=()=>{C(""),N("name"),j("asc"),S("all");try{const t={search:"",sort_field:"name",sort_direction:"asc",province_id:""},s=route("districts.index"),o={preserveState:!0,replace:!0};setTimeout(()=>{f.get(s,t,o)},0)}catch(t){console.error("Error clearing filters:",t)}},z=t=>{D(t),u(!0)},$=()=>{h&&f.delete(route("districts.destroy",h.id),{onSuccess:()=>{D(null),u(!1)}})};return e.jsxs(M,{breadcrumbs:P,children:[e.jsx(L,{title:r("districts.page_title")}),e.jsx(X,{open:F,onOpenChange:u,children:e.jsxs(Y,{children:[e.jsxs(ee,{children:[e.jsx(te,{children:r("districts.delete_dialog.title")}),e.jsx(re,{children:r("districts.delete_dialog.description",{name:(h==null?void 0:h.name)||""})})]}),e.jsxs(se,{children:[e.jsx(ae,{onClick:()=>u(!1),children:r("districts.delete_dialog.cancel")}),e.jsx(oe,{onClick:$,className:"bg-red-600 hover:bg-red-700",children:r("districts.delete_dialog.confirm")})]})]})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(w,{title:r("districts.page_title"),description:r("districts.page_description"),icon:e.jsx(A,{className:"h-6 w-6"}),model:"district",routeName:()=>route("districts.create"),buttonText:r("districts.add_button"),theme:"purple",buttonSize:"lg"}),e.jsx(Q,{searchQuery:_,onSearchChange:C,onSearchSubmit:Z,searchPlaceholder:r("districts.search_placeholder"),filters:{sort:`${p}:${n}`,direction:n,per_page:10},onTypeChange:()=>{},onCategoryChange:()=>{},onDepartmentChange:R,onSortChange:I,onDirectionChange:B,onPerPageChange:H,onResetFilters:U,types:[],categories:[],departments:k,sortOptions:fe,perPageOptions:je,title:r("districts.search_filters"),description:r("districts.find_and_filter"),className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden"}),e.jsxs("div",{className:"mt-8",children:[e.jsx(w,{title:r("districts.table.title"),description:r("districts.table.description"),icon:e.jsx(me,{className:"h-6 w-6"}),model:"district",routeName:()=>"",buttonText:"",theme:"purple",showButton:!1}),e.jsx(K,{className:"shadow-lg",children:e.jsx(W,{className:"p-0",children:e.jsxs(V,{children:[e.jsx(q,{children:e.jsxs(v,{className:"bg-gradient-to-l from-purple-100 to-purple-200 border-0",children:[e.jsx(m,{className:"text-purple-800 font-bold text-lg py-6 px-6",children:r("districts.table.name")}),e.jsx(m,{className:"text-purple-800 font-bold text-lg py-6 px-6",children:r("districts.table.code")}),e.jsx(m,{className:"text-purple-800 font-bold text-lg py-6 px-6",children:r("districts.table.province")}),e.jsx(m,{className:"text-purple-800 font-bold text-lg py-6 px-6",children:r("districts.table.status")}),e.jsx(m,{className:"text-purple-800 font-bold text-lg py-6 px-6",children:r("districts.table.created_by")}),e.jsx(m,{className:"text-purple-800 font-bold text-lg py-6 px-6 text-right",children:r("districts.table.actions")})]})}),e.jsx(G,{children:a!=null&&a.data&&a.data.length>0?a.data.map(t=>{var s;return e.jsxs(v,{children:[e.jsx(d,{children:e.jsxs(g,{href:route("districts.show",t.id),className:"font-bold hover:underline flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),t.name]})}),e.jsx(d,{className:"font-bold",children:t.code}),e.jsx(d,{children:t.province?e.jsx(g,{href:route("provinces.show",t.province.id),className:"hover:underline",children:t.province.name}):"-"}),e.jsx(d,{children:e.jsx(J,{variant:t.status==="active"?"default":"secondary",children:t.status})}),e.jsx(d,{children:((s=t.creator)==null?void 0:s.name)||"-"}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(ne,{model:"district",children:e.jsx(b,{variant:"ghost",size:"icon",asChild:!0,title:r("districts.actions.view"),children:e.jsx(g,{href:route("districts.show",t.id),children:e.jsx(he,{className:"h-4 w-4"})})})}),e.jsx(ce,{model:"district",children:e.jsx(b,{variant:"ghost",size:"icon",asChild:!0,title:r("districts.actions.edit"),children:e.jsx(g,{href:route("districts.edit",t.id),children:e.jsx(ue,{className:"h-4 w-4"})})})}),e.jsx(de,{model:"district",children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>z(t),title:r("districts.actions.delete"),children:e.jsx(xe,{className:"h-4 w-4"})})})]})})]},t.id)}):e.jsx(v,{children:e.jsx(d,{colSpan:6,className:"h-32 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-muted-foreground",children:[e.jsx(ge,{className:"h-16 w-16"}),e.jsx("p",{className:"text-xl font-bold",children:r("districts.no_records")}),e.jsx("p",{children:r("districts.no_records_description")})]})})})})]})})})]}),(a==null?void 0:a.links)&&a.links.length>0&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:"bg-gradient-to-l from-purple-50 to-white p-4 rounded-3xl shadow-2xl border border-purple-200",children:e.jsx(pe,{links:a.links})})})]})]})}export{ct as default};

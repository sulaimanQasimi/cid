import{m as k,r as d,j as t,L as C,$ as y}from"./app-BNsatN7_.js";import{A as T}from"./app-layout-CqCvLOE2.js";import{B}from"./button-xaCB5kL1.js";import{C as F,d as L}from"./card-CkvGHacV.js";import{u as A}from"./translate-BdJfsgj3.js";import{u as D}from"./use-permissions-DNR9fBEd.js";import{a as V}from"./permission-guard-PqHJTh-0.js";import{S as E,a as z,b as H,c as O,d as h}from"./select-D3Ut8M2w.js";import{T as R}from"./TreeViewStatSelector-CvSV7lNZ.js";import{L as $}from"./label-CHXw2Fkr.js";import{H as I}from"./header-DgJTZqOx.js";import{F as M}from"./FooterButtons-CAA088eG.js";import{A as P}from"./arrow-left-BqitAYQI.js";import{C as U}from"./chart-column-DUyV3-nW.js";import{B as q}from"./building-2-DoHNrFAU.js";import{T as G}from"./triangle-alert-Cjc3r4mc.js";import"./utils-Ciod7d3-.js";import"./index-DKmV0fQA.js";import"./createLucideIcon-BkGZLxLS.js";import"./index-CsTxcdAz.js";import"./index-qOvmePiK.js";import"./index-dm64hHwb.js";import"./x-k3G3sDaS.js";import"./index-CMyZrYEx.js";import"./avatar-BpSqd5FN.js";import"./file-text-Dn7DyaFd.js";import"./users-LE8xqJ7M.js";import"./tag-r21j16Ug.js";import"./qr-code-BynbUQuL.js";import"./map-pin-B1jNXBgc.js";import"./building-DLkGN29y.js";import"./database-zsxreRCo.js";import"./index-BYZX9Kl9.js";import"./check-BECAbwP_.js";import"./input-DU_NGHUt.js";import"./textarea-Byr1kxkM.js";import"./plus-JtMfyaTo.js";import"./save-CRsRM6G2.js";function Lt({item:a,statItems:m,statCategories:u}){const{t:i}=A();D();const{setData:_,put:f,processing:g}=k({stats:[]}),[o,c]=d.useState(()=>{var s;const e={};return(s=a.infoStats)==null||s.forEach(n=>{e[n.stat_category_item_id]={value:n.string_value||"",notes:n.notes}}),e}),[r,x]=d.useState(null),b=[{title:i("national_insight_center_info.page_title"),href:route("national-insight-center-infos.index")},{title:a.name,href:route("national-insight-center-info-items.show",a.id)},{title:i("national_insight_center_info_item.stats.title"),href:"#"}],j=e=>{e.preventDefault();const s=Object.entries(o).filter(([n,{value:l}])=>l.trim()!=="").map(([n,{value:l,notes:v}])=>({stat_category_item_id:parseInt(n),value:l,notes:v||void 0}));s.length>0&&_("stats",s),f(route("national-insight-center-info-items.stats.update",a.id))},w=u.map(e=>({id:e.id,label:e.label,color:e.color})),p=r?m.filter(e=>e.category.id===r):m;function N(e,s){c(n=>({...n,[e]:{...n[e]||{notes:null},value:s}}))}function S(e,s){c(n=>({...n,[e]:{...n[e]||{value:""},notes:s||null}}))}return Object.keys(o).length,t.jsxs(T,{breadcrumbs:b,children:[t.jsx(C,{title:i("national_insight_center_info_item.stats.title",{name:a.name})}),t.jsxs("div",{className:"container px-0 py-6",children:[t.jsx(I,{title:i("national_insight_center_info_item.stats.title",{name:a.name}),description:i("national_insight_center_info_item.stats.description"),icon:t.jsx(U,{className:"h-6 w-6 text-white"}),model:"national_insight_center_info_item",routeName:"national-insight-center-info-items.stats",buttonText:i("national_insight_center_info_item.stats.save_button"),theme:"purple",buttonSize:"lg",showBackButton:!0,backRouteName:"national-insight-center-info-items.show",backButtonText:i("national_insight_center_info_item.stats.back_button"),showButton:!1,actionButtons:t.jsx(t.Fragment,{children:t.jsx(B,{asChild:!0,variant:"outline",size:"lg",className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 shadow-2xl rounded-2xl px-6 py-3 text-lg font-semibold transition-all duration-300 hover:scale-105",children:t.jsxs(y,{href:route("national-insight-center-info-items.show",a.id),className:"flex items-center gap-3",children:[t.jsx(P,{className:"h-5 w-5"}),i("national_insight_center_info_item.stats.back_button")]})})})}),t.jsx(V,{model:"national_insight_center_info_item",children:t.jsx("form",{onSubmit:j,children:t.jsxs("div",{className:"grid gap-8",children:[t.jsx(F,{className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden",children:t.jsxs(L,{className:"p-8 space-y-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs($,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-purple-700 dark:text-purple-300 text-right",dir:"rtl",children:[i("national_insight_center_info_item.stats.filter_by_category"),t.jsx(q,{className:"h-4 w-4"})]}),t.jsxs(E,{value:(r==null?void 0:r.toString())||"all",onValueChange:e=>x(e!=="all"?parseInt(e):null),children:[t.jsx(z,{id:"category-filter",className:"h-12 border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 text-right",children:t.jsx(H,{placeholder:i("incidents.filters.all_categories")})}),t.jsxs(O,{children:[t.jsx(h,{value:"all",children:i("incidents.filters.all_categories")}),w.map(e=>t.jsx(h,{value:e.id.toString(),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:e.color}}),e.label]})},e.id))]})]})]}),p.length>0?t.jsx(R,{items:p,statsData:o,onValueChange:N,onNotesChange:S}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-800/30 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:t.jsx(G,{className:"h-8 w-8 text-purple-400 dark:text-purple-500"})}),t.jsx("p",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 mb-2",children:i("national_insight_center_info_item.stats.no_items")}),t.jsx("p",{className:"text-purple-600 dark:text-purple-400",children:i("national_insight_center_info_item.stats.no_items_description")})]})]})}),t.jsx(M,{onCancel:()=>window.history.back(),onSubmit:()=>{},processing:g,cancelText:i("national_insight_center_info_item.stats.cancel_button"),submitText:i("national_insight_center_info_item.stats.save_button"),savingText:i("national_insight_center_info_item.stats.saving_button")})]})})})]})]})}export{Lt as default};

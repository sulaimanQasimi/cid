import{m as q,r as N,j as e,L as E}from"./app-DmDo5wY0.js";import{C as g,a as x,b as p,c as h,d as u}from"./card-BknZm7Xo.js";import{I as v}from"./input-YCr1kgHU.js";import{L as a}from"./label-D5mp7RFi.js";import{T as f}from"./textarea-BNkQRjH9.js";import{S as w,a as y,b as C,c as S,d as m}from"./select-xLvEukcQ.js";import{P as G}from"./PersianDatePicker-CACQrMP-.js";import{A as U}from"./app-layout-Byv8iRic.js";import{T as O}from"./TreeViewStatSelector-B05ZYq7F.js";import{u as J}from"./translate-CZarN8Xl.js";import{H as K}from"./header-C9iSeL9r.js";import{F as M}from"./FooterButtons-CNTa8FCu.js";import{S as F}from"./shield-DWNRSsYE.js";import{F as b}from"./file-text-CFIJyUxo.js";import{T as n}from"./triangle-alert-BCbMomVa.js";import{U as Q}from"./users-DPt7sQqw.js";import{B as W}from"./book-text-BYVWPOQw.js";import{G as X}from"./gavel-CmBtN5rM.js";import{F as Y}from"./file-check-Dwfk3SQt.js";import{B as Z}from"./building-2-DpYzWC6y.js";import"./utils-PjlJSuiK.js";import"./index-DD6himWL.js";import"./index-D_FEQydJ.js";import"./index-DUH7bDnm.js";import"./index-DkcfYfYU.js";import"./createLucideIcon-B3WK61Vj.js";import"./tslib.es6-CmEaCU22.js";import"./index-DwPZALyi.js";import"./check-tUU232Gk.js";import"./button-jP4wdIm_.js";import"./index-DKp1EUC0.js";import"./calendar-BtwU3wUU.js";import"./chevron-left-B2vZL-Tj.js";import"./x-DM2uWUfX.js";import"./index-B8m0_ty6.js";import"./avatar-CYwq1lpF.js";import"./tag-Cgf7madg.js";import"./qr-code-DbRHfXhF.js";import"./chart-column-CKpPY5KA.js";import"./map-pin-CUovXqLP.js";import"./database-Cl-60sz0.js";import"./permission-guard-Co9KCfkG.js";import"./arrow-left-CVm_XHso.js";import"./plus-BOdD66j1.js";import"./save-fzyHwFsg.js";const $=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Reports",href:route("incident-reports.index")},{title:"Create",href:route("incident-reports.create")}];function Ke({securityLevels:ee,statItems:j,statCategories:T}){const{t}=J(),{data:d,setData:s,post:B,processing:D,errors:i}=q({report_date:"",security_level:"normal",details:"",report_status:"submitted",report_number:"",action_taken:"",recommendation:"",source:""}),[_,k]=N.useState({}),[c,L]=N.useState(null);function V(){window.location.href=route("incident-reports.index")}function I(){const r=Object.entries(_).filter(([l,{value:o}])=>o.trim()!=="").map(([l,{value:o,notes:R}])=>({stat_category_item_id:parseInt(l),value:o,notes:R||void 0}));r.length>0&&s("stats",r),B(route("incident-reports.store"))}const z=T.map(r=>({id:r.id,label:r.label,color:r.color})),A=c?j.filter(r=>r.category.id===c):j;function H(r,l){k(o=>({...o,[r]:{...o[r]||{notes:null},value:l}}))}function P(r,l){k(o=>({...o,[r]:{...o[r]||{value:""},notes:l||null}}))}return e.jsxs(U,{breadcrumbs:$,children:[e.jsx(E,{title:t("incident_reports.create.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(K,{title:t("incident_reports.create.page_title"),description:t("incident_reports.create.page_description"),icon:e.jsx(F,{className:"h-5 w-5"}),model:"incident_reports",routeName:()=>route("incident-reports.index"),buttonText:t("common.back"),theme:"indigo",showBackButton:!0,backRouteName:()=>route("incident-reports.index"),backButtonText:t("common.back"),showButton:!1}),e.jsx("form",{children:e.jsxs("div",{className:"grid gap-8",children:[e.jsxs(g,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(x,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(p,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(b,{className:"h-5 w-5"})}),t("incident_reports.form.info_title")]}),e.jsx(h,{className:"text-indigo-100",children:t("incident_reports.form.info_description")})]}),e.jsxs(u,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{htmlFor:"report_number",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.report_number_label"),e.jsx(b,{className:"h-4 w-4"})]}),e.jsx(v,{id:"report_number",value:d.report_number,onChange:r=>s("report_number",r.target.value),placeholder:t("incident_reports.form.report_number_placeholder"),className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.report_number&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(n,{className:"h-4 w-4"}),i.report_number]})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(G,{id:"report_date",label:t("incident_reports.form.report_date"),value:d.report_date,onChange:r=>s("report_date",r),placeholder:t("incident_reports.form.report_date_placeholder"),required:!0,error:i.report_date,className:"w-full"})})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{htmlFor:"security_level",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.security_level"),e.jsx(F,{className:"h-4 w-4"})]}),e.jsxs(w,{value:d.security_level,onValueChange:r=>s("security_level",r),children:[e.jsx(y,{id:"security_level",className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(C,{placeholder:t("incident_reports.form.security_level_placeholder")})}),e.jsxs(S,{children:[e.jsx(m,{value:"normal",children:t("incident_reports.level.normal")}),e.jsx(m,{value:"restricted",children:t("incident_reports.level.restricted")}),e.jsx(m,{value:"classified",children:t("incident_reports.level.classified")})]})]}),i.security_level&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(n,{className:"h-4 w-4"}),i.security_level]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{htmlFor:"source",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.source_label"),e.jsx(Q,{className:"h-4 w-4"})]}),e.jsx(v,{id:"source",value:d.source,onChange:r=>s("source",r.target.value),placeholder:t("incident_reports.form.source_placeholder"),className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.source&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(n,{className:"h-4 w-4"}),i.source]})]})]})]})]}),e.jsxs(g,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(x,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(p,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(W,{className:"h-5 w-5"})}),t("incident_reports.details.title")]}),e.jsx(h,{className:"text-indigo-100",children:t("incident_reports.details.description")})]}),e.jsxs(u,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{htmlFor:"details",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[e.jsx("span",{className:"text-red-500",children:"*"}),t("incident_reports.details.details_label"),e.jsx(b,{className:"h-4 w-4"})]}),e.jsx(f,{id:"details",rows:5,value:d.details,onChange:r=>s("details",r.target.value),placeholder:t("incident_reports.details.details_placeholder"),required:!0,className:"min-h-[120px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.details&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(n,{className:"h-4 w-4"}),i.details]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{htmlFor:"action_taken",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.details.action_taken_label"),e.jsx(X,{className:"h-4 w-4"})]}),e.jsx(f,{id:"action_taken",rows:3,value:d.action_taken,onChange:r=>s("action_taken",r.target.value),placeholder:t("incident_reports.details.action_taken_placeholder"),className:"min-h-[80px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.action_taken&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(n,{className:"h-4 w-4"}),i.action_taken]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{htmlFor:"recommendation",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.details.recommendation_label"),e.jsx(Y,{className:"h-4 w-4"})]}),e.jsx(f,{id:"recommendation",rows:3,value:d.recommendation,onChange:r=>s("recommendation",r.target.value),placeholder:t("incident_reports.details.recommendation_placeholder"),className:"min-h-[80px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.recommendation&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(n,{className:"h-4 w-4"}),i.recommendation]})]}),e.jsx("input",{type:"hidden",name:"report_status",value:"submitted"})]})]}),e.jsxs(g,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(x,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(p,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(n,{className:"h-5 w-5"})}),t("incident_reports.stats.title")]}),e.jsx(h,{className:"text-indigo-100",children:t("incident_reports.stats.description")})]}),e.jsxs(u,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(a,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.stats.filter_by_category"),e.jsx(Z,{className:"h-4 w-4"})]}),e.jsxs(w,{value:(c==null?void 0:c.toString())||"all",onValueChange:r=>L(r!=="all"?parseInt(r):null),children:[e.jsx(y,{id:"category-filter",className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(C,{placeholder:t("incidents.filters.all_categories")})}),e.jsxs(S,{children:[e.jsx(m,{value:"all",children:t("incidents.filters.all_categories")}),z.map(r=>e.jsx(m,{value:r.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:r.color}}),r.label]})},r.id))]})]})]}),e.jsx(O,{items:A,statsData:_,onValueChange:H,onNotesChange:P})]})]}),e.jsx(M,{onCancel:V,onSubmit:I,processing:D,cancelText:t("common.cancel"),submitText:t("incident_reports.actions.create"),savingText:t("incident_reports.actions.submitting")})]})})]})]})}export{Ke as default};

import{m as z,r as n,j as e,L as U,$ as E}from"./app-BNsatN7_.js";import{A as H}from"./app-layout-CqCvLOE2.js";import{B as O}from"./button-xaCB5kL1.js";import{C as j,d as _}from"./card-CkvGHacV.js";import{I as y}from"./input-DU_NGHUt.js";import{L as p}from"./label-CHXw2Fkr.js";import{T as R}from"./textarea-Byr1kxkM.js";import{u as $}from"./translate-BdJfsgj3.js";import{u as q}from"./use-permissions-DNR9fBEd.js";import{c as P}from"./permission-guard-PqHJTh-0.js";import{S as X,a as G,b as J,c as K,d as N}from"./select-D3Ut8M2w.js";import{T as M}from"./TreeViewStatSelector-CvSV7lNZ.js";import{H as w}from"./header-DgJTZqOx.js";import{F as Q}from"./FooterButtons-CAA088eG.js";import{A as W}from"./arrow-left-BqitAYQI.js";import{F as u}from"./file-text-Dn7DyaFd.js";import{X as x}from"./x-k3G3sDaS.js";import{C as Y}from"./chart-column-DUyV3-nW.js";import{T as v}from"./triangle-alert-Cjc3r4mc.js";import{B as Z}from"./building-2-DoHNrFAU.js";import"./utils-Ciod7d3-.js";import"./index-DKmV0fQA.js";import"./createLucideIcon-BkGZLxLS.js";import"./index-CsTxcdAz.js";import"./index-qOvmePiK.js";import"./index-dm64hHwb.js";import"./index-CMyZrYEx.js";import"./avatar-BpSqd5FN.js";import"./users-LE8xqJ7M.js";import"./tag-r21j16Ug.js";import"./qr-code-BynbUQuL.js";import"./map-pin-B1jNXBgc.js";import"./building-DLkGN29y.js";import"./database-zsxreRCo.js";import"./index-BYZX9Kl9.js";import"./check-BECAbwP_.js";import"./plus-JtMfyaTo.js";import"./save-CRsRM6G2.js";function Re({statItems:f,statCategories:k,users:C}){const{t:r}=$();q();const{data:c,setData:i,post:S,processing:T,errors:a}=z({name:"",code:"",description:"",access_users:[]}),[d,h]=n.useState({}),[l,B]=n.useState(null),[ee,te]=n.useState([]),[g,re]=n.useState(""),F=[{title:r("info.page_title"),href:route("info-types.index")},{title:r("info_types.page_title"),href:route("info-types.index")},{title:r("info_types.create.page_title"),href:"#"}],L=t=>{t.preventDefault();const o=Object.entries(d).filter(([s,{value:m}])=>m.trim()!=="").map(([s,{value:m,notes:V}])=>({stat_category_item_id:parseInt(s),value:m,notes:V||void 0}));o.length>0&&i("stats",o),S(route("info-types.store"))},A=k.map(t=>({id:t.id,label:t.label,color:t.color})),b=l?f.filter(t=>t.category.id===l):f;function D(t,o){h(s=>({...s,[t]:{...s[t]||{notes:null},value:o}}))}function I(t,o){h(s=>({...s,[t]:{...s[t]||{value:""},notes:o||null}}))}return Object.keys(d).length,C.filter(t=>t.name.toLowerCase().includes(g.toLowerCase())||t.email.toLowerCase().includes(g.toLowerCase())),e.jsxs(H,{breadcrumbs:F,children:[e.jsx(U,{title:r("info_types.create.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(w,{title:r("info_types.create.page_title"),description:r("info_types.create.page_description"),icon:e.jsx(u,{className:"h-6 w-6 text-white"}),model:"info_type",routeName:"info-types.create",buttonText:r("info_types.create.save_button"),theme:"purple",buttonSize:"lg",showBackButton:!0,backRouteName:"info-types.index",backButtonText:r("info_types.create.back_button"),showButton:!1,actionButtons:e.jsx(e.Fragment,{children:e.jsx(O,{asChild:!0,variant:"outline",size:"lg",className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 shadow-2xl rounded-2xl px-6 py-3 text-lg font-semibold transition-all duration-300 hover:scale-105",children:e.jsxs(E,{href:route("info-types.index"),className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-5 w-5"}),r("info_types.create.back_button")]})})})}),e.jsx(P,{model:"info_type",children:e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"grid gap-8",children:[e.jsx(j,{className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden",children:e.jsxs(_,{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(p,{htmlFor:"name",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),r("info_types.create.name_label")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{id:"name",value:c.name,onChange:t=>i("name",t.target.value),required:!0,className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:r("info_types.create.name_placeholder")}),a.name&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:a.name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(p,{htmlFor:"code",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),r("info_types.create.code_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{id:"code",value:c.code,onChange:t=>i("code",t.target.value),className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:r("info_types.create.code_placeholder")}),a.code&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:a.code})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(p,{htmlFor:"description",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),r("info_types.create.description_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{id:"description",value:c.description,onChange:t=>i("description",t.target.value),rows:4,className:"text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 shadow-lg resize-none",placeholder:r("info_types.create.description_placeholder")}),a.description&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:a.description})]})]})]})]})}),e.jsx(w,{title:r("info_types.stats.title"),description:r("info_types.stats.description"),icon:e.jsx(v,{className:"h-6 w-6"}),model:"info_type",routeName:()=>"",buttonText:"",theme:"purple",showButton:!1}),e.jsx(j,{className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden",children:e.jsxs(_,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(p,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-purple-700 dark:text-purple-300 text-right",dir:"rtl",children:[r("info_types.stats.filter_by_category"),e.jsx(Z,{className:"h-4 w-4"})]}),e.jsxs(X,{value:(l==null?void 0:l.toString())||"all",onValueChange:t=>B(t!=="all"?parseInt(t):null),children:[e.jsx(G,{id:"category-filter",className:"h-12 border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(J,{placeholder:r("incidents.filters.all_categories")})}),e.jsxs(K,{children:[e.jsx(N,{value:"all",children:r("incidents.filters.all_categories")}),A.map(t=>e.jsx(N,{value:t.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:t.color}}),t.label]})},t.id))]})]})]}),b.length>0?e.jsx(M,{items:b,statsData:d,onValueChange:D,onNotesChange:I}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-800/30 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(v,{className:"h-8 w-8 text-purple-400 dark:text-purple-500"})}),e.jsx("p",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 mb-2",children:r("info_types.stats.no_items")}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400",children:r("info_types.stats.no_items_description")})]})]})}),e.jsx(Q,{onCancel:()=>window.history.back(),onSubmit:()=>{},processing:T,cancelText:r("info_types.create.cancel_button"),submitText:r("info_types.create.save_button"),savingText:r("info_types.create.saving_button")})]})})})]})]})}export{Re as default};

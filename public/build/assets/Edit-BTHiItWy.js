import{m as E,j as e,L,$ as F}from"./app-D9EKp-j0.js";import{B as p}from"./button-C_lbOJaF.js";import{C as u,a as g,b as v,c as V,d as _,e as B}from"./card-CJ646PJT.js";import{I as c}from"./input-CDqmtBAl.js";import{L as n}from"./label-DFSxdoGP.js";import{T as R}from"./textarea-5qnh3CSk.js";import{P as k}from"./page-header-i4y0N3hM.js";import{I as d}from"./input-error-D4iMLVDS.js";import{S as m,a as h,b as x,c as j,d as l}from"./select-Cs4X5igs.js";import{S as A}from"./separator-Ppe11ntU.js";import{A as P}from"./arrow-left-BcosiyJl.js";import{S as $}from"./save-BAhoOAMe.js";import"./index-BdHtEbnZ.js";import"./index--GEwVf8d.js";import"./index-BYrHusN6.js";import"./index-CEWyTXIf.js";import"./createLucideIcon-2sT-PLZR.js";import"./index-BrNC6hno.js";import"./check-C5q72oI5.js";function ne({incident:i,districts:I,categories:b,reports:T}){var y,N,C,S,f;const{data:t,setData:a,put:D,processing:q,errors:r}=E({title:i.title||"",description:i.description||"",incident_date:i.incident_date||new Date().toISOString().split("T")[0],incident_time:i.incident_time||"",district_id:((y=i.district_id)==null?void 0:y.toString())||"",incident_category_id:((N=i.incident_category_id)==null?void 0:N.toString())||"",incident_report_id:((C=i.incident_report_id)==null?void 0:C.toString())||"none",location:i.location||"",coordinates:i.coordinates||"",casualties:((S=i.casualties)==null?void 0:S.toString())||"0",injuries:((f=i.injuries)==null?void 0:f.toString())||"0",incident_type:i.incident_type||"",status:i.status||"reported"}),w=s=>{s.preventDefault();const o={...t};o.incident_report_id==="none"&&(o.incident_report_id=null),D(route("incidents.update",i.id),{...o,_method:"put"})};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:`Edit Incident - ${i.title}`}),e.jsx(k,{title:"Edit Incident",description:"incident.label",actions:e.jsx(p,{variant:"outline",asChild:!0,children:e.jsxs(F,{href:route("incidents.show",i.id),children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back to Incident"]})})}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs(u,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Basic Information"}),e.jsx(V,{children:"Update the incident's basic details"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"title",children:["Title ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"title",value:t.title,onChange:s=>a("title",s.target.value),placeholder:"Enter incident title",required:!0}),e.jsx(d,{message:r.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"incident_type",children:["Incident Type ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"incident_type",value:t.incident_type,onChange:s=>a("incident_type",s.target.value),placeholder:"e.g. Theft, Security Breach, Violence",required:!0}),e.jsx(d,{message:r.incident_type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"description",children:["Description ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(R,{id:"description",value:t.description,onChange:s=>a("description",s.target.value),placeholder:"Provide a detailed description of the incident",rows:5,required:!0}),e.jsx(d,{message:r.description})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"incident_date",children:["Date ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"incident_date",type:"date",value:t.incident_date,onChange:s=>a("incident_date",s.target.value),required:!0}),e.jsx(d,{message:r.incident_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"incident_time",children:"Time"}),e.jsx(c,{id:"incident_time",type:"time",value:t.incident_time,onChange:s=>a("incident_time",s.target.value)}),e.jsx(d,{message:r.incident_time})]})]})]})]}),e.jsxs(u,{children:[e.jsx(g,{children:e.jsx(v,{children:"Location & Classification"})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"district_id",children:["District ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(m,{value:t.district_id,onValueChange:s=>a("district_id",s),required:!0,children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select a district"})}),e.jsx(j,{children:I.map(s=>{var o;return e.jsxs(l,{value:s.id.toString(),children:[s.name," (",(o=s.province)==null?void 0:o.name,")"]},s.id)})})]}),e.jsx(d,{message:r.district_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"incident_category_id",children:["Category ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(m,{value:t.incident_category_id,onValueChange:s=>a("incident_category_id",s),required:!0,children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select a category"})}),e.jsx(j,{children:b.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(d,{message:r.incident_category_id})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"location",children:"Specific Location"}),e.jsx(c,{id:"location",value:t.location,onChange:s=>a("location",s.target.value),placeholder:"e.g. Main Market, North Checkpoint"}),e.jsx(d,{message:r.location})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"coordinates",children:"Coordinates"}),e.jsx(c,{id:"coordinates",value:t.coordinates,onChange:s=>a("coordinates",s.target.value),placeholder:"e.g. 34.5553° N, 69.2075° E"}),e.jsx(d,{message:r.coordinates})]})]})]}),e.jsxs(u,{children:[e.jsx(g,{children:e.jsx(v,{children:"Impact & Status"})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"casualties",children:"Casualties"}),e.jsx(c,{id:"casualties",type:"number",min:"0",value:t.casualties,onChange:s=>a("casualties",s.target.value)}),e.jsx(d,{message:r.casualties})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"injuries",children:"Injuries"}),e.jsx(c,{id:"injuries",type:"number",min:"0",value:t.injuries,onChange:s=>a("injuries",s.target.value)}),e.jsx(d,{message:r.injuries})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"status",children:["Status ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(m,{value:t.status,onValueChange:s=>a("status",s),required:!0,children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select status"})}),e.jsxs(j,{children:[e.jsx(l,{value:"reported",children:"Reported"}),e.jsx(l,{value:"investigating",children:"Investigating"}),e.jsx(l,{value:"resolved",children:"Resolved"}),e.jsx(l,{value:"closed",children:"Closed"})]})]}),e.jsx(d,{message:r.status})]}),e.jsx(A,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"incident_report_id",children:"Assign to Report (Optional)"}),e.jsxs(m,{value:t.incident_report_id,onValueChange:s=>a("incident_report_id",s),children:[e.jsx(h,{children:e.jsx(x,{placeholder:"Select a report (optional)"})}),e.jsxs(j,{children:[e.jsx(l,{value:"none",children:"None"}),T.map(s=>e.jsx(l,{value:s.id.toString(),children:s.report_number},s.id))]})]}),e.jsx(d,{message:r.incident_report_id})]})]}),e.jsxs(B,{className:"flex justify-end space-x-2",children:[e.jsx(p,{variant:"outline",asChild:!0,children:e.jsx(F,{href:route("incidents.show",i.id),children:"Cancel"})}),e.jsxs(p,{type:"submit",disabled:q,children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Update Incident"]})]})]})]})]})}export{ne as default};

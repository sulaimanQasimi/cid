import{j as e,L as p,$ as i}from"./app-3e9ZfCZj.js";import{B as a}from"./button-tOsBMVu3.js";import{C as n,d,a as f,b as u,c as j}from"./card-CPvNgHsq.js";import{B as t}from"./badge-Dcgw1Reo.js";import{P as N}from"./page-header-ClrMVESu.js";import{A as g,C as v}from"./app-layout-7lRn1_rF.js";import{f as c}from"./index-CaunA62S.js";import{A as w}from"./arrow-left-DyCW_lBj.js";import{P as o}from"./plus-BnjQq30w.js";import{M as b}from"./users-D8IR1cY7.js";import{F as C}from"./file-text-W_Iskmvy.js";import"./index-CkvEONY9.js";import"./createLucideIcon-BtOnYZj6.js";import"./index-CSgRh3VG.js";import"./index-BiOWnkU5.js";import"./index-C3obqkZ2.js";import"./x-DTbSmVa3.js";import"./index-BbGum64W.js";import"./avatar-CnrxwdK1.js";import"./app-logo-pu7XLt_2.js";import"./app-logo-icon-CH0F37vC.js";import"./triangle-alert-CB08x4VC.js";import"./tag-Cbang5gX.js";import"./qr-code-CqMqn-r0.js";function O({report:r,incidents:l}){const m=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Reports",href:route("incident-reports.index")},{title:r.report_number,href:route("incident-reports.show",r.id)},{title:"Incidents",href:route("incident-reports.incidents",r.id)}];function x(s){switch(s){case"high":return e.jsx(t,{variant:"destructive",children:s});case"medium":return e.jsx(t,{variant:"default",children:s});default:return e.jsx(t,{variant:"outline",children:s})}}function h(s){switch(s){case"closed":return e.jsx(t,{variant:"secondary",children:s});case"in_progress":return e.jsx(t,{variant:"default",children:"In Progress"});default:return e.jsx(t,{variant:"outline",children:s})}}return e.jsxs(g,{breadcrumbs:m,children:[e.jsx(p,{title:`Incidents - Report ${r.report_number}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(N,{title:`Incidents for Report ${r.report_number}`,description:`All incidents associated with this report as of ${c(new Date(r.report_date),"PPP")}`,actions:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs(i,{href:route("incident-reports.show",r.id),children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Back to Report"]})}),e.jsx(a,{asChild:!0,children:e.jsxs(i,{href:route("incidents.create",{report_id:r.id}),children:[e.jsx(o,{className:"mr-2 h-4 w-4"}),"Add Incident"]})})]})}),l.length===0?e.jsx(n,{children:e.jsx(d,{className:"flex flex-col items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"No incidents found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"There are no incidents associated with this report yet."}),e.jsx(a,{className:"mt-4",asChild:!0,children:e.jsxs(i,{href:route("incidents.create",{report_id:r.id}),children:[e.jsx(o,{className:"mr-2 h-4 w-4"}),"Add First Incident"]})})]})})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(s=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(f,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{className:"text-base",children:e.jsx(i,{href:route("incidents.show",s.id),className:"hover:underline text-primary",children:s.title})}),e.jsxs(j,{className:"flex items-center text-xs",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),c(new Date(s.incident_date),"PPP")]})]}),s.category?e.jsx(t,{style:{backgroundColor:s.category.color},children:s.category.name}):e.jsx(t,{variant:"outline",children:"Uncategorized"})]})}),e.jsxs(d,{className:"flex-1 pb-2",children:[e.jsxs("div",{className:"mb-3 flex items-start text-xs text-muted-foreground",children:[e.jsx(b,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:s.location||"No location specified"})]}),e.jsx("p",{className:"text-sm line-clamp-3",children:s.description})]}),e.jsx("div",{className:"px-6 pb-4 pt-0 mt-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[x(s.severity),h(s.status)]}),e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(i,{href:route("incidents.show",s.id),children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"View"]})})]})})]},s.id))})]})]})}export{O as default};

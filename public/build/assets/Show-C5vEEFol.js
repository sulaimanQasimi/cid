import{K,r as T,j as e,L as S,$ as x,S as J}from"./app-BoRYl7ul.js";import{B as m}from"./button-t4nte1w6.js";import{C as v,a as g,b,d as f,c as w}from"./card-D2OxhE_x.js";import{B as h}from"./badge-A505B3UT.js";import{P as Q}from"./pagination-ByaZ4z0x.js";import{A as B}from"./app-layout-Dt0eGsm9.js";import{T as W,a as X,b as O,c as k,d as Y,e as _}from"./table-C1m_sxUA.js";import{T as Z,a as ee,b as U,c as F}from"./tabs-BXyH-mY8.js";import{L as te}from"./label-Bq4QvQHM.js";import{S as se,a as re,b as ie,c as ae,d as V}from"./select-CrS_PFZv.js";import{u as le}from"./translate-Ci5XD_xD.js";import{c as y}from"./utils-CAQgsxix.js";import{H as oe}from"./header-X5N3awQB.js";import{A as de,a as ce,b as ne,c as me,d as xe,e as he,f as pe,g as ve}from"./alert-dialog-Bydk8-Gr.js";import{S as u,T as A}from"./triangle-alert-CAu2JsQY.js";import{A as ge}from"./arrow-left-unmuUYR6.js";import{f as p}from"./index-CaunA62S.js";import{T as be}from"./trash-Cs2O4feb.js";import{P as fe}from"./pencil-UiIlozZZ.js";import{P as ue}from"./printer-CZ1fkoX3.js";import{F as j}from"./file-text-dEx5Ek9_.js";import{C as N}from"./clock-C159unAr.js";import{C as je}from"./calendar-BzdCMlGZ.js";import{U as we}from"./users-DUE_lbIG.js";import{U as Ne}from"./user-round-eVVI-8HO.js";import{U as L}from"./user-Dlq7lnhd.js";import{B as ke}from"./book-text-BP5zwTI4.js";import{G as _e}from"./gavel-DJnenHlf.js";import{F as ye}from"./file-check-DxhOfE4w.js";import{c as E}from"./createLucideIcon-0s2WbM7B.js";import{S as Ae}from"./square-pen-BIXwzcD5.js";import"./index-C_llV4y3.js";import"./index-C7EozwEa.js";import"./index-grl2zDGr.js";import"./index-BaIfncEH.js";import"./x-BOP-VcZp.js";import"./index-BMYc3FXi.js";import"./avatar-DYzCEtzG.js";import"./tag-CA1YiYoc.js";import"./qr-code-Bmlv7TNf.js";import"./chart-column-VbbG3CS0.js";import"./map-pin-DgBMy3fb.js";import"./database-si5r_ZNU.js";import"./index-D4JEb4Nb.js";import"./check-BQ8i0qzv.js";import"./permission-guard-CAt00NHa.js";import"./plus-CRqePd-M.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],$=E("ChartBar",Ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ie=E("CirclePlus",Re);function De(){const{incidentReportAccess:s}=K().props,r=s||{};return{canViewIncidentReports:r.canViewIncidentReports||!1,canCreateIncidentReports:r.canCreateIncidentReports||!1,canUpdateIncidentReports:r.canUpdateIncidentReports||!1,canDeleteIncidentReports:r.canDeleteIncidentReports||!1,canAccessIncidentsOnly:r.canAccessIncidentsOnly||!1,hasIncidentReportAccess:r.hasIncidentReportAccess||!1,currentAccess:r.currentAccess||null,canViewIncidentReport:r.canViewIncidentReport||!1,canUpdateIncidentReport:r.canUpdateIncidentReport||!1,canDeleteIncidentReport:r.canDeleteIncidentReport||!1,canAccessIncidentsOnlyForReport:r.canAccessIncidentsOnlyForReport||!1,hasIncidentReportAccessForReport:r.hasIncidentReportAccessForReport||!1,hasFullAccess:()=>{var a;return((a=r.currentAccess)==null?void 0:a.access_type)==="full"},hasReadOnlyAccess:()=>{var a,o;return((a=r.currentAccess)==null?void 0:a.access_type)==="read_only"||((o=r.currentAccess)==null?void 0:o.access_type)==="full"},hasIncidentsOnlyAccess:()=>{var a,o;return((a=r.currentAccess)==null?void 0:a.access_type)==="incidents_only"||((o=r.currentAccess)==null?void 0:o.access_type)==="full"},isAccessExpired:()=>{var a;return(a=r.currentAccess)!=null&&a.expires_at?new Date(r.currentAccess.expires_at)<new Date:!1},isAccessActive:()=>{var a,o;return((a=r.currentAccess)==null?void 0:a.is_active)&&!((o=r.isAccessExpired)!=null&&o.call(r))},isGlobalAccess:()=>{var a,o;return((a=r.currentAccess)==null?void 0:a.is_global)||((o=r.currentAccess)==null?void 0:o.incident_report_id)===null},isReportSpecificAccess:()=>!r.isGlobalAccess(),getCurrentReportId:()=>{var a;return(a=r.currentAccess)==null?void 0:a.incident_report_id},isReportSpecific:()=>{var a;return((a=r.currentAccess)==null?void 0:a.is_report_specific)||!1}}}function _t({report:s,incidents:r,reportStats:a,statCategories:o}){var D,P;const{t}=le(),[H,C]=T.useState(!1),l=De(),R=[{title:t("incident_reports.page_title"),href:route("incident-reports.index")},{title:s.report_number,href:route("incident-reports.show",s.id)}],M=()=>{J.delete(route("incident-reports.destroy",s.id))},[I,G]=T.useState(null),c={};a.forEach(i=>{const d=i.stat_category_item.category.label;i.stat_category_item.category.id,c[d]||(c[d]=[]),c[d].push(i)});const z=I?Object.entries(c).filter(([i,d])=>d.some(n=>n.stat_category_item.category.id===I)):Object.entries(c);function q(i){return i.integer_value!==null?i.integer_value.toString():i.string_value||""}return!l.hasIncidentReportAccessForReport||l.isAccessExpired()?e.jsxs(B,{breadcrumbs:R,children:[e.jsx(S,{title:t("incident_reports.show.page_title",{number:s.report_number})}),e.jsx("div",{className:"container px-0 py-6",children:e.jsxs(v,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-red-50 to-red-100/30",children:[e.jsx(g,{className:"bg-gradient-to-l from-red-500 to-red-600 text-white border-b pb-4",children:e.jsxs(b,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(u,{className:"h-5 w-5"})}),t("incident_reports.access_denied.title")]})}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:t("incident_reports.access_denied.message")}),e.jsx("p",{className:"text-red-600 mb-6",children:t("incident_reports.access_denied.description")}),e.jsx(m,{asChild:!0,className:"bg-gradient-to-l from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white",children:e.jsxs(x,{href:route("incident-reports.index"),children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),t("common.back_to_list")]})})]})})]})})]}):e.jsxs(B,{breadcrumbs:R,children:[e.jsx(S,{title:t("incident_reports.show.page_title",{number:s.report_number})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(oe,{title:s.report_number,description:`${t("incident_reports.show.report_date_label")}: ${p(new Date(s.report_date),"PPP")}`,icon:e.jsx(u,{className:"h-5 w-5"}),model:"incident_reports",routeName:()=>route("incident-reports.index"),buttonText:t("common.back"),theme:"violet",showBackButton:!0,backRouteName:()=>route("incident-reports.index"),backButtonText:t("common.back"),showButton:!1,actionButtons:e.jsxs("div",{className:"flex items-center gap-2",children:[l.canDeleteIncidentReport&&e.jsx(m,{onClick:()=>C(!0),className:"bg-red-500/20 dark:bg-red-500/30 backdrop-blur-md border-red-300/30 dark:border-red-400/40 text-white hover:bg-red-500/30 dark:hover:bg-red-500/40 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-red-500/20 dark:bg-red-500/30 rounded-lg",children:e.jsx(be,{className:"h-4 w-4"})}),t("common.delete")]})}),l.canUpdateIncidentReport&&e.jsx(m,{asChild:!0,className:"bg-white/20 dark:bg-white/10 backdrop-blur-md border-white/30 dark:border-white/20 text-white hover:bg-white/30 dark:hover:bg-white/20 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsx(x,{href:route("incident-reports.edit",s.id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-white/20 dark:bg-white/10 rounded-lg",children:e.jsx(fe,{className:"h-4 w-4"})}),t("incident_reports.actions.edit_report")]})})}),l.canViewIncidentReport&&e.jsx(m,{asChild:!0,className:"bg-white/20 dark:bg-white/10 backdrop-blur-md border-white/30 dark:border-white/20 text-white hover:bg-white/30 dark:hover:bg-white/20 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsx(x,{href:route("incident-reports.print",s.id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-white/20 dark:bg-white/10 rounded-lg",children:e.jsx(ue,{className:"h-4 w-4"})}),t("incident_reports.actions.print_report")]})})})]})}),l.currentAccess&&e.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",className:"bg-white/20 dark:bg-white/10 backdrop-blur-sm border-white/30 dark:border-white/20 text-white px-3 py-1 text-sm font-medium",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),l.currentAccess.access_type==="full"&&t("incident_reports.access.full"),l.currentAccess.access_type==="read_only"&&t("incident_reports.access.read_only"),l.currentAccess.access_type==="incidents_only"&&t("incident_reports.access.incidents_only")]}),e.jsxs(h,{variant:"outline",className:"bg-white/20 dark:bg-white/10 backdrop-blur-sm border-white/30 dark:border-white/20 text-white px-3 py-1 text-sm font-medium",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),l.isReportSpecific()?t("incident_reports.access.report_specific"):t("incident_reports.access.global")]}),l.currentAccess.expires_at&&e.jsxs(h,{variant:"outline",className:y("backdrop-blur-sm text-white px-3 py-1 text-sm font-medium",new Date(l.currentAccess.expires_at)<new Date(Date.now()+7*24*60*60*1e3)?"bg-yellow-500/20 dark:bg-yellow-500/30 border-yellow-300/30 dark:border-yellow-400/40":"bg-white/20 dark:bg-white/10 border-white/30 dark:border-white/20"),children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),t("incident_reports.access.expires"),": ",p(new Date(l.currentAccess.expires_at),"PP")]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-12",children:[e.jsxs(v,{className:"md:col-span-4 border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-violet-50/30 dark:to-violet-900/20",children:[e.jsxs(g,{className:"bg-gradient-to-l from-violet-500 dark:from-violet-600 to-violet-600 dark:to-violet-700 text-white border-b pb-4",children:[e.jsxs(b,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(j,{className:"h-5 w-5"})}),t("incident_reports.form.info_title")]}),e.jsx(w,{className:"text-violet-100",children:t("incident_reports.details.long_description")})]}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-violet-600 dark:text-violet-400 dark:text-violet-400 mb-3 flex items-center gap-2",dir:"rtl",children:[e.jsx(j,{className:"h-4 w-4"}),t("incident_reports.show.report_info")]}),e.jsxs("div",{className:"rounded-xl border border-violet-100 dark:border-violet-800 bg-gradient-to-l from-violet-50 dark:from-violet-900/30 to-white dark:to-gray-800 p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(j,{className:"h-4 w-4"}),t("incident_reports.show.report_number"),":"]}),e.jsx("span",{className:"text-sm text-violet-900 dark:text-violet-100 font-semibold",children:s.report_number})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(je,{className:"h-4 w-4"}),t("incident_reports.show.report_date_label"),":"]}),e.jsx("span",{className:"text-sm text-violet-900 dark:text-violet-100",children:p(new Date(s.report_date),"PPP")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(N,{className:"h-4 w-4"}),t("incident_reports.show.status"),":"]}),e.jsx(h,{variant:"outline",className:"bg-gradient-to-l from-violet-100 dark:from-violet-900/30 to-violet-200 dark:to-violet-800/30 text-violet-800 dark:text-violet-200 border-violet-300 dark:border-violet-700 px-3 py-1 text-xs font-medium",children:t(`incident_reports.status.${s.report_status}`)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(u,{className:"h-4 w-4"}),t("incident_reports.show.security_level"),":"]}),e.jsx(h,{variant:"outline",className:"bg-gradient-to-l from-violet-100 dark:from-violet-900/30 to-violet-200 dark:to-violet-800/30 text-violet-800 dark:text-violet-200 border-violet-300 dark:border-violet-700 px-3 py-1 text-xs font-medium",children:t(`incident_reports.level.${s.security_level}`)})]}),s.source&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(we,{className:"h-4 w-4"}),t("incident_reports.show.source_label"),":"]}),e.jsx("span",{className:"text-sm text-violet-900 dark:text-violet-100",children:s.source})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-violet-600 dark:text-violet-400 mb-3 flex items-center gap-2",dir:"rtl",children:[e.jsx(Ne,{className:"h-4 w-4"}),t("incident_reports.show.user_info")]}),e.jsxs("div",{className:"rounded-xl border border-violet-100 dark:border-violet-800 bg-gradient-to-l from-violet-50 dark:from-violet-900/30 to-white dark:to-gray-800 p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(L,{className:"h-4 w-4"}),t("incident_reports.show.submitted_by"),":"]}),e.jsx("span",{className:"text-sm text-violet-900 dark:text-violet-100",children:((D=s.submitter)==null?void 0:D.name)||t("incidents.unknown")})]}),s.approver&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(L,{className:"h-4 w-4"}),t("incident_reports.show.approved_by"),":"]}),e.jsx("span",{className:"text-sm text-violet-900 dark:text-violet-100",children:(P=s.approver)==null?void 0:P.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(N,{className:"h-4 w-4"}),t("incident_reports.show.created_at"),":"]}),e.jsx("span",{className:"text-sm text-violet-900 dark:text-violet-100",children:p(new Date(s.created_at),"PPP")})]}),s.updated_at!==s.created_at&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium flex items-center gap-2",dir:"rtl",children:[e.jsx(N,{className:"h-4 w-4"}),t("incident_reports.show.last_updated"),":"]}),e.jsx("span",{className:"text-sm text-violet-900 dark:text-violet-100",children:p(new Date(s.updated_at),"PPP")})]})]})]})]})})]}),e.jsx("div",{className:"md:col-span-8 space-y-8",children:e.jsxs(v,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-violet-50/30 dark:to-violet-900/20",children:[e.jsxs(g,{className:"bg-gradient-to-l from-violet-500 dark:from-violet-600 to-violet-600 dark:to-violet-700 text-white border-b pb-4",children:[e.jsxs(b,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(ke,{className:"h-5 w-5"})}),t("incident_reports.details.title")]}),e.jsx(w,{className:"text-violet-100",children:t("incident_reports.details.long_description")})]}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-violet-600 dark:text-violet-400 mb-3 flex items-center gap-2",dir:"rtl",children:[e.jsx(j,{className:"h-4 w-4"}),t("incident_reports.details.details_label")]}),e.jsx("div",{className:"rounded-xl border border-violet-100 dark:border-violet-800 bg-gradient-to-l from-violet-50 dark:from-violet-900/30 to-white dark:to-gray-800 p-4",children:e.jsx("p",{className:"text-sm text-violet-900 dark:text-violet-100 whitespace-pre-wrap",dir:"rtl",children:s.details})})]}),s.action_taken&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-violet-600 dark:text-violet-400 mb-3 flex items-center gap-2",dir:"rtl",children:[e.jsx(_e,{className:"h-4 w-4"}),t("incident_reports.details.action_taken_label")]}),e.jsx("div",{className:"rounded-xl border border-violet-100 dark:border-violet-800 bg-gradient-to-l from-violet-50 dark:from-violet-900/30 to-white dark:to-gray-800 p-4",children:e.jsx("p",{className:"text-sm text-violet-900 dark:text-violet-100 whitespace-pre-wrap",dir:"rtl",children:s.action_taken})})]}),s.recommendation&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-violet-600 dark:text-violet-400 mb-3 flex items-center gap-2",dir:"rtl",children:[e.jsx(ye,{className:"h-4 w-4"}),t("incident_reports.details.recommendation_label")]}),e.jsx("div",{className:"rounded-xl border border-violet-100 dark:border-violet-800 bg-gradient-to-l from-violet-50 dark:from-violet-900/30 to-white dark:to-gray-800 p-4",children:e.jsx("p",{className:"text-sm text-violet-900 dark:text-violet-100 whitespace-pre-wrap",dir:"rtl",children:s.recommendation})})]})]})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(Z,{defaultValue:"incidents",className:"w-full",children:[e.jsxs(ee,{className:"grid w-full grid-cols-2 mb-6 rounded-xl p-1 bg-gradient-to-l from-violet-100 dark:from-violet-900/30 to-violet-200 dark:to-violet-800/30 shadow-lg",children:[e.jsxs(U,{value:"incidents",className:y("data-[state=active]:bg-gradient-to-l data-[state=active]:from-violet-500 data-[state=active]:to-violet-600 data-[state=active]:text-white data-[state=active]:shadow-lg flex items-center gap-2","transition-all duration-300 rounded-lg"),children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:t("incidents.page_title")})]}),e.jsxs(U,{value:"stats",className:y("data-[state=active]:bg-gradient-to-l data-[state=active]:from-violet-500 data-[state=active]:to-violet-600 data-[state=active]:text-white data-[state=active]:shadow-lg flex items-center gap-2","transition-all duration-300 rounded-lg"),children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:t("incident_reports.stats.title")})]})]}),e.jsx(F,{value:"incidents",children:e.jsxs(v,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-violet-50/30 dark:to-violet-900/20",children:[e.jsxs(g,{className:"bg-gradient-to-l from-violet-500 dark:from-violet-600 to-violet-600 dark:to-violet-700 text-white border-b pb-4",children:[e.jsxs(b,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(A,{className:"h-5 w-5"})}),t("incidents.page_title")]}),e.jsx(w,{className:"text-violet-100",children:t("incident_reports.incidents.card_description")})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(m,{asChild:!0,className:"bg-gradient-to-l from-violet-500 to-violet-600 hover:from-violet-600 hover:to-violet-700 text-white shadow-lg dark:from-violet-600 dark:to-violet-700 dark:hover:from-violet-700 dark:hover:to-violet-800",children:e.jsxs(x,{href:route("incident-reports.incidents",s.id),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),t("incident_reports.incidents.view_all")]})})}),e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-violet-50/50 dark:hover:bg-violet-900/20 data-[state=selected]:bg-violet-50 dark:data-[state=selected]:bg-violet-900/20",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-violet-700 dark:text-violet-300",children:t("incidents.table.title")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-violet-700 dark:text-violet-300",children:t("incidents.table.date")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-violet-700 dark:text-violet-300",children:t("incidents.table.category")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-violet-700 dark:text-violet-300",children:t("incidents.table.severity")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-violet-700 dark:text-violet-300",children:t("common.actions")})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"h-12 px-4 text-center align-middle text-violet-600 dark:text-violet-400",children:t("incidents.no_incidents")})}):r.data.map(i=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-violet-50/50 dark:hover:bg-violet-900/20 data-[state=selected]:bg-violet-50 dark:data-[state=selected]:bg-violet-900/20",children:[e.jsx("td",{className:"p-4 align-middle text-violet-900 dark:text-violet-100",children:i.title}),e.jsx("td",{className:"p-4 align-middle text-violet-900 dark:text-violet-100",children:p(new Date(i.incident_date),"PP")}),e.jsx("td",{className:"p-4 align-middle",children:i.category?e.jsx(h,{style:{backgroundColor:i.category.color,color:"#fff"},children:i.category.name}):t("incidents.none")}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(h,{variant:i.severity==="high"?"destructive":i.severity==="medium"?"warning":"default",children:i.severity})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(m,{variant:"ghost",size:"sm",asChild:!0,className:"text-violet-600 dark:text-violet-400 hover:text-violet-700 dark:text-violet-300 hover:bg-violet-50",children:e.jsx(x,{href:route("incidents.show",i.id),children:t("incident_reports.view")})})})]},i.id))})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(Q,{links:r.links})})]})]})}),e.jsx(F,{value:"stats",children:e.jsxs(v,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-violet-50/30 dark:to-violet-900/20",children:[e.jsxs(g,{className:"bg-gradient-to-l from-violet-500 dark:from-violet-600 to-violet-600 dark:to-violet-700 text-white border-b pb-4",children:[e.jsxs(b,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx($,{className:"h-5 w-5"})}),t("incident_reports.stats.title")]}),e.jsx(w,{className:"text-violet-100",children:t("incident_reports.stats.description")})]}),e.jsxs(f,{className:"p-6",children:[l.canUpdateIncidentReport&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(m,{asChild:!0,className:"bg-gradient-to-l from-violet-500 to-violet-600 hover:from-violet-600 hover:to-violet-700 text-white shadow-lg dark:from-violet-600 dark:to-violet-700 dark:hover:from-violet-700 dark:hover:to-violet-800",children:e.jsxs(x,{href:route("incident-reports.edit",s.id),children:[e.jsx(Ae,{className:"mr-2 h-4 w-4"}),t("incident_reports.stats.edit")]})})}),Object.keys(c).length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("p",{className:"text-violet-600 dark:text-violet-400",children:t("incident_reports.stats.empty")}),l.canUpdateIncidentReport&&e.jsx(m,{variant:"outline",asChild:!0,className:"mt-4 border-violet-300 dark:border-violet-600 text-violet-700 dark:text-violet-300 hover:bg-violet-50 dark:hover:bg-violet-900/20",children:e.jsxs(x,{href:route("incident-reports.edit",s.id),children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),t("incident_reports.stats.add_data")]})})]}):e.jsxs("div",{className:"space-y-6",children:[o.length>1&&a.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx(te,{htmlFor:"category-filter",className:"text-violet-700 dark:text-violet-300 font-medium",children:t("incident_reports.stats.filter_by_category")}),e.jsxs(se,{onValueChange:i=>G(i==="all"?null:parseInt(i)),defaultValue:"all",children:[e.jsx(re,{id:"category-filter",className:"border-violet-200 dark:border-violet-700 focus:border-violet-500 dark:focus:border-violet-400 focus:ring-violet-500/20 dark:focus:ring-violet-400/20 bg-gradient-to-l from-violet-50 dark:from-violet-900/30 to-white dark:to-gray-800",children:e.jsx(ie,{placeholder:t("incident_reports.stats.select_category")})}),e.jsxs(ae,{children:[e.jsx(V,{value:"all",children:t("incidents.filters.all_categories")}),o.filter(i=>Object.entries(c).some(([d])=>c[d][0].stat_category_item.category.id===i.id)).map(i=>e.jsx(V,{value:i.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:i.color}}),i.label]})},i.id))]})]})]}),z.map(([i,d])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-medium text-violet-700 dark:text-violet-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:d[0].stat_category_item.category.color}}),i]})}),e.jsxs(W,{children:[e.jsx(X,{children:e.jsxs(O,{className:"bg-violet-50 dark:bg-violet-900/30",children:[e.jsx(k,{className:"text-violet-700 dark:text-violet-300 font-medium",children:t("incident_reports.stats.table.item")}),e.jsx(k,{className:"text-violet-700 dark:text-violet-300 font-medium",children:t("incident_reports.stats.table.value")}),e.jsx(k,{className:"text-violet-700 dark:text-violet-300 font-medium",children:t("incident_reports.stats.table.notes")})]})}),e.jsx(Y,{children:d.map(n=>e.jsxs(O,{className:"hover:bg-violet-50/50 dark:hover:bg-violet-900/20",children:[e.jsx(_,{className:"text-violet-900 dark:text-violet-100",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:n.stat_category_item.color||n.stat_category_item.category.color}}),e.jsx("span",{children:n.stat_category_item.label})]})}),e.jsx(_,{className:"text-violet-900 dark:text-violet-100 font-medium",children:q(n)}),e.jsx(_,{className:"text-violet-900 dark:text-violet-100",children:n.notes||"-"})]},n.id))})]})]},i))]})]})]})})]})})]}),e.jsx(de,{open:H,onOpenChange:C,children:e.jsxs(ce,{className:"max-w-md bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(ne,{children:[e.jsx(me,{className:"text-xl text-gray-900 dark:text-gray-100",children:t("incident_reports.delete_dialog.title")}),e.jsx(xe,{className:"mt-2 text-gray-600 dark:text-gray-400",children:t("incident_reports.delete_dialog.description",{number:s.report_number})})]}),e.jsxs(he,{className:"mt-6",children:[e.jsx(pe,{className:"shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",children:t("incident_reports.delete_dialog.cancel")}),e.jsx(ve,{onClick:M,className:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",children:t("incident_reports.delete_dialog.confirm")})]})]})})]})}export{_t as default};

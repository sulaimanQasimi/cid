import{r as l,j as e,L,$ as g,S as f}from"./app-Dpa8Mw3a.js";import{A as M}from"./app-layout-KS4ZWDuL.js";import{B as b}from"./button-BovskyHP.js";import{H as k}from"./header-By9VsQxK.js";import{S as Q}from"./SearchFilters-BFKWKjCm.js";import{T as V,a as q,b as v,c as m,d as G,e as d}from"./table-Q7qTtagI.js";import{B as J}from"./badge-BRSlEmcD.js";import{C as K,d as W}from"./card-T66pFWB-.js";import{A as X,a as Y,b as ee,c as te,d as re,e as se,f as ae,g as oe}from"./alert-dialog-CQtGFM8f.js";import{u as le}from"./translate-HZomKBkO.js";import{u as ie}from"./use-permissions-CknpK3ci.js";import{C as ne,a as ce,b as de}from"./permission-guard-DosNsWVL.js";import{P as pe}from"./pagination-Gy4MouKr.js";import{M as w}from"./map-pin-Cv7EuQHI.js";import{T as me}from"./trending-up-D9fX9TM2.js";import{E as he}from"./eye-DuyRId54.js";import{P as ue}from"./pencil-CbShOZwK.js";import{T as xe}from"./trash-Bl6DQ6lq.js";import{T as ge}from"./triangle-alert-BnBHvMxc.js";import"./utils-DueTybL-.js";import"./index-VbilsNxZ.js";import"./createLucideIcon-cRJugfto.js";import"./index-ClXbMXOW.js";import"./index-DsVxkLMa.js";import"./index-C78t6nrx.js";import"./x-DZIFbQwF.js";import"./index-BCJNFKuF.js";import"./avatar-KX0QfjZ3.js";import"./file-text-YbYT_577.js";import"./users-B6Oil1LJ.js";import"./tag-DEZBMSTU.js";import"./qr-code-CxFcn35d.js";import"./chart-column-cGegRabh.js";import"./database-BqHSan2y.js";import"./arrow-left-D2iBQ-z9.js";import"./plus-xyLdybCb.js";import"./select-DkoVjQQ-.js";import"./index-BkJeBnqw.js";import"./check-BEXHyh2e.js";import"./input-2B8gUPrT.js";import"./search-B2wtCM5S.js";import"./filter-x-CfYpOzMr.js";import"./arrow-up-down-3Ys2MXu1.js";const fe=[{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"},{value:"code:asc",label:"Code (A-Z)"},{value:"code:desc",label:"Code (Z-A)"},{value:"province:asc",label:"Province (A-Z)"},{value:"province:desc",label:"Province (Z-A)"},{value:"status:asc",label:"Status (A-Z)"},{value:"status:desc",label:"Status (Z-A)"},{value:"created_at:desc",label:"Created Date (Newest)"},{value:"created_at:asc",label:"Created Date (Oldest)"}],je=[{value:10,label:"10 per page"},{value:25,label:"25 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}];function nt({districts:a={data:[],links:[],meta:void 0},provinces:A=[],filters:i={}}){ie();const{t:r}=le(),T=[{title:r("dashboard.page_title"),href:route("dashboard")},{title:r("districts.page_title"),href:"#"}],[_,C]=l.useState(i.search||""),[p,y]=l.useState(i.sort_field||"name"),[n,j]=l.useState(i.sort_direction||"asc"),[c,N]=l.useState(i.province_id||"all"),[P,u]=l.useState(!1),[h,S]=l.useState(null),D=l.useRef(!0),x=l.useRef({sortField:i.sort_field,sortDirection:i.sort_direction,provinceId:i.province_id}),F=[{value:"all",label:r("districts.all_provinces")},...A.map(t=>({value:t.id.toString(),label:t.name}))],E=()=>{try{const t={search:_,sort_field:p,sort_direction:n,province_id:c==="all"?"":c},s=route("districts.index"),o={preserveState:!0,replace:!0};setTimeout(()=>{f.get(s,t,o)},0)}catch(t){console.error("Error applying search:",t)}},O=()=>{try{const t={search:i.search||"",sort_field:p,sort_direction:n,province_id:c==="all"?"":c},s=route("districts.index"),o={preserveState:!0,replace:!0};setTimeout(()=>{f.get(s,t,o)},0)}catch(t){console.error("Error applying filters:",t)}};l.useEffect(()=>{if(D.current){D.current=!1;return}const t=p!==x.current.sortField,s=n!==x.current.sortDirection,o=c!==x.current.provinceId;(t||s||o)&&(x.current={sortField:p,sortDirection:n,provinceId:c},O())},[p,n,c]);const Z=t=>{t.preventDefault(),E()},I=t=>{const[s,o]=t.split(":");y(s),j(o)},B=()=>{j(n==="asc"?"desc":"asc")},H=t=>{console.log("Per page changed to:",t)},R=t=>{N(t==="all"?"":t)},U=()=>{C(""),y("name"),j("asc"),N("all");try{const t={search:"",sort_field:"name",sort_direction:"asc",province_id:""},s=route("districts.index"),o={preserveState:!0,replace:!0};setTimeout(()=>{f.get(s,t,o)},0)}catch(t){console.error("Error clearing filters:",t)}},z=t=>{S(t),u(!0)},$=()=>{h&&f.delete(route("districts.destroy",h.id),{onSuccess:()=>{S(null),u(!1)}})};return e.jsxs(M,{breadcrumbs:T,children:[e.jsx(L,{title:r("districts.page_title")}),e.jsx(X,{open:P,onOpenChange:u,children:e.jsxs(Y,{children:[e.jsxs(ee,{children:[e.jsx(te,{children:r("districts.delete_dialog.title")}),e.jsx(re,{children:r("districts.delete_dialog.description",{name:(h==null?void 0:h.name)||""})})]}),e.jsxs(se,{children:[e.jsx(ae,{onClick:()=>u(!1),children:r("districts.delete_dialog.cancel")}),e.jsx(oe,{onClick:$,className:"bg-red-600 hover:bg-red-700",children:r("districts.delete_dialog.confirm")})]})]})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(k,{title:r("districts.page_title"),description:r("districts.page_description"),icon:e.jsx(w,{className:"h-6 w-6"}),model:"district",routeName:()=>route("districts.create"),buttonText:r("districts.add_button"),theme:"purple",buttonSize:"lg"}),e.jsx(Q,{searchQuery:_,onSearchChange:C,onSearchSubmit:Z,searchPlaceholder:r("districts.search_placeholder"),filters:{sort:`${p}:${n}`,direction:n,per_page:10},onTypeChange:()=>{},onCategoryChange:()=>{},onDepartmentChange:R,onSortChange:I,onDirectionChange:B,onPerPageChange:H,onResetFilters:U,types:[],categories:[],departments:F,sortOptions:fe,perPageOptions:je,title:r("districts.search_filters"),description:r("districts.find_and_filter"),className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden"}),e.jsxs("div",{className:"mt-8",children:[e.jsx(k,{title:r("districts.table.title"),description:r("districts.table.description"),icon:e.jsx(me,{className:"h-6 w-6"}),model:"district",routeName:()=>"",buttonText:"",theme:"purple",showButton:!1}),e.jsx(K,{className:"shadow-lg",children:e.jsx(W,{className:"p-0",children:e.jsxs(V,{children:[e.jsx(q,{children:e.jsxs(v,{className:"bg-gradient-to-l from-purple-100 to-purple-200 dark:from-purple-900 dark:to-purple-800 border-0",children:[e.jsx(m,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:r("districts.table.name")}),e.jsx(m,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:r("districts.table.code")}),e.jsx(m,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:r("districts.table.province")}),e.jsx(m,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:r("districts.table.status")}),e.jsx(m,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:r("districts.table.created_by")}),e.jsx(m,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6 text-right",children:r("districts.table.actions")})]})}),e.jsx(G,{children:a!=null&&a.data&&a.data.length>0?a.data.map(t=>{var s;return e.jsxs(v,{children:[e.jsx(d,{children:e.jsxs(g,{href:route("districts.show",t.id),className:"font-bold hover:underline flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),t.name]})}),e.jsx(d,{className:"font-bold",children:t.code}),e.jsx(d,{children:t.province?e.jsx(g,{href:route("provinces.show",t.province.id),className:"hover:underline",children:t.province.name}):"-"}),e.jsx(d,{children:e.jsx(J,{variant:t.status==="active"?"default":"secondary",children:t.status})}),e.jsx(d,{children:((s=t.creator)==null?void 0:s.name)||"-"}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(ne,{model:"district",children:e.jsx(b,{variant:"ghost",size:"icon",asChild:!0,title:r("districts.actions.view"),children:e.jsx(g,{href:route("districts.show",t.id),children:e.jsx(he,{className:"h-4 w-4"})})})}),e.jsx(ce,{model:"district",children:e.jsx(b,{variant:"ghost",size:"icon",asChild:!0,title:r("districts.actions.edit"),children:e.jsx(g,{href:route("districts.edit",t.id),children:e.jsx(ue,{className:"h-4 w-4"})})})}),e.jsx(de,{model:"district",children:e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>z(t),title:r("districts.actions.delete"),children:e.jsx(xe,{className:"h-4 w-4"})})})]})})]},t.id)}):e.jsx(v,{children:e.jsx(d,{colSpan:6,className:"h-32 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-muted-foreground dark:text-gray-400",children:[e.jsx(ge,{className:"h-16 w-16 text-gray-400 dark:text-gray-500"}),e.jsx("p",{className:"text-xl font-bold text-gray-600 dark:text-gray-300",children:r("districts.no_records")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r("districts.no_records_description")})]})})})})]})})})]}),(a==null?void 0:a.links)&&a.links.length>0&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:"bg-gradient-to-l from-purple-50 to-white dark:from-purple-900/20 dark:to-gray-800 p-4 rounded-3xl shadow-2xl border border-purple-200 dark:border-purple-700",children:e.jsx(pe,{links:a.links})})})]})]})}export{nt as default};

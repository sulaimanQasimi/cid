import{m as G,r as v,j as e,L as O}from"./app-Dpa8Mw3a.js";import{C as g,a as x,b as p,c as h,d as u}from"./card-T66pFWB-.js";import{I as f}from"./input-2B8gUPrT.js";import{L as s}from"./label-CDpBzEcw.js";import{T as b}from"./textarea-DWmjdtcI.js";import{S as w,a as y,b as C,c as S,d as m}from"./select-DkoVjQQ-.js";import{A as U}from"./app-layout-KS4ZWDuL.js";import{T as J}from"./TreeViewStatSelector-CyWd0VMI.js";import{u as K}from"./translate-HZomKBkO.js";import{H as M}from"./header-By9VsQxK.js";import{F as P}from"./FooterButtons-BYUtsgtr.js";import{S as F,T as a}from"./triangle-alert-BnBHvMxc.js";import{F as j}from"./file-text-YbYT_577.js";import{C as T}from"./calendar-CkZifxsd.js";import{U as Q}from"./users-B6Oil1LJ.js";import{B as W}from"./book-text-uL4M8Szh.js";import{G as X}from"./gavel-C_ZQsDED.js";import{F as Y}from"./file-check-CCrIY3Fc.js";import{B as Z}from"./building-2-BCdq-5lp.js";import"./utils-DueTybL-.js";import"./index-C78t6nrx.js";import"./index-ClXbMXOW.js";import"./index-DsVxkLMa.js";import"./index-VbilsNxZ.js";import"./createLucideIcon-cRJugfto.js";import"./index-BkJeBnqw.js";import"./check-BEXHyh2e.js";import"./button-BovskyHP.js";import"./x-DZIFbQwF.js";import"./index-BCJNFKuF.js";import"./avatar-KX0QfjZ3.js";import"./tag-DEZBMSTU.js";import"./qr-code-CxFcn35d.js";import"./chart-column-cGegRabh.js";import"./map-pin-Cv7EuQHI.js";import"./database-BqHSan2y.js";import"./permission-guard-DosNsWVL.js";import"./arrow-left-D2iBQ-z9.js";import"./plus-xyLdybCb.js";import"./save-B3deow47.js";const $=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Reports",href:route("incident-reports.index")},{title:"Create",href:route("incident-reports.create")}];function Ge({securityLevels:ee,statItems:k,statCategories:B}){const{t}=K(),{data:n,setData:d,post:D,processing:L,errors:i}=G({report_date:new Date().toISOString().split("T")[0],security_level:"normal",details:"",report_status:"submitted",report_number:"",action_taken:"",recommendation:"",source:""}),[_,N]=v.useState({}),[c,I]=v.useState(null);function V(){window.location.href=route("incident-reports.index")}function z(){const r=Object.entries(_).filter(([l,{value:o}])=>o.trim()!=="").map(([l,{value:o,notes:E}])=>({stat_category_item_id:parseInt(l),value:o,notes:E||void 0}));r.length>0&&d("stats",r),D(route("incident-reports.store"))}const A=B.map(r=>({id:r.id,label:r.label,color:r.color})),H=c?k.filter(r=>r.category.id===c):k;function R(r,l){N(o=>({...o,[r]:{...o[r]||{notes:null},value:l}}))}function q(r,l){N(o=>({...o,[r]:{...o[r]||{value:""},notes:l||null}}))}return e.jsxs(U,{breadcrumbs:$,children:[e.jsx(O,{title:t("incident_reports.create.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(M,{title:t("incident_reports.create.page_title"),description:t("incident_reports.create.page_description"),icon:e.jsx(F,{className:"h-5 w-5"}),model:"incident_reports",routeName:()=>route("incident-reports.index"),buttonText:t("common.back"),theme:"indigo",showBackButton:!0,backRouteName:()=>route("incident-reports.index"),backButtonText:t("common.back"),showButton:!1}),e.jsx("form",{children:e.jsxs("div",{className:"grid gap-8",children:[e.jsxs(g,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(x,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(p,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(j,{className:"h-5 w-5"})}),t("incident_reports.form.info_title")]}),e.jsx(h,{className:"text-indigo-100",children:t("incident_reports.form.info_description")})]}),e.jsxs(u,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(s,{htmlFor:"report_number",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.report_number_label"),e.jsx(j,{className:"h-4 w-4"})]}),e.jsx(f,{id:"report_number",value:n.report_number,onChange:r=>d("report_number",r.target.value),placeholder:t("incident_reports.form.report_number_placeholder"),className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.report_number&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),i.report_number]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(s,{htmlFor:"report_date",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[e.jsx("span",{className:"text-red-500",children:"*"}),t("incident_reports.form.report_date"),e.jsx(T,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{id:"report_date",type:"date",value:n.report_date,onChange:r=>d("report_date",r.target.value),required:!0,className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-indigo-400 pointer-events-none"})]}),i.report_date&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),i.report_date]})]})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(s,{htmlFor:"security_level",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.security_level"),e.jsx(F,{className:"h-4 w-4"})]}),e.jsxs(w,{value:n.security_level,onValueChange:r=>d("security_level",r),children:[e.jsx(y,{id:"security_level",className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(C,{placeholder:t("incident_reports.form.security_level_placeholder")})}),e.jsxs(S,{children:[e.jsx(m,{value:"normal",children:t("incident_reports.level.normal")}),e.jsx(m,{value:"restricted",children:t("incident_reports.level.restricted")}),e.jsx(m,{value:"classified",children:t("incident_reports.level.classified")})]})]}),i.security_level&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),i.security_level]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(s,{htmlFor:"source",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.source_label"),e.jsx(Q,{className:"h-4 w-4"})]}),e.jsx(f,{id:"source",value:n.source,onChange:r=>d("source",r.target.value),placeholder:t("incident_reports.form.source_placeholder"),className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.source&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),i.source]})]})]})]})]}),e.jsxs(g,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(x,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(p,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(W,{className:"h-5 w-5"})}),t("incident_reports.details.title")]}),e.jsx(h,{className:"text-indigo-100",children:t("incident_reports.details.description")})]}),e.jsxs(u,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(s,{htmlFor:"details",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[e.jsx("span",{className:"text-red-500",children:"*"}),t("incident_reports.details.details_label"),e.jsx(j,{className:"h-4 w-4"})]}),e.jsx(b,{id:"details",rows:5,value:n.details,onChange:r=>d("details",r.target.value),placeholder:t("incident_reports.details.details_placeholder"),required:!0,className:"min-h-[120px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.details&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),i.details]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(s,{htmlFor:"action_taken",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.details.action_taken_label"),e.jsx(X,{className:"h-4 w-4"})]}),e.jsx(b,{id:"action_taken",rows:3,value:n.action_taken,onChange:r=>d("action_taken",r.target.value),placeholder:t("incident_reports.details.action_taken_placeholder"),className:"min-h-[80px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.action_taken&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),i.action_taken]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(s,{htmlFor:"recommendation",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.details.recommendation_label"),e.jsx(Y,{className:"h-4 w-4"})]}),e.jsx(b,{id:"recommendation",rows:3,value:n.recommendation,onChange:r=>d("recommendation",r.target.value),placeholder:t("incident_reports.details.recommendation_placeholder"),className:"min-h-[80px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.recommendation&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),i.recommendation]})]}),e.jsx("input",{type:"hidden",name:"report_status",value:"submitted"})]})]}),e.jsxs(g,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(x,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(p,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(a,{className:"h-5 w-5"})}),t("incident_reports.stats.title")]}),e.jsx(h,{className:"text-indigo-100",children:t("incident_reports.stats.description")})]}),e.jsxs(u,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(s,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.stats.filter_by_category"),e.jsx(Z,{className:"h-4 w-4"})]}),e.jsxs(w,{value:(c==null?void 0:c.toString())||"all",onValueChange:r=>I(r!=="all"?parseInt(r):null),children:[e.jsx(y,{id:"category-filter",className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(C,{placeholder:t("incidents.filters.all_categories")})}),e.jsxs(S,{children:[e.jsx(m,{value:"all",children:t("incidents.filters.all_categories")}),A.map(r=>e.jsx(m,{value:r.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:r.color}}),r.label]})},r.id))]})]})]}),e.jsx(J,{items:H,statsData:_,onValueChange:R,onNotesChange:q})]})]}),e.jsx(P,{onCancel:V,onSubmit:z,processing:L,cancelText:t("common.cancel"),submitText:t("incident_reports.actions.create"),savingText:t("incident_reports.actions.submitting")})]})})]})]})}export{Ge as default};

import{m as z,r as l,j as e,L as U,$ as E}from"./app-Dxyb4tjP.js";import{A as H}from"./app-layout-CargaESm.js";import{B as O}from"./button-B5hvMkID.js";import{C as b,d as j}from"./card-gqeyKRBF.js";import{I as N}from"./input-Djp4Y3g5.js";import{L as c}from"./label-BEuuk8Bb.js";import{T as R}from"./textarea-CDHvULRK.js";import{u as $}from"./translate-DRO0aTlv.js";import{u as q}from"./use-permissions-C19b-n5Q.js";import{c as P}from"./permission-guard-CaUn-EsK.js";import{S as X,a as G,b as J,c as K,d as w}from"./select-Di7pumQ8.js";import{T as M}from"./TreeViewStatSelector-CrF8C1Gd.js";import{H as v}from"./header-Co4vZbwI.js";import{F as Q}from"./FooterButtons-D_aW5sQK.js";import{A as W}from"./arrow-left-L8xK0F6t.js";import{F as h}from"./file-text-BnK35OVo.js";import{X as u}from"./x-CVKsxXZd.js";import{C as Y}from"./chart-column-CZi6LORu.js";import{T as k}from"./triangle-alert-WR4Fy3YO.js";import{B as Z}from"./building-2-Dx01J68u.js";import"./utils-D08MpAnR.js";import"./index-C7TBSawa.js";import"./createLucideIcon-CizsRpcm.js";import"./index-CB9xN6kO.js";import"./index-7JOkQmzC.js";import"./index-feeDSjWk.js";import"./index-D4hpdsSW.js";import"./avatar-BqGbTpCc.js";import"./users-DVBdamvi.js";import"./tag-Do7YviEf.js";import"./qr-code-Dfcoi-Zo.js";import"./map-pin-BtG_j5Tk.js";import"./building-DY95iLU8.js";import"./database-DXZEawtm.js";import"./index-DzqPr8y_.js";import"./check-2pcRHOH3.js";import"./plus-DIcRBO1D.js";import"./save-FoZtOb5y.js";function Re({statItems:x,statCategories:C,users:S}){const{t:r}=$();q();const{data:d,setData:o,post:y,processing:T,errors:s}=z({name:"",code:"",description:"",access_users:[]}),[p,f]=l.useState({}),[n,B]=l.useState(null),[ee,te]=l.useState([]),[g,re]=l.useState(""),F=[{title:r("info.page_title"),href:route("national-insight-center-infos.index")},{title:r("national_insight_center_info.page_title"),href:route("national-insight-center-infos.index")},{title:r("national_insight_center_info.create.page_title"),href:"#"}],L=t=>{t.preventDefault();const i=Object.entries(p).filter(([a,{value:m}])=>m.trim()!=="").map(([a,{value:m,notes:V}])=>({stat_category_item_id:parseInt(a),value:m,notes:V||void 0}));i.length>0&&o("stats",i),y(route("national-insight-center-infos.store"))},A=C.map(t=>({id:t.id,label:t.label,color:t.color})),_=n?x.filter(t=>t.category.id===n):x;function I(t,i){f(a=>({...a,[t]:{...a[t]||{notes:null},value:i}}))}function D(t,i){f(a=>({...a,[t]:{...a[t]||{value:""},notes:i||null}}))}return Object.keys(p).length,S.filter(t=>t.name.toLowerCase().includes(g.toLowerCase())||t.email.toLowerCase().includes(g.toLowerCase())),e.jsxs(H,{breadcrumbs:F,children:[e.jsx(U,{title:r("national_insight_center_info.create.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(v,{title:r("national_insight_center_info.create.page_title"),description:r("national_insight_center_info.create.page_description"),icon:e.jsx(h,{className:"h-6 w-6 text-white"}),model:"national_insight_center_info",routeName:"national-insight-center-infos.create",buttonText:r("national_insight_center_info.create.save_button"),theme:"purple",buttonSize:"lg",showBackButton:!0,backRouteName:"national-insight-center-infos.index",backButtonText:r("national_insight_center_info.create.back_button"),showButton:!1,actionButtons:e.jsx(e.Fragment,{children:e.jsx(O,{asChild:!0,variant:"outline",size:"lg",className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 shadow-2xl rounded-2xl px-6 py-3 text-lg font-semibold transition-all duration-300 hover:scale-105",children:e.jsxs(E,{href:route("national-insight-center-infos.index"),className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-5 w-5"}),r("national_insight_center_info.create.back_button")]})})})}),e.jsx(P,{model:"national_insight_center_info",children:e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"grid gap-8",children:[e.jsx(b,{className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden",children:e.jsxs(j,{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(c,{htmlFor:"name",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),r("national_insight_center_info.create.name_label")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{id:"name",value:d.name,onChange:t=>o("name",t.target.value),required:!0,className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:r("national_insight_center_info.create.name_placeholder")}),s.name&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:s.name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(c,{htmlFor:"code",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),r("national_insight_center_info.create.code_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{id:"code",value:d.code,onChange:t=>o("code",t.target.value),className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:r("national_insight_center_info.create.code_placeholder")}),s.code&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:s.code})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(c,{htmlFor:"description",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),r("national_insight_center_info.create.description_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{id:"description",value:d.description,onChange:t=>o("description",t.target.value),rows:4,className:"text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 shadow-lg resize-none",placeholder:r("national_insight_center_info.create.description_placeholder")}),s.description&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:s.description})]})]})]})]})}),e.jsx(v,{title:r("national_insight_center_info.stats.title"),description:r("national_insight_center_info.stats.description"),icon:e.jsx(k,{className:"h-6 w-6"}),model:"national_insight_center_info",routeName:()=>"",buttonText:"",theme:"purple",showButton:!1}),e.jsx(b,{className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden",children:e.jsxs(j,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(c,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-purple-700 dark:text-purple-300 text-right",dir:"rtl",children:[r("national_insight_center_info.stats.filter_by_category"),e.jsx(Z,{className:"h-4 w-4"})]}),e.jsxs(X,{value:(n==null?void 0:n.toString())||"all",onValueChange:t=>B(t!=="all"?parseInt(t):null),children:[e.jsx(G,{id:"category-filter",className:"h-12 border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(J,{placeholder:r("incidents.filters.all_categories")})}),e.jsxs(K,{children:[e.jsx(w,{value:"all",children:r("incidents.filters.all_categories")}),A.map(t=>e.jsx(w,{value:t.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:t.color}}),t.label]})},t.id))]})]})]}),_.length>0?e.jsx(M,{items:_,statsData:p,onValueChange:I,onNotesChange:D}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-800/30 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(k,{className:"h-8 w-8 text-purple-400 dark:text-purple-500"})}),e.jsx("p",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 mb-2",children:r("national_insight_center_info.stats.no_items")}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400",children:r("national_insight_center_info.stats.no_items_description")})]})]})}),e.jsx(Q,{onCancel:()=>window.history.back(),onSubmit:()=>{},processing:T,cancelText:r("national_insight_center_info.create.cancel_button"),submitText:r("national_insight_center_info.create.save_button"),savingText:r("national_insight_center_info.create.saving_button")})]})})})]})]})}export{Re as default};

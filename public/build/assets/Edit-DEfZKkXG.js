import{m as z,r as l,j as e,L as H,$ as O}from"./app-BpSUcJGn.js";import{A as R}from"./app-layout-Cci7W_wL.js";import{B as $}from"./button-D5HSAalX.js";import{C as j,d as N}from"./card-DH7bpRIX.js";import{I as w}from"./input-Bf4x-eDe.js";import{L as d}from"./label-BnpnVHdR.js";import{T as q}from"./textarea-ybXvi9HL.js";import{u as P}from"./translate-De6eSKXZ.js";import{u as X}from"./use-permissions-BBPkzBQo.js";import{a as G}from"./permission-guard-PRK_BxP5.js";import{S as J,a as K,b as M,c as Q,d as v}from"./select-4eflkJXu.js";import{T as W}from"./TreeViewStatSelector-1k-Adgcr.js";import{H as k}from"./header-DKBq-HD0.js";import{F as Y}from"./FooterButtons-DrQ96UIA.js";import{A as Z}from"./arrow-left-DYn3FwPw.js";import{F as x}from"./file-text-CxW02Lyq.js";import{X as f}from"./x-DgxmVmP_.js";import{C as I}from"./chart-column-BnoJN4YC.js";import{T as S}from"./triangle-alert-B3BvgGty.js";import{B as ee}from"./building-2-ZWgLTmcE.js";import"./utils-x2oEfXY4.js";import"./index-D_7o4Bq4.js";import"./createLucideIcon-Dazand73.js";import"./index-BAL59aVo.js";import"./index-BGe2Ej9s.js";import"./index-Dc7fd2uP.js";import"./index-B_ZArIVV.js";import"./avatar-CHvk5jYt.js";import"./users-y5BAq2Js.js";import"./tag-DBjzO3ec.js";import"./qr-code-D69zO1WT.js";import"./map-pin-CgRg4Sos.js";import"./building-B0gV305l.js";import"./database-DvJqsiWQ.js";import"./index-BfhS0AQq.js";import"./check-C0q8vu5-.js";import"./plus-DlxkW1Ht.js";import"./save-d9RNAEqQ.js";function qe({nationalInsightCenterInfo:r,statItems:_,statCategories:y,users:T}){const{t:i}=P();X();const{data:m,setData:c,put:C,processing:B,errors:n}=z({name:r.name||"",code:r.code||"",description:r.description||"",access_users:[]}),[p,u]=l.useState({}),[o,F]=l.useState(null),[te,ie]=l.useState([]),[g,re]=l.useState("");l.useEffect(()=>{var a;const t={};(a=r.infoStats)==null||a.forEach(s=>{t[s.stat_category_item_id]={value:s.string_value||"",notes:s.notes}}),u(t)},[r.infoStats]);const L=[{title:i("info.page_title"),href:route("national-insight-center-infos.index")},{title:i("national_insight_center_info.page_title"),href:route("national-insight-center-infos.index")},{title:r.name,href:route("national-insight-center-infos.show",{national_insight_center_info:r.id})},{title:i("national_insight_center_info.edit.page_title"),href:"#"}],A=t=>{t.preventDefault();const a=Object.entries(p).filter(([s,{value:h}])=>h.trim()!=="").map(([s,{value:h,notes:V}])=>({stat_category_item_id:parseInt(s),value:h,notes:V||void 0}));a.length>0&&c("stats",a),C(route("national-insight-center-infos.update",r.id))},D=y.map(t=>({id:t.id,label:t.label,color:t.color})),b=o?_.filter(t=>t.category.id===o):_;function E(t,a){u(s=>({...s,[t]:{...s[t]||{notes:null},value:a}}))}function U(t,a){u(s=>({...s,[t]:{...s[t]||{value:""},notes:a||null}}))}return Object.keys(p).length,T.filter(t=>t.name.toLowerCase().includes(g.toLowerCase())||t.email.toLowerCase().includes(g.toLowerCase())),e.jsxs(R,{breadcrumbs:L,children:[e.jsx(H,{title:i("national_insight_center_info.edit.page_title",{name:r.name})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(k,{title:i("national_insight_center_info.edit.page_title",{name:r.name}),description:i("national_insight_center_info.edit.page_description"),icon:e.jsx(x,{className:"h-6 w-6 text-white"}),model:"national_insight_center_info",routeName:"national-insight-center-infos.edit",buttonText:i("national_insight_center_info.edit.save_button"),theme:"purple",buttonSize:"lg",showBackButton:!0,backRouteName:()=>route("national-insight-center-infos.show",{national_insight_center_info:r.id}),backButtonText:i("national_insight_center_info.edit.back_button"),showButton:!1,actionButtons:e.jsx(e.Fragment,{children:e.jsx($,{asChild:!0,variant:"outline",size:"lg",className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 shadow-2xl rounded-2xl px-6 py-3 text-lg font-semibold transition-all duration-300 hover:scale-105",children:e.jsxs(O,{href:route("national-insight-center-infos.show",{national_insight_center_info:r.id}),className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-5 w-5"}),i("national_insight_center_info.edit.back_button")]})})})}),e.jsx(G,{model:"national_insight_center_info",children:e.jsx("form",{onSubmit:A,children:e.jsxs("div",{className:"grid gap-8",children:[e.jsx(j,{className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden",children:e.jsxs(N,{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{htmlFor:"name",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4"}),i("national_insight_center_info.edit.name_label")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{id:"name",value:m.name,onChange:t=>c("name",t.target.value),required:!0,className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:i("national_insight_center_info.edit.name_placeholder")}),n.name&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:n.name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{htmlFor:"code",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),i("national_insight_center_info.edit.code_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{id:"code",value:m.code,onChange:t=>c("code",t.target.value),className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:i("national_insight_center_info.edit.code_placeholder")}),n.code&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:n.code})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{htmlFor:"description",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4"}),i("national_insight_center_info.edit.description_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{id:"description",value:m.description,onChange:t=>c("description",t.target.value),rows:4,className:"text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 shadow-lg resize-none",placeholder:i("national_insight_center_info.edit.description_placeholder")}),n.description&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:n.description})]})]})]})]})}),e.jsx(k,{title:i("national_insight_center_info.stats.title"),description:i("national_insight_center_info.stats.description"),icon:e.jsx(S,{className:"h-6 w-6"}),model:"national_insight_center_info",routeName:()=>"",buttonText:"",theme:"purple",showButton:!1}),e.jsx(j,{className:"shadow-2xl bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 overflow-hidden",children:e.jsxs(N,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(d,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-purple-700 dark:text-purple-300 text-right",dir:"rtl",children:[i("national_insight_center_info.stats.filter_by_category"),e.jsx(ee,{className:"h-4 w-4"})]}),e.jsxs(J,{value:(o==null?void 0:o.toString())||"all",onValueChange:t=>F(t!=="all"?parseInt(t):null),children:[e.jsx(K,{id:"category-filter",className:"h-12 border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(M,{placeholder:i("incidents.filters.all_categories")})}),e.jsxs(Q,{children:[e.jsx(v,{value:"all",children:i("incidents.filters.all_categories")}),D.map(t=>e.jsx(v,{value:t.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:t.color}}),t.label]})},t.id))]})]})]}),b.length>0?e.jsx(W,{items:b,statsData:p,onValueChange:E,onNotesChange:U}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-800/30 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(S,{className:"h-8 w-8 text-purple-400 dark:text-purple-500"})}),e.jsx("p",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 mb-2",children:i("national_insight_center_info.stats.no_items")}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400",children:i("national_insight_center_info.stats.no_items_description")})]})]})}),e.jsx(Y,{onCancel:()=>window.history.back(),onSubmit:()=>{},processing:B,cancelText:i("national_insight_center_info.edit.cancel_button"),submitText:i("national_insight_center_info.edit.save_button"),savingText:i("national_insight_center_info.edit.saving_button")})]})})})]})]})}export{qe as default};

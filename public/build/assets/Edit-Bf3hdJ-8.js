import{r as c,m as Q,j as e,L as W,$ as u,S as Y}from"./app-BufgRum3.js";import{A as Z}from"./app-layout-CSvWCj9H.js";import{B as l}from"./button-BoZujFSJ.js";import{C as D,a as L,b as A,d as F}from"./card-rrrDQJu1.js";import{I as j}from"./input-CxeN--hn.js";import{L as h}from"./label-DLCh9EuP.js";import{T as I}from"./textarea-D3ZAymtL.js";import{u as ee}from"./translate-7dUrCLaN.js";import{u as se}from"./use-permissions-C4jcThKB.js";import{a as N}from"./permission-guard-BStylNq_.js";import{B as P}from"./badge-DH8rzaGH.js";import{T as te,a as re,b as R,c as z}from"./tabs-oJILWfPQ.js";import{D as ae,a as le,b as ie,c as oe,d as de,e as ne}from"./dialog-CCJI-YjZ.js";import{P as ce}from"./pencil-BSpe-YtR.js";import{C as pe}from"./chart-column-JeVGbhpr.js";import{A as me}from"./arrow-left-sqvPMvz0.js";import{S as $}from"./save-CHq4b2zK.js";import{F as f}from"./file-text-BBAUupbj.js";import{U as v}from"./users-Dopi3ewh.js";import{X as _,S as xe}from"./x-B9zh7tQD.js";import{S as B}from"./search-CzBcpLdM.js";import{U as E}from"./user-BiEoGHHx.js";import{A as ue}from"./arrow-right-WS7-K-rd.js";import{T as he}from"./trash-C9E120Z5.js";import{T as fe}from"./triangle-alert-BM_blpVd.js";import{D as O}from"./database-CHq7A3iR.js";import{P as ge}from"./plus-CUZCxbQ5.js";import"./utils-BNRNCaII.js";import"./index-BbmNhKHE.js";import"./createLucideIcon-DxOK0CP3.js";import"./index-CH52axAf.js";import"./index-eEIjwM6S.js";import"./index-CnuVBB4C.js";import"./index-FnlemJSI.js";import"./avatar-CJTUIFCH.js";import"./tag-ZGX8ncmK.js";import"./qr-code-Cli3oJDj.js";import"./map-pin-DgniCjxk.js";import"./building-B7asMN4i.js";function rs({infoType:r,users:g}){var C,S,U;const{t}=ee();se();const[i,w]=c.useState(((C=r.accesses)==null?void 0:C.map(s=>s.user_id))||[]),[p,H]=c.useState(""),[q,m]=c.useState(!1),[d,y]=c.useState(null),[T,V]=c.useState([]),{data:x,setData:b,errors:n}=Q({_method:"PUT",name:r.name,code:r.code||"",description:r.description||"",access_users:((S=r.accesses)==null?void 0:S.map(s=>s.user_id))||[],deleted_users:[]}),X=[{title:t("info.page_title"),href:route("info-types.index")},{title:t("info_types.page_title"),href:route("info-types.index")},{title:t("info_types.edit.page_title",{name:r.name}),href:"#"}],G=s=>{i.includes(s)||w(a=>[...a,s])},J=s=>{const a=g.find(o=>o.id===s);a&&(y({id:s,name:a.name}),m(!0))},K=()=>{if(d){const s=i.filter(a=>a!==d.id);w(s),V(a=>[...a,d.id]),m(!1),y(null)}},k=g.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())||s.email.toLowerCase().includes(p.toLowerCase())),M=s=>{s.preventDefault();const a={...x,access_users:i.map(o=>parseInt(o.toString())),deleted_users:T.map(o=>parseInt(o.toString()))};Y.post(route("info-types.update",r.id),a,{onSuccess:()=>{}})};return e.jsxs(Z,{breadcrumbs:X,children:[e.jsx(W,{title:t("info_types.edit.page_title",{name:r.name})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-l from-purple-600 via-indigo-600 to-blue-600 p-8 lg:p-12 text-white shadow-2xl mb-8 group",children:[e.jsx("div",{className:"absolute inset-0 bg-black/5"}),e.jsx("div",{className:"absolute top-0 left-0 w-80 h-80 bg-white/10 rounded-full -translate-y-40 -translate-x-40 blur-3xl group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-white/5 rounded-full translate-y-32 translate-x-32 blur-2xl group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 bg-white/5 rounded-full -translate-x-16 -translate-y-16 blur-xl group-hover:scale-150 transition-transform duration-500"}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:justify-between lg:items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"p-6 bg-white/20 backdrop-blur-md rounded-3xl border border-white/30 shadow-2xl group-hover:scale-105 transition-transform duration-300",children:e.jsx(ce,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-white drop-shadow-2xl tracking-tight",children:t("info_types.edit.page_title",{name:r.name})}),e.jsxs("div",{className:"text-white/90 flex items-center gap-3 text-xl font-medium",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(pe,{className:"h-6 w-6"})}),t("info_types.edit.page_description")]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(l,{asChild:!0,variant:"outline",size:"lg",className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 shadow-2xl rounded-2xl px-6 py-3 text-lg font-semibold transition-all duration-300 hover:scale-105",children:e.jsxs(u,{href:route("info-types.index"),className:"flex items-center gap-3",children:[e.jsx(me,{className:"h-5 w-5"}),t("info_types.edit.back_button")]})})})]})]}),e.jsx(N,{model:"info_type",children:e.jsxs(D,{className:"shadow-2xl bg-gradient-to-bl from-white to-purple-50/30 border-0 rounded-3xl overflow-hidden",children:[e.jsx(L,{className:"bg-gradient-to-l from-purple-500 to-purple-600 text-white py-6",children:e.jsxs(A,{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm shadow-lg",children:e.jsx($,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:t("info_types.edit.form_title")}),e.jsx("div",{className:"text-purple-100 text-sm font-medium",children:t("info_types.edit.form_description")})]})]})}),e.jsxs("form",{onSubmit:M,children:[e.jsx(F,{className:"p-8",children:e.jsxs(te,{defaultValue:"basic",className:"w-full",children:[e.jsxs(re,{className:"grid w-full grid-cols-2 mb-8 bg-purple-100 dark:bg-purple-900/30 rounded-xl p-1",children:[e.jsxs(R,{value:"basic",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:text-purple-600 data-[state=active]:shadow-lg rounded-lg font-medium transition-all duration-300",children:[e.jsx(f,{className:"h-4 w-4"}),t("info_types.create.basic_info")]}),e.jsxs(R,{value:"access",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:text-purple-600 data-[state=active]:shadow-lg rounded-lg font-medium transition-all duration-300",children:[e.jsx(v,{className:"h-4 w-4"}),t("info_type.access.tab")]})]}),e.jsxs(z,{value:"basic",className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{htmlFor:"name",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),t("info_types.edit.name_label")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"name",value:x.name,onChange:s=>b("name",s.target.value),required:!0,className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:t("info_types.edit.name_placeholder")}),n.name&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:n.name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{htmlFor:"code",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),t("info_types.edit.code_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"code",value:x.code,onChange:s=>b("code",s.target.value),className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg",placeholder:t("info_types.edit.code_placeholder")}),n.code&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:n.code})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{htmlFor:"description",className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),t("info_types.edit.description_label")]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{id:"description",value:x.description,onChange:s=>b("description",s.target.value),rows:4,className:"text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg resize-none",placeholder:t("info_types.edit.description_placeholder")}),n.description&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:n.description})]})]})]})]}),e.jsxs(z,{value:"access",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-800 dark:text-purple-200 mb-2",children:t("info_type.access.title")}),e.jsx("p",{className:"text-purple-600 dark:text-purple-300",children:t("info_type.access.description")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),t("info_type.access.search_users")]}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{value:p,onChange:s=>H(s.target.value),placeholder:t("info_type.access.search_users"),className:"h-12 text-lg border-purple-200 dark:border-purple-700 focus:border-purple-500 focus:ring-purple-500/20 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800 rounded-xl shadow-lg"}),e.jsx(B,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-purple-400"})]})]}),p&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-md font-semibold text-purple-800 dark:text-purple-200",children:t("info_type.access.select_users")}),e.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 border border-purple-200 dark:border-purple-700 rounded-xl p-4 bg-gradient-to-l from-purple-50 dark:from-purple-900/30 to-white dark:to-gray-800",children:[k.filter(s=>!i.includes(s.id)).map(s=>e.jsxs("div",{onClick:()=>G(s.id),className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-purple-100 dark:border-purple-700 hover:bg-purple-50 dark:hover:bg-purple-900/30 cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-100 to-purple-200 dark:from-purple-800 dark:to-purple-900 rounded-lg",children:e.jsx(E,{className:"h-4 w-4 text-purple-600 dark:text-purple-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-900 dark:text-purple-100",children:s.name}),e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:s.email})]})]}),e.jsx(ue,{className:"h-4 w-4 text-purple-500"})]},s.id)),k.filter(s=>!i.includes(s.id)).length===0&&e.jsx("p",{className:"text-center text-purple-600 dark:text-purple-400 py-4",children:t("info_type.access.no_users_found")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-purple-800 dark:text-purple-200 flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),t("info_type.access.selected_users")]}),i.length>0?e.jsx("div",{className:"space-y-2",children:i.map(s=>{const a=g.find(o=>o.id===s);return a?e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${s===r.created_by?"bg-gradient-to-r from-green-100 to-green-200 dark:from-green-800 dark:to-green-900 border-green-200 dark:border-green-700":"bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-800 dark:to-purple-900 border-purple-200 dark:border-purple-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s===r.created_by?"bg-gradient-to-br from-green-200 to-green-300 dark:from-green-700 dark:to-green-800":"bg-gradient-to-br from-purple-200 to-purple-300 dark:from-purple-700 dark:to-purple-800"}`,children:e.jsx(E,{className:`h-4 w-4 ${s===r.created_by?"text-green-700 dark:text-green-200":"text-purple-700 dark:text-purple-200"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-purple-900 dark:text-purple-100",children:a.name}),s===r.created_by&&e.jsx(P,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300 px-2 py-0.5 text-xs font-medium",children:t("info_type.access.creator")})]}),e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:a.email})]})]}),s!==r.created_by&&e.jsx(l,{type:"button",variant:"outline",size:"sm",onClick:()=>J(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 border-red-200 dark:border-red-700",children:e.jsx(he,{className:"h-3 w-3"})})]},s):null})}):e.jsxs("div",{className:"text-center py-8 text-purple-600 dark:text-purple-400",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:t("info_type.access.no_users_selected")})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium mb-1",children:t("info_type.access.creator_note")}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:t("info_type.access.permissions_note")})]})]})})]})]})}),e.jsxs("div",{className:"px-8 py-6 bg-gradient-to-l from-purple-50 to-white border-t border-purple-200 flex justify-end gap-4",children:[e.jsx(l,{type:"button",variant:"outline",asChild:!0,className:"h-12 px-6 shadow-lg border-purple-300 text-purple-700 hover:bg-purple-100 hover:border-purple-400 rounded-xl transition-all duration-300 hover:scale-105 text-lg font-semibold",children:e.jsx(u,{href:route("info-types.index"),children:t("info_types.edit.cancel_button")})}),e.jsx(l,{type:"submit",className:"h-12 px-8 bg-gradient-to-l from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700 shadow-2xl rounded-xl transition-all duration-300 hover:scale-105 text-lg font-semibold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),t("info_types.edit.save_button")]})})]})]})]})}),e.jsxs(D,{className:"shadow-2xl bg-gradient-to-bl from-white to-purple-50/30 border-0 rounded-3xl overflow-hidden mt-8",children:[e.jsx(L,{className:"bg-gradient-to-l from-purple-500 to-purple-600 text-white py-6",children:e.jsxs(A,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm shadow-lg",children:e.jsx(O,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:t("info_types.edit.stats_title")}),e.jsx("div",{className:"text-purple-100 text-sm font-medium",children:t("info_types.edit.stats_description")})]})]}),e.jsx(N,{model:"info_type",children:e.jsx(l,{asChild:!0,size:"lg",className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 shadow-2xl rounded-2xl px-6 py-3 text-lg font-semibold transition-all duration-300 hover:scale-105",children:e.jsxs(u,{href:route("info-types.stats",r.id),className:"flex items-center gap-3",children:[e.jsx(xe,{className:"h-5 w-5"}),t("info_types.edit.manage_stats_button")]})})})]})}),e.jsx(F,{className:"p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-800",children:t("info_types.edit.current_stats")}),e.jsx("p",{className:"text-purple-600",children:t("info_types.edit.current_stats_description")})]}),e.jsxs(P,{variant:"secondary",className:"bg-purple-100 text-purple-800 px-3 py-1",children:[((U=r.infoStats)==null?void 0:U.length)||0," ",t("info_types.edit.stats_count")]})]}),r.infoStats&&r.infoStats.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.infoStats.map(s=>e.jsxs("div",{className:"bg-gradient-to-l from-purple-50 to-white p-4 rounded-xl border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.stat_category_item.category.color}}),e.jsx("span",{className:"text-sm font-medium text-purple-700",children:s.stat_category_item.category.label})]}),e.jsx("h4",{className:"font-semibold text-purple-900 mb-1",children:s.stat_category_item.label}),e.jsx("p",{className:"text-lg font-bold text-green-600 mb-2",children:s.integer_value!==null?s.integer_value:s.string_value}),s.notes&&e.jsx("p",{className:"text-sm text-purple-600 italic",children:s.notes})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"p-4 bg-purple-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(O,{className:"h-8 w-8 text-purple-400"})}),e.jsx("p",{className:"text-lg font-semibold text-purple-800 mb-2",children:t("info_types.edit.no_stats")}),e.jsx("p",{className:"text-purple-600 mb-4",children:t("info_types.edit.no_stats_description")}),e.jsx(N,{model:"info_type",children:e.jsx(l,{asChild:!0,className:"bg-gradient-to-l from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700 shadow-2xl rounded-2xl px-6 py-3 text-lg font-semibold transition-all duration-300 hover:scale-105",children:e.jsxs(u,{href:route("info-types.stats",r.id),className:"flex items-center gap-3",children:[e.jsx(ge,{className:"h-5 w-5"}),t("info_types.edit.add_stats_button")]})})})]})]})})]})]}),e.jsx(ae,{open:q,onOpenChange:m,children:e.jsxs(le,{className:"max-w-md",children:[e.jsxs(ie,{children:[e.jsx(oe,{className:"text-xl",children:t("info_type.access.remove_user_confirm_title")}),e.jsx(de,{className:"mt-2",children:t("info_type.access.remove_user_confirm_message",{name:(d==null?void 0:d.name)||""})})]}),e.jsxs(ne,{className:"mt-6",children:[e.jsx(l,{variant:"outline",onClick:()=>m(!1),className:"shadow-sm",children:t("common.cancel")}),e.jsx(l,{onClick:K,className:"bg-red-600 hover:bg-red-700 text-white shadow-sm",children:t("info_type.access.remove_user_confirm_button")})]})]})})]})}export{rs as default};

import{r as A,j as e,L,S as g}from"./app-i9gygtI7.js";import{u as T}from"./translate-wL0aa-sI.js";import{C as i,a as l,b as d,d as c,c as n}from"./card-NUH92OWN.js";import{B}from"./button-DA8WHqQ5.js";import{S as M,a as V,b as $,c as U,d as P}from"./select-yjOttDTn.js";import{B as x}from"./badge-CGb-l8vH.js";import{T as E,a as R,b as m,c as o}from"./tabs-BSYtR09-.js";import{A as I}from"./arrow-left-262aYfzE.js";import{E as k}from"./eye-CM8Mcy_6.js";import{U as z,M as O}from"./users-CRlr-5yi.js";import{A as q,M as v,T as F,S as G}from"./tablet-DFZNGOdS.js";import{C as H}from"./clock-BB8X0p25.js";import{U as b}from"./user-B6cCFwZE.js";import"./utils-Cqzwlyr3.js";import"./index-DvqLlsqE.js";import"./index-CeLN-tmV.js";import"./index-BYxWpEkI.js";import"./createLucideIcon-CCdCu9x0.js";import"./index-CVa0K7PG.js";import"./index-DOgva_i9.js";import"./check-BTVcMUtY.js";function je({model:a,analytics:t,recentVisitors:w,timeline:_,filters:p}){T();const[y,C]=A.useState(p.period),S=s=>{C(s),g.get(route("analytics.show",[a.type,a.id]),{period:s},{preserveState:!0})},h=s=>new Intl.NumberFormat().format(s),D=s=>{if(!s)return"0s";const r=Math.floor(s/3600),u=Math.floor(s%3600/60),N=s%60;return r>0?`${r}h ${u}m`:u>0?`${u}m ${N}s`:`${N}s`},j=s=>{switch(s){case"desktop":return e.jsx(v,{className:"h-4 w-4"});case"mobile":return e.jsx(G,{className:"h-4 w-4"});case"tablet":return e.jsx(F,{className:"h-4 w-4"});default:return e.jsx(v,{className:"h-4 w-4"})}},f=s=>{switch(s){case"desktop":return"bg-blue-100 text-blue-800";case"mobile":return"bg-green-100 text-green-800";case"tablet":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:`Analytics - ${a.name}`}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(B,{variant:"outline",size:"sm",onClick:()=>g.get(route("analytics.index")),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Analytics"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:a.name}),e.jsxs("p",{className:"text-muted-foreground",children:[a.type," Analytics"]})]})]}),e.jsxs(M,{value:y,onValueChange:S,children:[e.jsx(V,{className:"w-40",children:e.jsx($,{})}),e.jsx(U,{children:Object.entries(p.availablePeriods).map(([s,r])=>e.jsx(P,{value:s,children:r},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Visits"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h(t.total_visits)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h(t.unique_visitors)," unique visitors"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Authenticated Users"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h(t.authenticated_visitors)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.total_visits>0?Math.round(t.authenticated_visitors/t.total_visits*100):0,"% of total visits"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Bounce Rate"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.bounce_rate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Single page visits"})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Avg. Time Spent"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:D(t.average_time_spent||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per session"})]})]})]}),e.jsxs(E,{defaultValue:"timeline",className:"space-y-4",children:[e.jsxs(R,{children:[e.jsx(m,{value:"timeline",children:"Visitor Timeline"}),e.jsx(m,{value:"devices",children:"Device Distribution"}),e.jsx(m,{value:"browsers",children:"Browser Distribution"}),e.jsx(m,{value:"geography",children:"Geography"}),e.jsx(m,{value:"recent",children:"Recent Visitors"})]}),e.jsx(o,{value:"timeline",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Visitor Timeline"}),e.jsxs(n,{children:["Recent visits to this ",a.type.toLowerCase()]})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:_.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{variant:s.is_bounce?"destructive":"secondary",children:s.is_bounce?"Bounce":"Engaged"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(s.visited_at).toLocaleString()})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(x,{className:f(s.device_type),children:[j(s.device_type),e.jsx("span",{className:"ml-1 capitalize",children:s.device_type})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"IP Address:"}),e.jsx("div",{className:"font-medium",children:s.ip_address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Browser:"}),e.jsx("div",{className:"font-medium",children:s.browser})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"}),e.jsx("div",{className:"font-medium",children:s.location})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsx("div",{className:"font-medium",children:s.duration})]})]}),s.user&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Authenticated User:"}),e.jsx("span",{className:"font-medium",children:s.user.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.user.email,")"]})]})})]},s.id))})})]})}),e.jsx(o,{value:"devices",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Device Distribution"}),e.jsxs(n,{children:["How visitors access this ",a.type.toLowerCase()]})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(t.device_distribution).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[j(s),e.jsx("span",{className:"capitalize",children:s})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${t.total_visits>0?r/t.total_visits*100:0}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[r," (",t.total_visits>0?Math.round(r/t.total_visits*100):0,"%)"]})]})]},s))})})]})}),e.jsx(o,{value:"browsers",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Browser Distribution"}),e.jsxs(n,{children:["Most popular browsers for this ",a.type.toLowerCase()]})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(t.browser_distribution).sort(([,s],[,r])=>r-s).slice(0,10).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:s}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${t.total_visits>0?r/t.total_visits*100:0}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[r," (",t.total_visits>0?Math.round(r/t.total_visits*100):0,"%)"]})]})]},s))})})]})}),e.jsx(o,{value:"geography",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Geographic Distribution"}),e.jsxs(n,{children:["Where visitors of this ",a.type.toLowerCase()," are located"]})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(t.geographic_distribution).sort(([,s],[,r])=>r-s).slice(0,10).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{children:s})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${t.total_visits>0?r/t.total_visits*100:0}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[r," (",t.total_visits>0?Math.round(r/t.total_visits*100):0,"%)"]})]})]},s))})})]})}),e.jsx(o,{value:"recent",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Recent Visitors"}),e.jsxs(n,{children:["Latest visitors to this ",a.type.toLowerCase()]})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:w.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{variant:s.is_bounce?"destructive":"secondary",children:s.is_bounce?"Bounce":"Engaged"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(s.visited_at).toLocaleString()})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(x,{className:f(s.device_type),children:[j(s.device_type),e.jsx("span",{className:"ml-1 capitalize",children:s.device_type})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"IP Address:"}),e.jsx("div",{className:"font-medium",children:s.ip_address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Browser:"}),e.jsx("div",{className:"font-medium",children:s.browser})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"}),e.jsx("div",{className:"font-medium",children:s.location_formatted})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsx("div",{className:"font-medium",children:s.duration_formatted})]})]}),s.user&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Authenticated User:"}),e.jsx("span",{className:"font-medium",children:s.user.name}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.user.email,")"]})]})})]},s.id))})})]})})]})]})]})}export{je as default};

import{r as m,K as U,j as e,L as q,$ as g,a as K}from"./app-CaOFbb5p.js";import{A as J}from"./app-layout-BnaWUlXy.js";import{B as n}from"./button-BgmOCw2s.js";import{C as W,a as X,b as Y,c as Z,d as ee,e as ae}from"./card-BisyDRUw.js";import{T as se,a as te,b as N,c as j,d as re,e as p}from"./table-PUHMBSiV.js";import{S as V,a as H,b as I,c as M,d as b}from"./select-3Nojfdid.js";import{I as D}from"./input-DrjUjM4t.js";import{u as le}from"./translate-TdXOf_jB.js";import{c as P}from"./createLucideIcon-YrFxUe8D.js";import{P as ne}from"./plus-BJ1qFFYt.js";import{S as oe}from"./search-C7vySP-8.js";import"./index-djsfXYng.js";import"./index-QYTXijtn.js";import"./index-CMwx1BFh.js";import"./index-Dz_2ROfM.js";import"./x-BX68FbZw.js";import"./index-CB1115OV.js";import"./avatar-DwlMoviI.js";import"./app-logo-DEy1bYcE.js";import"./app-logo-icon-BNvkhmTw.js";import"./triangle-alert-DwpGNmzU.js";import"./file-text-tQrNfThz.js";import"./users-DacFqtlq.js";import"./tag-CRH5rx9C.js";import"./qr-code-DvifJzwA.js";import"./index-DDgQmr6Z.js";import"./check-DaBvgJmp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ce=P("Download",ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ue=P("Upload",de);function $e({languages:k=[],translations:t={data:[],current_page:1,last_page:1,per_page:15,total:0},groups:B=[],filters:h={}}){var L;const{t:s}=le(),[d,G]=m.useState(""),{auth:xe,csrf_token:me}=U().props,[O,R]=m.useState(!1),[u,f]=m.useState({}),[$,_]=m.useState(!1),o=h.language||((L=k[0])==null?void 0:L.code)||"en",l=h.group||"all",z=B.map(a=>a||"unnamed-group"),v=(t==null?void 0:t.data)||[],x=(t==null?void 0:t.current_page)||1,S=(t==null?void 0:t.last_page)||1,T=(t==null?void 0:t.total)||0,E=d?v.filter(a=>{var r,c;return((r=a.key)==null?void 0:r.toLowerCase().includes(d.toLowerCase()))||((c=a.value)==null?void 0:c.toLowerCase().includes(d.toLowerCase()))}):v,y=m.useMemo(()=>Object.keys(u).length>0,[u]),A=(a,r)=>{f(c=>({...c,[a]:r}))},F=()=>f({}),Q=async()=>{if(y)try{_(!0);const a={};v.forEach(i=>{a[i.key]=i.group||"general"});const r={};Object.entries(u).forEach(([i,w])=>{const C=a[i]||"general";r[C]||(r[C]={}),r[C][i]=w});const c=Object.entries(r);for(const[i,w]of c)await K.post("/api/translations/import",{language_code:o,translations:w,group:i});f({}),window.location.href=route("translations.index",{page:x,language:o,group:l==="all"?"":l})}catch(a){console.error("Failed to save translations",a)}finally{_(!1)}};return e.jsxs(J,{children:[e.jsx(q,{title:s("translations.translations")}),e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s("translations.translations")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(g,{href:route("translations.export",{language_id:o,group:h.group==="all"?"":h.group}),children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),s("translations.export")]})}),e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(g,{href:route("translations.export-json"),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),s("translations.export_translations")]})}),e.jsx(n,{asChild:!0,children:e.jsxs(g,{href:route("translations.create"),children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),s("translations.add_translation")]})}),e.jsx(n,{variant:"outline",onClick:()=>R(a=>!a),children:s("common.edit")}),e.jsx(n,{onClick:Q,disabled:!y||$,children:s("common.save")}),e.jsx(n,{variant:"outline",onClick:F,disabled:!y,children:s("common.cancel")})]})]}),e.jsxs(W,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:s("translations.translations")}),e.jsx(Z,{children:s("translations.description")})]}),e.jsxs(ee,{children:[e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(V,{value:o,onValueChange:a=>window.location.href=route("translations.index",{language:a,group:l==="all"?"":l}),children:[e.jsx(H,{children:e.jsx(I,{placeholder:s("translations.select_language")})}),e.jsx(M,{children:k.map(a=>e.jsx(b,{value:a.code,children:a.name},a.code))})]})}),e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(V,{value:l,onValueChange:a=>window.location.href=route("translations.index",{language:o,group:a==="all"?"":a}),children:[e.jsx(H,{children:e.jsx(I,{placeholder:s("translations.select_group")})}),e.jsxs(M,{children:[e.jsx(b,{value:"all",children:s("translations.all_groups")}),z.map(a=>e.jsx(b,{value:a,children:a},a))]})]})}),e.jsxs("div",{className:"w-full md:w-1/3 relative",children:[e.jsx(D,{placeholder:s("translations.filter_translations"),value:d,onChange:a=>G(a.target.value),className:"pr-8"}),e.jsx(oe,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs(se,{children:[e.jsx(te,{children:e.jsxs(N,{children:[e.jsx(j,{children:s("translations.key")}),e.jsx(j,{children:s("translations.value")}),e.jsx(j,{children:s("translations.group")}),e.jsx(j,{className:"text-right",children:s("common.actions")})]})}),e.jsx(re,{children:E.length===0?e.jsx(N,{children:e.jsx(p,{colSpan:4,className:"text-center py-8",children:s(d?"common.no_results":"translations.no_translations")})}):E.map(a=>e.jsxs(N,{children:[e.jsx(p,{className:"font-medium max-w-[250px] truncate",title:a.key,children:a.key}),e.jsx(p,{className:"max-w-[300px]",title:u[a.key]??a.value,children:O?e.jsx(D,{value:u[a.key]??a.value??"",onChange:r=>A(a.key,r.target.value)}):e.jsx("span",{className:a.value?"":"text-muted-foreground italic",children:a.value||"Empty"})}),e.jsx(p,{children:a.group}),e.jsx(p,{className:"text-right"})]},a.id))})]}),S>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s("languages.total_languages",{count:String(T)})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{variant:"outline",size:"sm",disabled:x<=1,onClick:()=>window.location.href=route("translations.index",{page:x-1,language:o,group:l==="all"?"":l}),children:s("departments.prev")}),e.jsx(n,{variant:"outline",size:"sm",disabled:x>=S,onClick:()=>window.location.href=route("translations.index",{page:x+1,language:o,group:l==="all"?"":l}),children:s("departments.next")})]})]})]}),e.jsxs(ae,{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("translations.total_translations",{count:String(T)})}),e.jsx(n,{variant:"outline",asChild:!0,children:e.jsx(g,{href:route("languages.index"),children:s("languages.manage_languages")})})]})]})]})]})}export{$e as default};

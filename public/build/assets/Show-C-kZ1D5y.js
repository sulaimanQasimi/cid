const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B9F94JCN.js","assets/Circle-BY-oEBb7.js","assets/SerialChart-CGBKKCnL.js","assets/Theme-BmHcCuAX.js","assets/index-B8upMA71.js","assets/createLucideIcon-D64aVGqp.js","assets/app-Cnwq3aGu.js","assets/app-DlY9QmAi.css","assets/index-zv43koUd.js","assets/index-DvbBkYzb.js","assets/index-BD-Cx1YK.js","assets/utils-nIk1e_UI.js","assets/ZoomTools-CWqlrsVw.js","assets/LinearGradient-BbYLve3X.js","assets/map-Chyl9-on.js","assets/ZoomControl-EUDoShG6.js","assets/MapPolygonSeries-BIYcj0XS.js","assets/Animated-C2wI0-my.js","assets/AnimatedTheme-BUmUfnV6.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,L as z,$ as o,_ as u}from"./app-Cnwq3aGu.js";import{B as c}from"./button-NKiBXopR.js";import{B as p}from"./badge-DdQgGT-L.js";import{C as N,a as v,b as w,c as A,d as b}from"./card-DQkrpTfc.js";import{P as H}from"./pagination-B9TeARm-.js";import{P as O}from"./page-header-D8IujcCk.js";import{A as $}from"./app-layout-Ct4nad8R.js";import{A as U}from"./arrow-left-DB9op1Nz.js";import{S as L}from"./square-pen-DeCSa6wD.js";import{M as P}from"./index-B8upMA71.js";import{U as D}from"./user-Dqem5XhU.js";import{f as S}from"./index-CaunA62S.js";import{C as V}from"./calendar-qheR2nbK.js";import{C as G}from"./clock-CTxnAjyh.js";import{E as W}from"./eye-BIYsQCD6.js";import"./utils-nIk1e_UI.js";import"./chevron-left-BNT_5i55.js";import"./createLucideIcon-D64aVGqp.js";import"./x-DV2ex6HU.js";import"./index-zv43koUd.js";import"./index-DvbBkYzb.js";import"./index-BAF9Cwt3.js";import"./index-BD-Cx1YK.js";import"./avatar-DUblvIrk.js";import"./app-logo-O-IJm8W-.js";import"./app-logo-icon-1U3RcSqj.js";import"./translate-B9p5OoHL.js";import"./file-text-D-_bAIO1.js";import"./users-Dhurjeto.js";import"./tag-xahGINLS.js";import"./triangle-alert-CpKFje2K.js";import"./qr-code-2HtqAWIS.js";import"./database-CejRtYfW.js";const I={active:"#5D87FF",inactive:"#94A3B8"};function Ee({province:t,districts:f}){var C;const i=d.useRef(null),m=d.useRef(null),[X,M]=d.useState(!1),y=()=>{m.current&&(m.current.dispose(),m.current=null)};d.useEffect(()=>()=>{y()},[]),d.useEffect(()=>{if(!i.current)return;y();const r=`province-map-${t.id}`;i.current.id=r,i.current.innerHTML="",i.current.innerHTML=`
      <div class="flex items-center justify-center h-full">
        <div class="text-center">
          <div class="animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full inline-block"></div>
          <p class="mt-2 text-sm text-muted-foreground">Loading map...</p>
        </div>
      </div>
    `;const h=async()=>{try{if(!i.current)return;const s=await u(()=>import("./index-B9F94JCN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),n=await u(()=>import("./map-Chyl9-on.js"),__vite__mapDeps([14,15,16,3,2,4,5,6,7,8,9,10,11,12])),B=await u(()=>import("./Animated-C2wI0-my.js"),__vite__mapDeps([17,18,3])),_=await u(()=>import("./afghanistanLow-mnRKi4Rp.js"),[]);if(!i.current)return;i.current.innerHTML="";const a=s.Root.new(r);m.current=a,a.setThemes([B.default.new(a)]);const l=a.container.children.push(n.MapChart.new(a,{panX:"translateX",panY:"translateY",projection:n.geoMercator(),layout:a.verticalLayout})),E=l.series.push(n.MapPolygonSeries.new(a,{geoJSON:_.default,fill:s.color(14540253),stroke:s.color(16777215)}));E.mapPolygons.template.setAll({tooltipText:"{name}",interactive:!0,strokeWidth:1}),E.mapPolygons.template.states.create("hover",{fill:s.color(12303291)});const j=l.series.push(n.MapPolygonSeries.new(a,{geoJSON:_.default,include:[t.code]}));j.mapPolygons.template.setAll({fill:s.color(I[t.status]||I.active),stroke:s.color(16777215),tooltipText:"{name}",interactive:!0,strokeWidth:2}),l.set("zoomControl",n.ZoomControl.new(a,{})),l.appear(1e3,100);const T=l.series.push(n.MapPointSeries.new(a,{}));setTimeout(()=>{if(j.mapPolygons.length>0){const g=j.mapPolygons.getIndex(0);if(g){const x=g.visualCentroid();l.zoomToGeoPoint({latitude:x.latitude,longitude:x.longitude},1.5),g.dataItem&&T.data.push({latitude:x.latitude,longitude:x.longitude,name:t.name})}}else l.goHome(1e3);T.bullets.push(()=>s.Bullet.new(a,{sprite:s.Label.new(a,{text:"{name}",centerX:s.p50,centerY:s.p50,populateText:!0,fontWeight:"bold",fontSize:14})}))},1e3),M(!0)}catch(s){console.error("Error loading amCharts:",s),i.current&&(i.current.innerHTML=`
            <div class="flex items-center justify-center h-full">
              <div class="text-center p-4">
                <p class="text-red-500">Error loading map: ${s instanceof Error?s.message:"Unknown error"}</p>
                <p class="text-xs text-gray-500 mt-2">Please check console for details</p>
              </div>
            </div>
          `)}},R=setTimeout(()=>{h()},100);return()=>{clearTimeout(R)}},[t.id,t.code,t.status,t.name]);const k=[{title:"Dashboard",href:"/dashboard"},{title:"Provinces",href:route("provinces.index")},{title:t.name,href:route("provinces.show",t.id)}];return e.jsxs($,{breadcrumbs:k,children:[e.jsx(z,{title:`Province - ${t.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(O,{title:t.name,description:`Province Code: ${t.code}`,actions:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{variant:"outline",asChild:!0,children:e.jsxs(o,{href:route("provinces.index"),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsx(c,{asChild:!0,children:e.jsxs(o,{href:route("provinces.edit",t.id),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Edit"]})})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(N,{className:"md:col-span-2",children:[e.jsxs(v,{children:[e.jsx(w,{children:"Province Details"}),e.jsx(A,{children:"Detailed information about this province"})]}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[t.capital&&e.jsxs(p,{variant:"outline",className:"flex items-center",children:[e.jsx(P,{className:"mr-1 h-3 w-3"}),"Capital: ",t.capital]}),t.governor&&e.jsxs(p,{variant:"outline",className:"flex items-center",children:[e.jsx(D,{className:"mr-1 h-3 w-3"}),"Governor: ",t.governor]}),e.jsx(p,{variant:t.status==="active"?"default":"secondary",className:"flex items-center",children:t.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Province Map"}),e.jsx("div",{ref:i,className:"mt-2 h-[400px] w-full bg-gray-50 dark:bg-gray-900/30 rounded-md overflow-hidden shadow-sm border"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Interactive map of Afghanistan with ",t.name," province highlighted"]})]}),t.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Description"}),e.jsx("div",{className:"whitespace-pre-wrap mt-2 text-muted-foreground",children:t.description})]})]})]}),e.jsxs(N,{children:[e.jsx(v,{children:e.jsx(w,{children:"Province Information"})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Created By"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(D,{className:"h-4 w-4 mr-2 text-muted-foreground"}),((C=t.creator)==null?void 0:C.name)||"Unknown"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Created At"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(V,{className:"h-4 w-4 mr-2 text-muted-foreground"}),S(new Date(t.created_at),"PPP")]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(G,{className:"h-4 w-4 mr-2 text-muted-foreground"}),S(new Date(t.updated_at),"PPP p")]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(c,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs(o,{href:route("districts.create",{province_id:t.id}),children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Add District"]})})})]})]})]}),e.jsxs(N,{children:[e.jsx(v,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{children:[e.jsx(w,{children:"Districts"}),e.jsx(A,{children:"Districts in this province"})]})}),e.jsxs(b,{children:[e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Name"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Code"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Status"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Created By"}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:f.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"h-12 px-4 text-center align-middle",children:"No districts found"})}):f.data.map(r=>{var h;return e.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[e.jsx("td",{className:"p-4 align-middle",children:e.jsxs(o,{href:route("districts.show",r.id),className:"font-medium text-primary hover:underline flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),r.name]})}),e.jsx("td",{className:"p-4 align-middle",children:r.code}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(p,{variant:r.status==="active"?"default":"secondary",children:r.status})}),e.jsx("td",{className:"p-4 align-middle",children:((h=r.creator)==null?void 0:h.name)||"N/A"}),e.jsx("td",{className:"p-4 align-middle",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(o,{href:route("districts.show",r.id),children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"View"]})}),e.jsx(c,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(o,{href:route("districts.edit",r.id),children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"Edit"]})})]})})]},r.id)})})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(H,{links:f.links})})]})]})]})]})}export{Ee as default};

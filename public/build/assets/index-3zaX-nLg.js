import{T as mt}from"./Circle-BFGvhWGI.js";import{B as hs,d as us,c as cs,C as ds,D as gs,b as ps,I as fs,N as ms,P as bs,R as ys,a as _s}from"./Circle-BFGvhWGI.js";import{M as bt,C as yt,e as re,o as pe,z as te,f as P,i as _t,Q as Se,a as lt,d as tt,t as wt}from"./Theme-BmHcCuAX.js";import{A as vs,D as xs,V as Ps,T as ks,R as Ds,S as Cs,U as Ts}from"./Theme-BmHcCuAX.js";import{E as Q,ae as vt,d as be,v as ot,_ as Me,af as k,G as O,ad as ye,C as j,L as Y,aa as se,m as R,e as $,p as A,c as ht,P as ae,a2 as ut,ag as ct,X as dt,a4 as je,D as xt,ah as I,ab as W,ac as X,a6 as Pt,ai as E,R as kt,a9 as Dt}from"./SerialChart-DQKmAglL.js";import{B as Rs,au as Os,ar as Ss,as as Ms,N as js,M as Ls,ax as As,at as Fs,aw as Es,av as Bs,a5 as $s,T as Gs,V as zs,an as Vs,ao as Hs,aj as Is,ap as Ws,ak as Xs,ay as Ys,A as qs,aq as Zs,O as Js,al as Ks,am as Qs}from"./SerialChart-DQKmAglL.js";import{R as q,B as Ct}from"./ZoomTools-BPst0FRR.js";import{Z as ei,a as ti}from"./ZoomTools-BPst0FRR.js";import{L as Tt,G as gt}from"./LinearGradient-BKl9PwwS.js";import"./index-C_llV4y3.js";import"./createLucideIcon-0s2WbM7B.js";import"./app-BoRYl7ul.js";import"./index-C7EozwEa.js";import"./index-grl2zDGr.js";import"./index-BaIfncEH.js";import"./utils-CAQgsxix.js";let fe;function Nt(c,e,t){const s=e.interfaceColors,i=s.get("secondaryButton").toCSS(),a=s.get("text").toCSS(),n=s.get("alternativeBackground").toCSS(.45);if(!fe){const r=new bt([new k(c,".am5-modal",{width:"100%",height:"100%",position:"absolute","z-index":"100000",top:"0",left:"0"},e.nonce),new k(c,".am5-modal-curtain",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute",background:s.get("background").toCSS(.5),"z-index":"100"},e.nonce),new k(c,".am5-modal-wrapper",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute","text-align":"center","white-space":"nowrap",background:s.get("background").toCSS(.5),"z-index":"101"},e.nonce),new k(c,".am5-modal-wrapper:before",{content:"''",display:"inline-block",height:"100%","vertical-align":"middle","margin-right":"-0.25em"},e.nonce),new k(c,".am5-modal-content",{display:"inline-block",padding:"1.2em","vertical-align":"middle","text-align":"start","white-space":"normal",background:s.get("background").toCSS(),"border-radius":"4px","-webkit-box-shadow":"0px 0px 36px 0px "+n,"box-shadow":"0px 0px 36px 0px "+n,color:a},e.nonce),new k(c,".am5-modal-content h1",{"font-size":"1em",margin:"0 0 0.5em 0"},e.nonce),new k(c,".am5-modal-table",{display:"table",margin:"1em 0"},e.nonce),new k(c,".am5-modal-table-row",{display:"table-row"},e.nonce),new k(c,".am5-modal-table-heading",{display:"table-heading",padding:"3px 10px 3px 0"},e.nonce),new k(c,".am5-modal-table-cell",{display:"table-cell",padding:"3px 0 3px 0"},e.nonce),new k(c,".am5-modal-table-cell > *",{"vertical-align":"middle"},e.nonce),new k(c,".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select",{border:"1px solid "+i,"border-radius":"4px",padding:"3px 5px",margin:"2px"},e.nonce),new k(c,".am5-modal-input-narrow",{width:"50px"},e.nonce),new k(c,".am5-modal-button",{"font-weight":"400",color:s.get("secondaryButtonText").toCSS(),"line-height":"1.5","text-align":"center","text-decoration":"none","vertical-align":"middle",cursor:"pointer",padding:"0.2em 0.8em","font-size":"1em","border-radius":"0.25em",margin:"0 0.25em 0 0",border:"1px solid "+s.get("secondaryButtonStroke").toCSS(),background:s.get("secondaryButton").toCSS()},e.nonce),new k(c,".am5-modal-button:hover",{background:s.get("secondaryButtonHover").toCSS()},e.nonce),new k(c,".am5-modal-button.am5-modal-primary",{color:s.get("primaryButtonText").toCSS(),border:"1px solid "+s.get("primaryButtonStroke").toCSS(),background:s.get("primaryButton").toCSS()},e.nonce),new k(c,".am5-modal-button.am5-modal-primary:hover",{background:s.get("primaryButtonHover").toCSS()},e.nonce)]);fe=new yt(()=>{fe=void 0,r.dispose()})}return fe.increment()}class Le extends Q{_afterNew(){super._afterNewApplyThemes(),this._setRawDefault("deactivateRoot",!0),Nt(vt(this._root.dom),this._root);const e=document.createElement("div");e.className="am5-modal",e.style.display="none",this.root._inner.appendChild(e),this.setPrivate("container",e);const t=document.createElement("div");t.className="am5-modal-curtain",e.appendChild(t),this.setPrivate("curtain",t),this._disposers.push(be(t,"click",()=>{this.cancel()}));const s=document.createElement("div");s.className="am5-modal-wrapper",e.appendChild(s),this.setPrivate("wrapper",s);const i=document.createElement("div");i.className="am5-modal-content",s.appendChild(i),this.setPrivate("content",i);const a=this.get("content");a&&(i.innerHTML=a),ot("keyboardevents")&&this._disposers.push(be(document,"keydown",n=>{this.isOpen()&&Me(n)=="Escape"&&this.cancel()}))}_beforeChanged(){super._beforeChanged(),this.isDirty("content")&&(this.getPrivate("content").innerHTML=this.get("content",""))}isOpen(){return this.getPrivate("container").style.display!="none"}open(){this.getPrivate("container").style.display="block",this.get("deactivateRoot")&&this.setTimeout(()=>{this._root._renderer.interactionsEnabled=!1},10),this.events.dispatch("opened",{type:"opened",target:this})}close(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("closed",{type:"closed",target:this})}cancel(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("cancelled",{type:"cancelled",target:this})}_dispose(){super._dispose();const e=this.getPrivate("container");e.parentElement&&e.parentElement.removeChild(e)}}Object.defineProperty(Le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Modal"});Object.defineProperty(Le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([Le.className])});class Ae extends O{constructor(){super(...arguments),Object.defineProperty(this,"morphAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){if(super._beforeChanged(),this.isDirty("coordinates")){const e=[],t=this.get("coordinates");t&&re(t,s=>{e.push({x:s[0],y:s[1]})}),this.set("points",e)}if(this.isPrivateDirty("points")&&(this._clear=!0),this.isDirty("points")){this._clear=!0;const e=this.get("points"),t=this._prevSettings.points;if(t){if(e){let r=pe(e),h=pe(t),l=r.length,o=h.length;if(l>o){let d=pe(r);for(let u=0;u<l;u++){let g=Math.floor(u/l*o);d[u]={x:h[g].x,y:h[g].y}}h=d}else if(o>l){let d=pe(h);for(let u=0;u<o;u++){let g=Math.floor(u/o*l);d[u]={x:r[g].x,y:r[g].y}}r=d}this.setPrivateRaw("previousPoints",h),this.setPrivateRaw("points",r),this.morphAnimation=this.animatePrivate({key:"morphProgress",from:0,to:1,duration:this.get("animationDuration",0),easing:this.get("animationEasing")}),this._root.events.once("frameended",()=>{this._markDirtyPrivateKey("morphProgress")})}}else this.setPrivateRaw("previousPoints",e),this.setPrivateRaw("points",e);let s=1/0,i=-1/0,a=1/0,n=-1/0;if(e)for(let r=1,h=e.length;r<h;r++){const l=e[r];s=Math.min(s,l.x),i=Math.max(i,l.x),a=Math.min(a,l.y),n=Math.max(n,l.y)}this.setPrivate("minX",s),this.setPrivate("maxX",i),this.setPrivate("minY",a),this.setPrivate("maxY",a)}this.isPrivateDirty("morphProgress")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._draw()}_draw(){const e=this.getPrivate("previousPoints"),t=this.getPrivate("points"),s=this.getPrivate("morphProgress",1);if(t&&e){const i=t[0],a=e[0];i&&this._display.moveTo(a.x+(i.x-a.x)*s,a.y+(i.y-a.y)*s);for(let n=1,r=t.length;n<r;n++){const h=t[n],l=e[n];this._display.lineTo(l.x+(h.x-l.x)*s,l.y+(h.y-l.y)*s)}this._display.closePath()}}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(Ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Polygon"});Object.defineProperty(Ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:O.classNames.concat([Ae.className])});class Fe extends O{_beforeChanged(){super._beforeChanged(),(this.isDirty("radiusX")||this.isDirty("radiusY")||this.isDirty("rotation"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawEllipse(0,0,Math.abs(this.get("radiusX")),Math.abs(this.get("radiusY")))}}Object.defineProperty(Fe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Ellipse"});Object.defineProperty(Fe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:O.classNames.concat([Fe.className])});class Ee extends O{_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("spikes"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this._display,t=this.get("radius",0),s=ye(this.get("innerRadius",0),t),i=this.get("spikes",0),a=Math.PI/i;let n=Math.PI/2*3;e.moveTo(0,-t);for(let r=0;r<i;r++)e.lineTo(Math.cos(n)*t,Math.sin(n)*t),n+=a,e.lineTo(Math.cos(n)*s,Math.sin(n)*s),n+=a;e.lineTo(0,-t),e.closePath()}}}Object.defineProperty(Ee,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Star"});Object.defineProperty(Ee,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:O.classNames.concat([Ee.className])});class Be extends j{constructor(){super(...arguments),Object.defineProperty(this,"labelContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(j.new(this._root,{}))}),Object.defineProperty(this,"markerContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(j.new(this._root,{}))}),Object.defineProperty(this,"startLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(Y.new(this._root,{themeTags:["start"]}))}),Object.defineProperty(this,"endLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(Y.new(this._root,{themeTags:["end"]}))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new se(te.new({}),()=>q._new(this._root,{themeTags:R(this.markers.template.get("themeTags",[]),[this.get("orientation"),"heatlegend","marker"])},[this.markers.template])))})}_afterNew(){this._settings.themeTags=R(this._settings.themeTags,["heatlegend",this._settings.orientation]),super._afterNew(),this.set("tooltip",mt.new(this._root,{themeTags:["heatlegend"]}))}makeMarker(){const e=this.markers.make();return e.states.create("disabled",{}),e}showValue(e,t,s){const i=this.getTooltip();if(i&&P(e)){const a=this.get("startValue",0),n=this.get("endValue",1);let r=(e-a)/(n-a);(r==1/0||r==-1/0||isNaN(r))&&(r=.5);const h=this.get("startColor"),l=this.get("endColor");t||(t=this.getNumberFormatter().format(e)),s||(s=$.interpolate(r,h,l)),i.label.set("text",t);let o;this.get("orientation")=="vertical"?o=this.markerContainer.toGlobal({x:0,y:this.innerHeight()*(1-r)}):o=this.markerContainer.toGlobal({x:this.innerWidth()*r,y:0});let d=i.get("background");d&&d.set("fill",s),i.set("pointTo",o),i.show()}}_prepareChildren(){super._prepareChildren();const e=this.labelContainer,t=this.get("orientation"),s=this.startLabel,i=this.endLabel,a=this.getTooltip();if(this.isDirty("orientation")&&(t=="vertical"?(this.markerContainer.setAll({layout:this._root.verticalLayout,height:A}),this.set("layout",this._root.horizontalLayout),s.setAll({y:A,x:void 0,centerY:A,centerX:A}),i.setAll({y:0,x:void 0,centerY:0,centerX:A}),e.setAll({height:A,width:void 0}),a&&a.set("pointerOrientation","horizontal")):(this.markerContainer.setAll({layout:this._root.horizontalLayout,width:A}),this.set("layout",this._root.verticalLayout),s.setAll({x:0,y:void 0,centerX:0,centerY:0}),i.setAll({x:A,y:void 0,centerX:A,centerY:0}),e.setAll({width:A,height:void 0}),a&&a.set("pointerOrientation","vertical"))),this.isDirty("stepCount")){const n=this.get("stepCount",1),r=this.get("startColor"),h=this.get("endColor");if(this.markerContainer.children.clear(),n>1)for(let l=0;l<n;l++){const o=this.makeMarker();t=="vertical"?this.markerContainer.children.moveValue(o,0):this.markerContainer.children.push(o),r&&h&&o.set("fill",$.interpolate(l/n,r,h))}else if(n==1){const l=this.makeMarker();this.markerContainer.children.push(l);const o=Tt.new(this._root,{stops:[{color:r},{color:h}]});if(t=="vertical"){o.set("rotation",90);let d=o.get("stops");d&&d.reverse()}else o.set("rotation",0);r&&h&&l.set("fillGradient",o)}}(this.isDirty("startText")||this.isDirty("startValue"))&&s.set("text",this.get("startText",this.getNumberFormatter().format(this.get("startValue",0)))),(this.isDirty("endText")||this.isDirty("endValue"))&&i.set("text",this.get("endText",this.getNumberFormatter().format(this.get("endValue",1))))}}Object.defineProperty(Be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HeatLegend"});Object.defineProperty(Be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.classNames.concat([Be.className])});class $e extends Y{_afterNew(){super._afterNew();const e=this.children.push(j.new(this._root,{html:'<textarea class="am5-editable-label"></textarea>',isMeasured:!1}));e.hide();const t=this.get("editOn","click");t!="none"&&(e.events.on(t,i=>{}),this.events.on(t,i=>{this.set("active",!0)})),this.setPrivate("input",e);let s=this.get("background");s?s.set("themeTags",["editablelabel","background"]):s=this.set("background",q.new(this._root,{themeTags:["editablelabel","background"]}))}_prepareChildren(){super._prepareChildren(),this._maybeInitTextarea()}_updateChildren(){if(super._updateChildren(),this.isDirty("active")){const e=this.get("active",!1);e?this._startEditing():this._stopEditing();const t=this.get("background");t&&t.set("active",e)}this._syncText(),this._syncStyle()}_maybeInitTextarea(){if(!this._isInited()){const e=this.getPrivate("input");if(e&&e.getPrivate("htmlElement")){const s=e.getPrivate("htmlElement").querySelector(".am5-editable-label");s&&(this.setPrivate("textarea",s),s.addEventListener("input",i=>{this.get("multiLine")===!1&&(s.value=s.value.replace(/\n/g," ")),this.set("text",s.value),this._syncStyle()}),s.addEventListener("blur",i=>this.set("active",!1)),ot("keyboardevents")&&this._disposers.push(be(document,"keydown",i=>{Me(i)=="Escape"&&this.set("active",!1)})),this._disposers.push(be(document,"keydown",i=>{Me(i)=="Enter"&&this.get("multiLine")===!1&&(i.preventDefault(),this.set("active",!1))})),this.events.dispatch("inited",{type:"inited",target:this}))}}}_isInited(){return!!this.getPrivate("textarea")}_startEditing(){if(!this._isInited()){this.events.once("inited",()=>{this._startEditing()});return}this._text.set("opacity",0);const e=this.getPrivate("input"),t=this.getPrivate("textarea");t&&(this.get("text","")==""&&this.set("text"," "),e.show(0),this.setTimeout(()=>{this._syncStyle(),t.focus()},100))}_stopEditing(){if(!this._isInited()){this.events.once("inited",()=>{this._stopEditing()});return}const e=this.getPrivate("input"),t=this.getPrivate("textarea");t&&(this.set("text",t.value),e.hide(0),this._text.set("opacity",1))}_syncStyle(){const e=this.getPrivate("input"),t=this.getPrivate("textarea");if(t){const s=e.getPrivate("htmlElement"),i=window.getComputedStyle(t);re(i,u=>{t.style[u]="initial"}),t.style.color=this.get("fill",ht(0)).toCSS(this.get("fillOpacity",1)),t.style.backgroundColor="rgba(0, 0, 0, 0)",t.style.border="none",t.style.outline="none",t.style.padding="0",t.wrap="off",t.style.resize="none",t.style.overflow="hidden";const a=this.get("maxWidth",0)-this.get("paddingLeft",0)-this.get("paddingRight",0);a>0?t.style.maxWidth=a+"px":t.style.minWidth="",t.style.height="auto",t.style.minHeight=t.scrollHeight+"px",this.get("width")&&(t.style.width=this.width()-this.get("paddingLeft",0)-this.get("paddingRight",0)+"px",t.style.minWidth="");const n=this.get("lineHeight");n?n instanceof ae?t.style.lineHeight=n.value+"":P(n)&&(t.style.lineHeight=n+""):t.style.lineHeight="1.2";let r=this.get("fontFamily");r||(r=getComputedStyle(e.getPrivate("htmlElement"),"font-family").getPropertyValue("font-family")),t.style.fontFamily=r;let h=this.get("fontSize");h?P(h)?h=h+"px":h=h:h=getComputedStyle(e.getPrivate("htmlElement"),"font-size").getPropertyValue("font-size"),t.style.fontSize=h;let l=this.get("fontWeight");l?l=l:l=getComputedStyle(e.getPrivate("htmlElement"),"font-weight").getPropertyValue("font-weight"),t.style.fontWeight=l;let o=this.get("fontStyle");o?o=o:o=getComputedStyle(e.getPrivate("htmlElement"),"font-style").getPropertyValue("font-style"),t.style.fontStyle=o,this.get("oversizedBehavior")=="wrap"?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="nowrap",this._root.events.on("frameended",()=>{t.style.minWidth==""&&(t.style.minWidth=t.scrollWidth+20+"px");const u=this.get("textAlign","start");u=="center"?(t.style.textAlign="center",!s.style.transform.match(/translateX/)&&!this.get("width")&&(s.style.transform+=" translateX(-50%)")):u=="end"?(t.style.textAlign="right",!s.style.transform.match(/translateX/)&&!this.get("width")&&(s.style.transform+=" translateX(-100%)")):t.style.textAlign=u})}}_syncText(){const e=this.getPrivate("textarea");let t=this.get("text","");t==" "&&(t=""),e&&(e.value=t)}}Object.defineProperty($e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"EditableLabel"});Object.defineProperty($e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Y.classNames.concat([$e.className])});class Ge extends ut{constructor(){super(...arguments),Object.defineProperty(this,"itemContainers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new se(te.new({}),()=>j._new(this._root,{themeTags:R(this.itemContainers.template.get("themeTags",[]),["legend","item"]),themeTagsSelf:R(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"]),background:q.new(this._root,{themeTags:R(this.itemContainers.template.get("themeTags",[]),["legend","item","background"]),themeTagsSelf:R(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"])})},[this.itemContainers.template])))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new se(te.new({}),()=>j._new(this._root,{themeTags:R(this.markers.template.get("themeTags",[]),["legend","marker"])},[this.markers.template])))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new se(te.new({}),()=>Y._new(this._root,{themeTags:R(this.labels.template.get("themeTags",[]),["legend","label"])},[this.labels.template])))}),Object.defineProperty(this,"valueLabels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new se(te.new({}),()=>Y._new(this._root,{themeTags:R(this.valueLabels.template.get("themeTags",[]),["legend","label","value"])},[this.valueLabels.template])))}),Object.defineProperty(this,"markerRectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new se(te.new({}),()=>q._new(this._root,{themeTags:R(this.markerRectangles.template.get("themeTags",[]),["legend","marker","rectangle"])},[this.markerRectangles.template])))})}_afterNew(){this._settings.themeTags=R(this._settings.themeTags,["legend"]),this.fields.push("name","stroke","fill"),super._afterNew()}makeItemContainer(e){const t=this.children.push(this.itemContainers.make());return t._setDataItem(e),this.itemContainers.push(t),t.states.create("disabled",{}),t}makeMarker(){const e=this.markers.make();return this.markers.push(e),e.states.create("disabled",{}),e}makeLabel(){const e=this.labels.make();return e.states.create("disabled",{}),e}makeValueLabel(){const e=this.valueLabels.make();return e.states.create("disabled",{}),e}makeMarkerRectangle(){const e=this.markerRectangles.make();return e.states.create("disabled",{}),e}processDataItem(e){super.processDataItem(e);const t=this.makeItemContainer(e),s=this.get("nameField"),i=this.get("fillField"),a=this.get("strokeField");if(t){const n=this.get("clickTarget","itemContainer"),r=e.dataContext;r&&r.set&&r.set("legendDataItem",e),t._setDataItem(e),e.set("itemContainer",t);const h=this.makeMarker();if(h){t.children.push(h),h._setDataItem(e),e.set("marker",h);const d=this.get("useDefaultMarker"),u=h.children.push(this.makeMarkerRectangle());let g=e.get("fill"),p=e.get("stroke");e.set("markerRectangle",u),r&&r.get&&(g=r.get(i,g),p=r.get(a,p)),p||(p=g),d?r.on&&(r.on(i,()=>{u.set("fill",r.get(i))}),r.on(a,()=>{u.set("stroke",r.get(a))})):r&&r.createLegendMarker&&r.createLegendMarker(),u.setAll({fill:g,stroke:p});const f=r.component;f&&f.updateLegendMarker&&f.updateLegendMarker(r)}const l=this.makeLabel();if(l){t.children.push(l),l._setDataItem(e),e.set("label",l),l.text.on("text",()=>{t.setRaw("ariaLabel",l.text._getText()+(this.get("clickTarget")!=="none"?"; "+this._t("Press ENTER to toggle"):"")),t.markDirtyAccessibility()}),r&&r.get&&e.set("name",r.get(s));let d=e.get("name");d&&l.set("text",d)}const o=this.makeValueLabel();if(o&&(t.children.push(o),o._setDataItem(e),e.set("valueLabel",o)),r&&r.show&&(r.on("visible",d=>{t.set("disabled",!d)}),r.get("visible")||t.set("disabled",!0),n!="none")){let d=t;n=="marker"&&(d=h),this._addClickEvents(d,r,e)}this.children.values.sort((d,u)=>{const g=d.dataItem.dataContext,p=u.dataItem.dataContext;if(g&&p){const f=this.data.indexOf(g),y=this.data.indexOf(p);if(f>y)return 1;if(f<y)return-1}return 0}),r&&r.updateLegendValue&&r.updateLegendValue()}}_addClickEvents(e,t,s){e.set("cursorOverStyle","pointer"),e.events.on("pointerover",()=>{const i=t.component;i&&i.hoverDataItem&&i.hoverDataItem(t)}),e.events.on("pointerout",()=>{const i=t.component;i&&i.hoverDataItem&&i.unhoverDataItem(t)}),e.events.on("click",()=>{const i=s.get("label").text._getText();t.show&&t.isHidden&&(t.isHidden()||t.get("visible")===!1)?(t.show(),e.set("disabled",!1),this._root.readerAlert(this._t("%1 shown",this._root.locale,i))):t.hide&&(t.hide(),e.set("disabled",!0),this._root.readerAlert(this._t("%1 hidden",this._root.locale,i)))})}disposeDataItem(e){super.disposeDataItem(e);const t=e.dataContext;t&&t.get&&t.get("legendDataItem")==e&&t.set("legendDataItem",void 0);let s=e.get("itemContainer");s&&(this.itemContainers.removeValue(s),s.dispose());let i=e.get("marker");i&&(this.markers.removeValue(i),i.dispose());let a=e.get("markerRectangle");a&&(this.markerRectangles.removeValue(a),a.dispose());let n=e.get("label");n&&(this.labels.removeValue(n),n.dispose());let r=e.get("valueLabel");r&&(this.valueLabels.removeValue(r),r.dispose())}}Object.defineProperty(Ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Legend"});Object.defineProperty(Ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ut.classNames.concat([Ge.className])});function rt(c,e){for(let t=0,s=e.length;t<s;t++){const i=e[t];if(i.length>0){let a=i[0];if(a.length>0){let n=a[0];c.moveTo(n.x,n.y);for(let r=0,h=i.length;r<h;r++)Rt(c,i[r])}}}}function Rt(c,e){for(let t=0,s=e.length;t<s;t++){const i=e[t];c.lineTo(i.x,i.y)}}class ne extends O{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("points"),t=this.get("segments");if(e&&e.length>0){let s=e[0];this._display.moveTo(s.x,s.y),rt(this._display,[[e]])}else if(t)rt(this._display,t);else if(!this.get("draw")){let s=this.width(),i=this.height();this._display.moveTo(0,0),this._display.lineTo(s,i)}}}}Object.defineProperty(ne,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"});Object.defineProperty(ne,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:O.classNames.concat([ne.className])});class ze extends ct{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makePicture(void 0)})}_changed(){if(super._changed(),this.isDirty("width")){const e=this.get("width");this._display.width=P(e)?e:void 0}if(this.isDirty("height")){const e=this.get("height");this._display.height=P(e)?e:void 0}if(this.isDirty("shadowColor")){this._display.clear();const e=this.get("shadowColor");this._display.shadowColor=e??void 0}this.isDirty("shadowBlur")&&(this._display.clear(),this._display.shadowBlur=this.get("shadowBlur")),this.isDirty("shadowOffsetX")&&(this._display.clear(),this._display.shadowOffsetX=this.get("shadowOffsetX")),this.isDirty("shadowOffsetY")&&(this._display.clear(),this._display.shadowOffsetY=this.get("shadowOffsetY")),this.isDirty("shadowOpacity")&&(this._display.clear(),this._display.shadowOpacity=this.get("shadowOpacity")),(this.isDirty("src")||this.isDirty("cors"))&&(this._display.clear(),this._load())}_load(){const e=this.get("src");if(e){const t=new Image;t.crossOrigin=this.get("cors","anonymous"),t.src=e;const s=this.events;t.decode().then(()=>{this._display.image=t,this._updateSize(),!s.isDisposed()&&s.isEnabled("loaded")&&s.dispatch("loaded",{type:"loaded",target:this})}).catch(i=>{!s.isDisposed()&&s.isEnabled("loaderror")&&s.dispatch("loaderror",{type:"loaderror",target:this})})}}_updateSize(){super._updateSize();const e=this._display.image;if(e){let t=this.getPrivate("width",this.get("width")),s=this.getPrivate("height",this.get("height"));const i=e.width&&e.height?e.width/e.height:0;P(t)&&P(s)?(this._display.width=t,this._display.height=s):P(t)&&i?s=t/i:P(s)&&i?t=s*i:(t=e.width,s=e.height),P(t)&&(this._display.width=t),P(s)&&(this._display.height=s),this.markDirtyBounds(),this.markDirty()}}}Object.defineProperty(ze,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Picture"});Object.defineProperty(ze,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ct.classNames.concat([ze.className])});class _e extends dt{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*je,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(_e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"});Object.defineProperty(_e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:dt.classNames.concat([_e.className])});class Ve extends Y{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(_e.new(this._root,{}))}baseRadius(){const e=this.getPrivate("radius",0),t=this.getPrivate("innerRadius",0),s=this.get("baseRadius",0);return t+ye(s,e-t)}radius(){const e=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const e=this.get("textType","adjusted"),t=this.get("inside",!1),s=this.get("orientation");let i=xt(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",t);const a=X(i),n=W(i);let r=this.baseRadius(),h=this.radius();if(this._display.angle=0,e=="circular")this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw("x",void 0),this.setRaw("y",void 0),this._text.set("orientation",s),this._text.set("radius",h);else{r==0&&(i=0,h=0);let l=h*n,o=h*a;e=="radial"?(this.setRaw("x",l),this.setRaw("y",o),i<90||i>270||s!="auto"?(this._display.angle=i,this._flipped=!1):(this._display.angle=i+180,this._flipped=!0),this._dirty.rotation=!1):e=="adjusted"?(this.setRaw("centerX",I),this.setRaw("centerY",I),this.setRaw("x",l),this.setRaw("y",o)):e=="regular"&&(this.setRaw("x",l),this.setRaw("y",o))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const e=this.get("textType","regular"),t=this.get("inside",!1);let s=0,i=0,a=this.get("labelAngle",0),n=this.localBounds(),r=n.right-n.left,h=n.bottom-n.top;if(e=="radial"){if(this._flipped){let l=this.get("centerX");l instanceof ae&&(r=r*(1-l.value*2)),s=r*W(a),i=r*X(a)}}else!t&&e=="adjusted"&&(s=r/2*W(a),i=h/2*X(a));this.setRaw("dx",s),this.setRaw("dy",i),super._updatePosition()}get text(){return this._text}}Object.defineProperty(Ve,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"});Object.defineProperty(Ve,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Y.classNames.concat([Ve.className])});class He extends O{_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){const e=this.width(),t=this.height(),s=this._display;s.moveTo(-e/2,t/2),s.lineTo(0,-t/2),s.lineTo(e/2,t/2),s.lineTo(-e/2,t/2),s.closePath()}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(He,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Triangle"});Object.defineProperty(He,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:O.classNames.concat([He.className])});class le extends j{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:this._makeThumb()}),Object.defineProperty(this,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_addOrientationClass(){this._settings.themeTags=R(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=q.new(this._root,{themeTags:R(this._settings.themeTags,["main","background"])}))}_makeButton(){return this.children.push(Ct.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:O.new(this._root,{themeTags:["icon"]})}))}_makeThumb(){return this.children.push(q.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}_handleAnimation(e){e&&this._disposers.push(e.events.on("stopped",()=>{this.setPrivateRaw("isBusy",!1),this._thumbBusy=!1}))}_afterNew(){this._addOrientationClass(),super._afterNew();const e=this.startGrip,t=this.endGrip,s=this.thumb,i=this.get("background");i&&this._disposers.push(i.events.on("click",a=>{this.setPrivateRaw("isBusy",!0);const n=this._display.toLocal(a.point),r=this.width(),h=this.height(),l=this.get("orientation");let o;l=="vertical"?o=(n.y-s.height()/2)/h:o=(n.x-s.width()/2)/r;let d,u;l=="vertical"?(d=o*h,u="y"):(d=o*r,u="x");const g=this.get("animationDuration",0);g>0?(this._thumbBusy=!0,this._handleAnimation(this.thumb.animate({key:u,to:d,duration:g,easing:this.get("animationEasing")}))):(this.thumb.set(u,d),this._root.events.once("frameended",()=>{this.setPrivateRaw("isBusy",!1)}))})),this._disposers.push(s.events.on("dblclick",a=>{if(!Pt(a.originalEvent,this))return;const n=this.get("animationDuration",0),r=this.get("animationEasing");this.animate({key:"start",to:0,duration:n,easing:r}),this.animate({key:"end",to:1,duration:n,easing:r})})),this._disposers.push(e.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._startDown=!0,this._gripDown="start"})),this._disposers.push(t.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._endDown=!0,this._gripDown="end"})),this._disposers.push(s.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._thumbDown=!0,this._gripDown=void 0})),this._disposers.push(e.events.on("globalpointerup",()=>{this._startDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._startDown=!1})),this._disposers.push(t.events.on("globalpointerup",()=>{this._endDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._endDown=!1})),this._disposers.push(s.events.on("globalpointerup",()=>{this._thumbDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._thumbDown=!1})),this._disposers.push(e.on("x",()=>{this._updateThumb()})),this._disposers.push(t.on("x",()=>{this._updateThumb()})),this._disposers.push(e.on("y",()=>{this._updateThumb()})),this._disposers.push(t.on("y",()=>{this._updateThumb()})),this._disposers.push(s.events.on("positionchanged",()=>{this._updateGripsByThumb()})),this.get("orientation")=="vertical"?(e.set("x",0),t.set("x",0),this._disposers.push(s.adapters.add("y",a=>Math.max(Math.min(Number(a),this.height()-s.height()),0))),this._disposers.push(s.adapters.add("x",a=>this.width()/2)),this._disposers.push(e.adapters.add("x",a=>this.width()/2)),this._disposers.push(t.adapters.add("x",a=>this.width()/2)),this._disposers.push(e.adapters.add("y",a=>Math.max(Math.min(Number(a),this.height()),0))),this._disposers.push(t.adapters.add("y",a=>Math.max(Math.min(Number(a),this.height()),0)))):(e.set("y",0),t.set("y",0),this._disposers.push(s.adapters.add("x",a=>Math.max(Math.min(Number(a),this.width()-s.width()),0))),this._disposers.push(s.adapters.add("y",a=>this.height()/2)),this._disposers.push(e.adapters.add("y",a=>this.height()/2)),this._disposers.push(t.adapters.add("y",a=>this.height()/2)),this._disposers.push(e.adapters.add("x",a=>Math.max(Math.min(Number(a),this.width()),0))),this._disposers.push(t.adapters.add("x",a=>Math.max(Math.min(Number(a),this.width()),0))))}_updateChildren(){super._updateChildren(),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}_changed(){if(super._changed(),this.isDirty("start")||this.isDirty("end")){const e="rangechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}_released(){const e="released";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}updateGrips(){const e=this.startGrip,t=this.endGrip,s=this.get("orientation"),i=this.height(),a=this.width();s=="vertical"?(e.set("y",i*this.get("start",0)),t.set("y",i*this.get("end",1))):(e.set("x",a*this.get("start",0)),t.set("x",a*this.get("end",1)));const n=this.getPrivate("positionTextFunction"),r=Math.round(this.get("start",0)*100),h=Math.round(this.get("end",0)*100);let l,o;n?(l=n.call(this,this.get("start",0)),o=n.call(this,this.get("end",0))):(l=r+"%",o=h+"%"),e.set("ariaLabel",this._t("From %1",void 0,l)),e.set("ariaValueNow",""+r),e.set("ariaValueText",r+"%"),e.set("ariaValueMin","0"),e.set("ariaValueMax","100"),t.set("ariaLabel",this._t("To %1",void 0,o)),t.set("ariaValueNow",""+h),t.set("ariaValueText",h+"%"),t.set("ariaValueMin","0"),t.set("ariaValueMax","100")}_updateThumb(){const e=this.thumb,t=this.startGrip,s=this.endGrip,i=this.height(),a=this.width();let n=t.x(),r=s.x(),h=t.y(),l=s.y(),o=0,d=1;this.get("orientation")=="vertical"?P(h)&&P(l)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("height",l-h),e.set("y",h)),o=h/i,d=l/i):P(n)&&P(r)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("width",r-n),e.set("x",n)),o=n/a,d=r/a),this.getPrivate("isBusy")&&(this.get("start")!=o||this.get("end")!=d)&&(this.set("start",o),this.set("end",d));const u=this.getPrivate("positionTextFunction"),g=Math.round(this.get("start",0)*100),p=Math.round(this.get("end",0)*100);let f,y;u?(f=u.call(this,this.get("start",0)),y=u.call(this,this.get("end",0))):(f=g+"%",y=p+"%"),e.set("ariaLabel",this._t("From %1 to %2",void 0,f,y)),e.set("ariaValueNow",""+g),e.set("ariaValueText",g+"%")}_updateGripsByThumb(){const e=this.thumb,t=this.startGrip,s=this.endGrip;if(this.get("orientation")=="vertical"){const i=e.height();t.set("y",e.y()),s.set("y",e.y()+i)}else{const i=e.width();t.set("x",e.x()),s.set("x",e.x()+i)}}}Object.defineProperty(le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"});Object.defineProperty(le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.classNames.concat([le.className])});class Ie extends le{_afterNew(){this._addOrientationClass(),super._afterNew(),this.endGrip.setPrivate("visible",!1),this.thumb.setPrivate("visible",!1)}updateGrips(){super.updateGrips();const e=this.startGrip;this.endGrip.setAll({x:e.x(),y:e.y()}),this.setRaw("end",this.get("start"))}}Object.defineProperty(Ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slider"});Object.defineProperty(Ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:le.classNames.concat([Ie.className])});function H(c){return function(){return c}}const at=Math.abs,C=Math.atan2,J=Math.cos,Ot=Math.max,Oe=Math.min,F=Math.sin,ie=Math.sqrt,T=1e-12,oe=Math.PI,we=oe/2,St=2*oe;function Mt(c){return c>1?0:c<-1?oe:Math.acos(c)}function nt(c){return c>=1?we:c<=-1?-we:Math.asin(c)}const We=Math.PI,Xe=2*We,K=1e-6,jt=Xe-K;function pt(c){this._+=c[0];for(let e=1,t=c.length;e<t;++e)this._+=arguments[e]+c[e]}function Lt(c){let e=Math.floor(c);if(!(e>=0))throw new Error(`invalid digits: ${c}`);if(e>15)return pt;const t=10**e;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+s[i]}}class At{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?pt:Lt(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,s,i){this._append`Q${+e},${+t},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(e,t,s,i,a,n){this._append`C${+e},${+t},${+s},${+i},${this._x1=+a},${this._y1=+n}`}arcTo(e,t,s,i,a){if(e=+e,t=+t,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let n=this._x1,r=this._y1,h=s-e,l=i-t,o=n-e,d=r-t,u=o*o+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(u>K)if(!(Math.abs(d*h-l*o)>K)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let g=s-n,p=i-r,f=h*h+l*l,y=g*g+p*p,m=Math.sqrt(f),x=Math.sqrt(u),v=a*Math.tan((We-Math.acos((f+u-y)/(2*m*x)))/2),w=v/x,D=v/m;Math.abs(w-1)>K&&this._append`L${e+w*o},${t+w*d}`,this._append`A${a},${a},0,0,${+(d*g>o*p)},${this._x1=e+D*h},${this._y1=t+D*l}`}}arc(e,t,s,i,a,n){if(e=+e,t=+t,s=+s,n=!!n,s<0)throw new Error(`negative radius: ${s}`);let r=s*Math.cos(i),h=s*Math.sin(i),l=e+r,o=t+h,d=1^n,u=n?i-a:a-i;this._x1===null?this._append`M${l},${o}`:(Math.abs(this._x1-l)>K||Math.abs(this._y1-o)>K)&&this._append`L${l},${o}`,s&&(u<0&&(u=u%Xe+Xe),u>jt?this._append`A${s},${s},0,1,${d},${e-r},${t-h}A${s},${s},0,1,${d},${this._x1=l},${this._y1=o}`:u>K&&this._append`A${s},${s},0,${+(u>=We)},${d},${this._x1=e+s*Math.cos(a)},${this._y1=t+s*Math.sin(a)}`)}rect(e,t,s,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function Ft(c){let e=3;return c.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const s=Math.floor(t);if(!(s>=0))throw new RangeError(`invalid digits: ${t}`);e=s}return c},()=>new At(e)}function Et(c){return c.innerRadius}function Bt(c){return c.outerRadius}function $t(c){return c.startAngle}function Gt(c){return c.endAngle}function zt(c){return c&&c.padAngle}function Vt(c,e,t,s,i,a,n,r){var h=t-c,l=s-e,o=n-i,d=r-a,u=d*h-o*l;if(!(u*u<T))return u=(o*(e-a)-d*(c-i))/u,[c+u*h,e+u*l]}function me(c,e,t,s,i,a,n){var r=c-t,h=e-s,l=(n?a:-a)/ie(r*r+h*h),o=l*h,d=-l*r,u=c+o,g=e+d,p=t+o,f=s+d,y=(u+p)/2,m=(g+f)/2,x=p-u,v=f-g,w=x*x+v*v,D=i-a,N=u*f-p*g,G=(v<0?-1:1)*ie(Ot(0,D*D*w-N*N)),z=(N*v-x*G)/w,V=(-N*x-v*G)/w,L=(N*v+x*G)/w,S=(-N*x+v*G)/w,M=z-y,b=V-m,_=L-y,Z=S-m;return M*M+b*b>_*_+Z*Z&&(z=L,V=S),{cx:z,cy:V,x01:-o,y01:-d,x11:z*(i/D-1),y11:V*(i/D-1)}}function Ht(){var c=Et,e=Bt,t=H(0),s=null,i=$t,a=Gt,n=zt,r=null,h=Ft(l);function l(){var o,d,u=+c.apply(this,arguments),g=+e.apply(this,arguments),p=i.apply(this,arguments)-we,f=a.apply(this,arguments)-we,y=at(f-p),m=f>p;if(r||(r=o=h()),g<u&&(d=g,g=u,u=d),!(g>T))r.moveTo(0,0);else if(y>St-T)r.moveTo(g*J(p),g*F(p)),r.arc(0,0,g,p,f,!m),u>T&&(r.moveTo(u*J(f),u*F(f)),r.arc(0,0,u,f,p,m));else{var x=p,v=f,w=p,D=f,N=y,G=y,z=n.apply(this,arguments)/2,V=z>T&&(s?+s.apply(this,arguments):ie(u*u+g*g)),L=Oe(at(g-u)/2,+t.apply(this,arguments)),S=L,M=L,b,_;if(V>T){var Z=nt(V/u*F(z)),he=nt(V/g*F(z));(N-=Z*2)>T?(Z*=m?1:-1,w+=Z,D-=Z):(N=0,w=D=(p+f)/2),(G-=he*2)>T?(he*=m?1:-1,x+=he,v-=he):(G=0,x=v=(p+f)/2)}var U=g*J(x),ee=g*F(x),ue=u*J(D),ce=u*F(D);if(L>T){var de=g*J(v),ge=g*F(v),ke=u*J(w),De=u*F(w),B;if(y<oe)if(B=Vt(U,ee,ke,De,de,ge,ue,ce)){var Ce=U-B[0],Te=ee-B[1],Ne=de-B[0],Re=ge-B[1],st=1/F(Mt((Ce*Ne+Te*Re)/(ie(Ce*Ce+Te*Te)*ie(Ne*Ne+Re*Re)))/2),it=ie(B[0]*B[0]+B[1]*B[1]);S=Oe(L,(u-it)/(st-1)),M=Oe(L,(g-it)/(st+1))}else S=M=0}G>T?M>T?(b=me(ke,De,U,ee,g,M,m),_=me(de,ge,ue,ce,g,M,m),r.moveTo(b.cx+b.x01,b.cy+b.y01),M<L?r.arc(b.cx,b.cy,M,C(b.y01,b.x01),C(_.y01,_.x01),!m):(r.arc(b.cx,b.cy,M,C(b.y01,b.x01),C(b.y11,b.x11),!m),r.arc(0,0,g,C(b.cy+b.y11,b.cx+b.x11),C(_.cy+_.y11,_.cx+_.x11),!m),r.arc(_.cx,_.cy,M,C(_.y11,_.x11),C(_.y01,_.x01),!m))):(r.moveTo(U,ee),r.arc(0,0,g,x,v,!m)):r.moveTo(U,ee),!(u>T)||!(N>T)?r.lineTo(ue,ce):S>T?(b=me(ue,ce,de,ge,u,-S,m),_=me(U,ee,ke,De,u,-S,m),r.lineTo(b.cx+b.x01,b.cy+b.y01),S<L?r.arc(b.cx,b.cy,S,C(b.y01,b.x01),C(_.y01,_.x01),!m):(r.arc(b.cx,b.cy,S,C(b.y01,b.x01),C(b.y11,b.x11),!m),r.arc(0,0,u,C(b.cy+b.y11,b.cx+b.x11),C(_.cy+_.y11,_.cx+_.x11),m),r.arc(_.cx,_.cy,S,C(_.y11,_.x11),C(_.y01,_.x01),!m))):r.arc(0,0,u,D,w,m)}if(r.closePath(),o)return r=null,o+""||null}return l.centroid=function(){var o=(+c.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-oe/2;return[J(d)*o,F(d)*o]},l.innerRadius=function(o){return arguments.length?(c=typeof o=="function"?o:H(+o),l):c},l.outerRadius=function(o){return arguments.length?(e=typeof o=="function"?o:H(+o),l):e},l.cornerRadius=function(o){return arguments.length?(t=typeof o=="function"?o:H(+o),l):t},l.padRadius=function(o){return arguments.length?(s=o==null?null:typeof o=="function"?o:H(+o),l):s},l.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:H(+o),l):i},l.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:H(+o),l):a},l.padAngle=function(o){return arguments.length?(n=typeof o=="function"?o:H(+o),l):n},l.context=function(o){return arguments.length?(r=o??null,l):r},l}class Ye extends O{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:Ht()})}_getTooltipPoint(){let e=this.get("tooltipX"),t=this.get("tooltipY"),s=0,i=0;P(e)&&(s=e),P(t)&&(i=t);let a=this.get("radius",0),n=this.get("innerRadius",0),r=this.get("dRadius",0),h=this.get("dInnerRadius",0);return a+=r,n+=h,n<0&&(n=a+n),e instanceof ae&&(s=this.ix*(n+(a-n)*e.value)),t instanceof ae&&(i=this.iy*(n+(a-n)*t.value)),this.get("arc")>=360&&n==0&&(s=0,i=0),{x:s,y:i}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get("startAngle",0),t=this.get("arc",0);const s=this._generator;t<0&&(e=e+t,t=t*-1),t>.1&&s.cornerRadius(this.get("cornerRadius",0)),s.context(this._display);let i=this.get("radius",0),a=this.get("innerRadius",0),n=this.get("dRadius",0),r=this.get("dInnerRadius",0);i+=n,a+=r,a<0&&(a=i+a),s({innerRadius:a,outerRadius:i,startAngle:(e+90)*je,endAngle:(e+t+90)*je});let h=e+t/2;this.ix=W(h),this.iy=X(h);const l=this.get("shiftRadius",0);this.setRaw("dx",this.ix*l),this.setRaw("dy",this.iy*l),this.markDirtyPosition()}}}Object.defineProperty(Ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"});Object.defineProperty(Ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:O.classNames.concat([Ye.className])});class qe extends ne{}Object.defineProperty(qe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"});Object.defineProperty(qe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ne.classNames.concat([qe.className])});class Ze extends E{constructor(){super(...arguments),Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:this.canvas.getContext("2d")}),Object.defineProperty(this,"_clearGrain",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){this.canvas.width=this.get("width",200),this.canvas.height=this.get("height",200),(this.isDirty("size")||this.isDirty("density")||this.isDirty("minOpacity")||this.isDirty("maxOpacity")||this.isDirty("colors")||this.isDirty("horizontalGap")||this.isDirty("verticalGap"))&&(this._clearGrain=!0),super._beforeChanged()}_changed(){if(super._changed(),this._clearGrain){const e=this.get("width",200),t=this.get("height",200),s=this.context.getImageData(0,0,e,t),i=Math.max(1,this.get("size",1)),a=this.get("minOpacity",0),n=this.get("maxOpacity",.3),r=this.get("colors",[this.get("color",$.fromHex(0))]),h=e/i,l=t/i,o=this.get("density",1),d=this.get("horizontalGap",0)+1,u=this.get("verticalGap",0)+1;for(let g=0;g<l;g++)if(!(u>0&&g/u!=Math.round(g/u)))for(let p=0;p<h;p++){const f=r[Math.floor(Math.random()*r.length)],y=(a+Math.random()*(n-a))*255,m=Math.random();d>0&&p/d!=Math.round(p/d)||m<o&&this._setRectData(p,g,i,e,s.data,f.r,f.g,f.b,y)}this.context.putImageData(s,0,0),this._pattern=this.context.createPattern(this.canvas,"repeat")}this._clearGrain=!1}_checkDirtyFill(){return!1}_setRectData(e,t,s,i,a,n,r,h,l){for(var o=e*s;o<e*s+s;o++)for(var d=t*s;d<t*s+s;d++){var u=(d*i+o)*4;a[u]=n,a[u+1]=r,a[u+2]=h,a[u+3]=l}}}Object.defineProperty(Ze,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GrainPattern"});Object.defineProperty(Ze,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:E.classNames.concat([Ze.className])});class Je extends gt{getFill(e){const t=this.getBounds(e);let s=0,i=0,a=t.left||0,n=t.right||0,r=t.top||0,h=t.bottom||0;const l=n-a,o=h-r;let d=e.get("radius");P(d)?(s=0,i=0):(d=Math.min(l,o)/2,s=l/2,i=o/2);let u=this.get("x"),g=this.get("y");u!=null&&(s=ye(u,l)),g!=null&&(i=ye(g,o));const p=this._root._renderer.createRadialGradient(s,i,0,s,i,d),f=this.get("stops");if(f){let y=0;re(f,m=>{let x=m.offset;P(x)||(x=y/(f.length-1));let v=m.opacity;P(v)||(v=1);let w=m.color;if(w){const D=m.lighten;D&&(w=$.lighten(w,D));const N=m.brighten;N&&(w=$.brighten(w,N)),p.addColorStop(x,"rgba("+w.r+","+w.g+","+w.b+","+v+")")}y++})}return p}}Object.defineProperty(Je,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialGradient"});Object.defineProperty(Je,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gt.classNames.concat([Je.className])});class ve extends E{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("checkered",!1),t=this.get("centered",!0),s=this.get("gap",0),i=this.get("rotation",0);let a=this.get("width",100),n=this.get("height",100),r=this.get("radius",3),h=r*2+s,l=r*2+s,o=Math.round(a/h),d=Math.round(n/l);h=a/o,l=n/d,i!=0&&(this._display.x=h*W(i),this._display.y=l*X(i));const u=this.get("color"),g=this.get("colorOpacity");(u||g)&&this._display.beginFill(u,g);for(let p=i==0?0:-d*2;p<d*2;p++)for(let f=i==0?0:-o*2;f<o*2;f++)if(!e||(p&1)!=1&&(f&1)!=1||(p&1)==1&&(f&1)==1){let y=f*h,m=p*l;t&&(y+=h+s/2,m+=l+s/2),this._display.drawCircle(y-r,m-r,r)}e?(a=a/2-s*2,n=n/2-s*2):(a-=s,n-=s),(u||g)&&this._display.endFill()}}Object.defineProperty(ve,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CirclePattern"});Object.defineProperty(ve,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:E.classNames.concat([ve.className])});class xe extends E{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("width",100),t=this.get("height",100),s=this.get("gap",0),i=this.get("strokeWidth",1);if(!s)this._display.moveTo(0,0),this._display.lineTo(e,0);else{let r=s+i,h=t/r;for(let l=-h;l<h*2;l++){const o=Math.round(l*r-r/2)+.5;this._display.moveTo(-e,o),this._display.lineTo(e*2,o)}}this._display.lineStyle(i,this.get("color"),this.get("colorOpacity"));let a=this.get("strokeDasharray");P(a)&&(a<.5?a=[0]:a=[a]),this._display.setLineDash(a);const n=this.get("strokeDashoffset");n&&this._display.setLineDashOffset(n),this._display.endStroke()}}Object.defineProperty(xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinePattern"});Object.defineProperty(xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:E.classNames.concat([xe.className])});class Pe extends E{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("checkered",!1),t=this.get("centered",!0),s=this.get("gap",0),i=this.get("rotation",0);let a=this.get("width",100),n=this.get("height",100),r=this.get("maxWidth",5),h=this.get("maxHeight",5);const l=this._display;let o=r+s,d=h+s,u=Math.round(a/o),g=Math.round(n/d);o=a/u,d=n/g,i!=0&&(l.x=o/2*W(i),l.y=-d/2*X(i));for(let y=i==0?0:-g*2;y<g*2;y++)for(let m=i==0?0:-u*2;m<u*2;m++)if(!e||(y&1)!=1&&(m&1)!=1||(y&1)==1&&(m&1)==1){let x=m*o,v=y*d;t&&(x+=(o-r)/2,v+=(d-h)/2),l.drawRect(x,v,r,h)}e?(a=a/2-s*2,n=n/2-s*2):(a-=s,n-=s);const p=this.get("color"),f=this.get("colorOpacity");(p||f)&&(l.beginFill(p,f),l.endFill())}}Object.defineProperty(Pe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RectanglePattern"});Object.defineProperty(Pe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:E.classNames.concat([Pe.className])});class Ke extends E{_beforeChanged(){super._beforeChanged(),this.isDirty("svgPath")&&(this._clear=!0)}_draw(){super._draw();const e=this.get("svgPath");e!=null&&this._display.svgPath(e);const t=this.get("color"),s=this.get("colorOpacity");(t||s)&&(this._display.beginFill(t,s),this._display.endFill())}}Object.defineProperty(Ke,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PathPattern"});Object.defineProperty(Ke,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:E.classNames.concat([Ke.className])});class Qe extends Q{_afterNew(){if(super._afterNewApplyThemes(),this.get("patterns",[]).length===0){const e=this.get("color",this.root.interfaceColors.get("stroke"));this.set("patterns",[this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:1,color:e}),this.getRectanglePattern({width:10,height:10,rotation:0,maxWidth:4,maxHeight:4,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:1,gap:6,color:e}),this.getCirclePattern({width:11,height:11,radius:2,color:e}),this.getLinePattern({width:6,height:6,rotation:90,strokeWidth:1,color:e}),this.getRectanglePattern({width:14,height:14,rotation:45,gap:4,maxWidth:6,maxHeight:6,checkered:!0,color:e}),this.getLinePattern({width:6,height:6,rotation:0,strokeWidth:1,color:e}),this.getRectanglePattern({width:15,height:15,rotation:0,gap:5,maxWidth:5,maxHeight:5,checkered:!0,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:2,gap:3,strokeDasharray:[4,2],color:e}),this.getCirclePattern({width:20,height:20,radius:3,gap:4,checkered:!0,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:2,gap:3,strokeDasharray:[4,2],color:e}),this.getRectanglePattern({width:10,height:10,rotation:0,gap:1,maxWidth:9,maxHeight:9,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:-45,strokeWidth:2,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:45,strokeWidth:2,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:0,strokeWidth:3,gap:1,color:e}),this.getLinePattern({width:1e3,height:1e3,rotation:90,strokeWidth:3,gap:1,color:e})])}this._dirty.patterns=!1}_beforeChanged(){this.isDirty("patterns")&&this.reset()}getIndex(e){const t=this.get("patterns",[]);if(e<t.length&&t[e]!==null)return t[e];if(e>t.length-1){const s=e-Math.floor(e*(e/t.length));return t[s]}return t[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0))}getLinePattern(e){return xe.new(this.root,e)}getRectanglePattern(e){return Pe.new(this.root,e)}getCirclePattern(e){return ve.new(this.root,e)}}Object.defineProperty(Qe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PatternSet"});Object.defineProperty(Qe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([Qe.className])});class Ue extends Q{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const e=this.getPrivate("currentPass"),t=this.get("colors",[this.get("baseColor",$.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",t.length);const s=this.getPrivate("numColors"),i=0,a=this.get("passOptions"),n=this.get("reuse");for(let r=i;r<s;r++)if(n)t.push(t[r]);else{const h=t[r].toHSL();let l=h.h+(a.hue||0)*e;for(;l>1;)l-=1;let o=h.s+(a.saturation||0)*e;o>1&&(o=1),o<0&&(o=0);let d=h.l+(a.lightness||0)*e;for(;d>1;)d-=1;t.push($.fromHSL(l,o,d))}}getIndex(e){const t=this.get("colors",[]),s=this.get("saturation");return e>=t.length?(this.generateColors(),this.getIndex(e)):s!=null?$.saturate(t[e],s):t[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Object.defineProperty(Ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"});Object.defineProperty(Ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([Ue.className])});class is{static parse(e,t){t=this._applyDefaults(t);try{if(_t(e)){let s=JSON.parse(e);return t.reverse&&Se(s)&&s.reverse(),s}else{if(Se(e)||lt(e))return e;throw"Unable to parse JSON data"}}catch{return}}static _applyDefaults(e){const t={},s={reverse:!1};return e||(e={}),tt(s,(i,a)=>{t[i]=e[i]||a}),t}}class rs{static parse(e,t){t=this._applyDefaults(t);let s=this.CSVToArray(e,t.delimiter),i=[],a=[],n,r;for(r=0;r<t.skipRows;r++)s.shift();if(t.useColumnNames){a=s.shift();for(let l=0;l<a.length;l++)n=a[l]!=null?a[l].replace(/^\s+|\s+$/gm,""):"",n===""&&(n="col"+l),a[l]=n}let h;for(;h=t.reverse?s.pop():s.shift(),!!h;){if(t.skipEmpty&&h.length===1&&h[0]==="")continue;let l={};for(r=0;r<h.length;r++)n=a[r]===void 0?"col"+r:a[r],l[n]=h[r];i.push(l)}return i}static CSVToArray(e,t){t=t||",";let s=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),i=[[]],a=null;for(;a=s.exec(e),!!a;){let n=a[1];n.length&&n!==t&&i.push([]);let r;a[2]?r=a[2].replace(new RegExp('""',"g"),'"'):r=a[3],i[i.length-1].push(r)}return i}static _applyDefaults(e){const t={},s={delimiter:",",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1};return e||(e={}),tt(s,(i,a)=>{t[i]=e[i]||a}),t}}class as extends Q{constructor(){super(...arguments),Object.defineProperty(this,"_checkDates",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkNumbers",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkColors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkEmpty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkDeep",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this._checkFeatures(),this.on("dateFields",()=>this._checkFeatures()),this.on("dateFormat",()=>this._checkFeatures()),this.on("numericFields",()=>this._checkFeatures()),this.on("colorFields",()=>this._checkFeatures()),this.on("emptyAs",()=>this._checkFeatures())}_checkFeatures(){(this.isDirty("dateFields")||this.isDirty("dateFormat"))&&(this._checkDates=this.get("dateFields")&&this.get("dateFields").length>0),this.isDirty("numericFields")&&(this._checkNumbers=this.get("numericFields")&&this.get("numericFields").length>0),this.isDirty("colorFields")&&(this._checkColors=this.get("colorFields")&&this.get("colorFields").length>0),this.isDirty("emptyAs")&&(this._checkEmpty=this.get("emptyAs")!=null),this._checkDeepFeatures()}_checkDeepFeatures(){const e=[];re(["dateFields","numericFields","colorFields"],t=>{re(this.get(t,[]),s=>{const i=s.split(".");for(i.pop();i.length>0;)e.push(i.join(".")),i.pop()})}),this._checkDeep=e.length>0,this.setPrivate("deepFields",e)}processMany(e){Se(e)&&(this._checkDates||this._checkNumbers||this._checkColors||this._checkEmpty)&&re(e,t=>{this.processRow(t)})}processRow(e,t=""){tt(e,(s,i)=>{const a=t+s;this._checkEmpty&&(e[s]=this._maybeToEmpty(e[s])),this._checkNumbers&&(e[s]=this._maybeToNumber(a,e[s])),this._checkDates&&(e[s]=this._maybeToDate(a,e[s])),this._checkColors&&(e[s]=this._maybeToColor(a,e[s])),this._checkDeep&&this.getPrivate("deepFields",[]).indexOf(a)!==-1&&lt(e[s])&&this.processRow(e[s],a+".")})}_maybeToNumber(e,t){return this.get("numericFields").indexOf(e)!==-1?wt(t):t}_maybeToDate(e,t){return this.get("dateFields").indexOf(e)!==-1?this._root.dateFormatter.parse(t,this.get("dateFormat","")).getTime():t}_maybeToEmpty(e){return(e==null||e=="")&&this.get("emptyAs")!=null?this.get("emptyAs"):e}_maybeToColor(e,t){return this.get("colorFields").indexOf(e)!==-1?$.fromAny(t):t}}class et extends j{constructor(){super(...arguments),Object.defineProperty(this,"rectangle",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(kt.new(this._root,{themeTags:["rectangle"],fillOpacity:0,fill:ht(16777215)}))}),Object.defineProperty(this,"gripL",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("left")}),Object.defineProperty(this,"gripR",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("right")}),Object.defineProperty(this,"gripT",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("top")}),Object.defineProperty(this,"gripB",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("bottom")}),Object.defineProperty(this,"_is",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_iw",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_positionDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHover",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this.addTag("resizer"),this.set("visible",!1),this.gripL.events.on("dragged",e=>{this._resize(e.target,-1)}),this.gripR.events.on("dragged",e=>{this._resize(e.target,1)}),this.gripL.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripR.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripT.events.on("dragged",e=>{this._rotate(e,90)}),this.gripB.events.on("dragged",e=>{this._rotate(e,-90)}),this.gripT.events.on("dragstart",e=>{this._resizeStart(e.target)}),this.gripB.events.on("dragstart",e=>{this._resizeStart(e.target)})}_resizeStart(e){const t=this.get("sprite");t&&(this._is=t.get("scale",1),this._ix=e.x(),this._iw=this.width()/2)}_resize(e,t){const s=this.get("sprite"),i=this.get("spriteTemplate");if(s){const a=Math.max(.01,this._is*(1+t*(e.x()-this._ix)/this._iw));i?i.set("scale",a):s.set("scale",a),s.states.lookup("default").set("scale",a),this._updatePositions()}}_rotate(e,t){const s=this.get("sprite"),i=this.get("spriteTemplate");if(s){const a=this.parent;if(a){const n=this.get("rotationStep",10);let r=Math.round((Dt({x:this.x(),y:this.y()},a.toLocal(e.point))+t)/n)*n;i?i.set("rotation",r):s.set("rotation",r),s.states.lookup("default").set("rotation",r),this._updatePositions()}}}_createGrip(e){const t=this.children.push(j.new(this._root,{themeTags:["grip",e],setStateOnChildren:!0,draggable:!0}));return t.children.push(q.new(this._root,{themeTags:["outline"],centerX:I,centerY:I})),t.children.push(q.new(this._root,{centerX:I,centerY:I})),t}_updateChildren(){if(super._updateChildren(),this.isDirty("sprite")){const e=this.get("sprite");if(e){this.show(0),this.setPrivate("visible",!0),this._updatePositions();const t=e.parent;t&&t.children.moveValue(this,0),this._positionDP=e.events.on("positionchanged",()=>{this._updatePositions()}),this._positionDP=e.events.on("boundschanged",()=>{this._updatePositions()})}else this.hide(0),this.setPrivate("visible",!1),this._positionDP&&this._positionDP.dispose()}(this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation"))&&this._updatePositions()}_updatePositions(){const e=this.get("sprite");if(e){let t=e.localBounds(),s=e.get("scale",1),i=20,a=(t.right-t.left)*s+i,n=(t.bottom-t.top)*s+i,r=e.get("rotation",0);const h=this.rectangle;let l=e.get("centerX",I),o=e.get("centerY",I),d=0;l instanceof ae&&(d=l.value);let u=0;o instanceof ae&&(u=o.value),h.setAll({centerX:l,centerY:o,width:a,height:n}),this.setAll({x:e.x()+i*(d-.5)*W(r)-i*(u-.5)*X(r),y:e.y()+i*(u-.5)*W(r)+i*(d-.5)*X(r),width:a,height:n,rotation:r}),this.gripT.setAll({x:(.5-d)*a,y:-u*n}),this.gripB.setAll({x:(.5-d)*a,y:(1-u)*n}),this.gripL.setAll({x:-d*a,y:(.5-u)*n}),this.gripR.setAll({x:(1-d)*a,y:(.5-u)*n}),this.rectangle.setAll({width:a,height:n})}}}Object.defineProperty(et,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SpriteResizer"});Object.defineProperty(et,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.classNames.concat([et.className])});function It(c,e,t){return new Promise((s,i)=>{let a=t!=null&&t.responseType=="blob",n=new XMLHttpRequest;if(n.onload=()=>{if(n.status===200){let r,h;if(a){h=n.response,ft(h).then(o=>{let d={xhr:n,error:!1,response:o,blob:h,type:n.getResponseHeader("Content-Type"),target:e};s(d)});return}else r=n.responseText||n.response;let l={xhr:n,error:!1,response:r,blob:h,type:n.getResponseHeader("Content-Type"),target:e};s(l)}else i({xhr:n,error:!0,type:n.getResponseHeader("Content-Type"),target:e})},n.onerror=()=>{i({xhr:n,error:!0,type:n.getResponseHeader("Content-Type"),target:e})},n.open("GET",c,!0),t&&t.withCredentials&&(n.withCredentials=!0),t!=null){if(t.requestHeaders!=null)for(let r=0;r<t.requestHeaders.length;r++){let h=t.requestHeaders[r];n.setRequestHeader(h.key,h.value)}t.responseType!=null&&(n.responseType=t.responseType)}n.send()})}function ft(c){return new Promise((e,t)=>{const s=new FileReader;s.onload=i=>{e(s.result)},s.onerror=i=>{t(i)},s.readAsText(c)})}const ns=Object.freeze(Object.defineProperty({__proto__:null,load:It,readBlob:ft},Symbol.toStringTag,{value:"Module"}));export{vs as ArrayDisposer,Rs as BlendMode,hs as Bullet,Ct as Button,rs as CSVParser,us as CanvasLayer,cs as CanvasRenderer,Os as Chart,ds as Circle,ve as CirclePattern,$ as Color,Ue as ColorSet,Ss as Component,j as Container,yt as CounterDisposer,Ms as DataItem,as as DataProcessor,gs as DateFormatter,xs as Disposer,ps as DurationFormatter,$e as EditableLabel,Fe as Ellipse,Q as Entity,gt as Gradient,Ze as GrainPattern,O as Graphics,js as GridLayout,Be as HeatLegend,Ls as HorizontalLayout,fs as InterfaceColors,is as JSONParser,As as JsonData,Y as Label,Fs as Layout,Ge as Legend,ne as Line,xe as LinePattern,Tt as LinearGradient,Es as ListData,se as ListTemplate,Le as Modal,bt as MultiDisposer,Ps as MutableValueDisposer,ms as NumberFormatter,Ke as PathPattern,E as Pattern,Qe as PatternSet,ae as Percent,ze as Picture,Bs as PicturePattern,bs as PointedRectangle,Ae as Polygon,Je as RadialGradient,Ve as RadialLabel,_e as RadialText,kt as Rectangle,Pe as RectanglePattern,ys as Root,q as RoundedRectangle,le as Scrollbar,$s as SerialChart,ut as Series,Ye as Slice,Ie as Slider,ct as Sprite,et as SpriteResizer,Ee as Star,te as Template,dt as Text,Gs as TextFormatter,ks as Theme,qe as Tick,_s as Timezone,mt as Tooltip,He as Triangle,zs as VerticalLayout,ei as ZoomTools,ti as ZoomableContainer,Vs as addLicense,Ds as array,ht as color,Hs as disposeAllRootElements,Is as ease,Ws as getRootById,Xs as math,ns as net,Cs as object,Ys as p0,A as p100,I as p50,qs as percent,Zs as ready,Js as registry,Ks as time,Ts as type,Qs as utils};

import{r as o,j as e,L as C,$ as N,a as T}from"./app-BufgRum3.js";import{A as w}from"./app-layout-CSvWCj9H.js";import{B as k}from"./button-BoZujFSJ.js";import{C as v,a as S,b as L,c as A,d as B,e as $}from"./card-rrrDQJu1.js";import{T as E,a as H,b as f,c as d,d as I,e as p}from"./table-BpORSo-6.js";import{I as F}from"./input-CxeN--hn.js";import{u as K}from"./translate-7dUrCLaN.js";import{L as R}from"./loader-circle-B9OPrQfa.js";import"./utils-BNRNCaII.js";import"./index-BbmNhKHE.js";import"./createLucideIcon-DxOK0CP3.js";import"./index-CH52axAf.js";import"./index-eEIjwM6S.js";import"./index-CnuVBB4C.js";import"./x-B9zh7tQD.js";import"./index-FnlemJSI.js";import"./avatar-CJTUIFCH.js";import"./file-text-BBAUupbj.js";import"./users-Dopi3ewh.js";import"./tag-ZGX8ncmK.js";import"./triangle-alert-BM_blpVd.js";import"./qr-code-Cli3oJDj.js";import"./chart-column-JeVGbhpr.js";import"./map-pin-DgniCjxk.js";import"./building-B7asMN4i.js";import"./database-CHq7A3iR.js";function me({translations:i=[]}){const{t:r}=K(),[x,c]=o.useState([]),[u,h]=o.useState(new Set),j=o.useMemo(()=>Array.isArray(i)?i:typeof i=="object"&&i!==null?Object.entries(i).map(([s,a])=>({key:s,value:typeof a=="string"?a:String(a)})):[],[i]);o.useEffect(()=>{c(j)},[j]);const g=async(s,a,n="fa")=>{h(t=>new Set(t).add(s));try{(await T.put(`/api/languages/translations/${s}`,{value:a,language:n})).data.success&&c(l=>l.map(m=>m.key===s?{...m,value:a}:m))}catch(t){console.error("Failed to update translation:",t)}finally{h(t=>{const l=new Set(t);return l.delete(s),l})}},y=(s,a)=>{c(n=>n.map(t=>t.key===s?{...t,value:a}:t))},b=(s,a)=>{g(s,a)};return e.jsxs(w,{children:[e.jsx(C,{title:r("translations.translations")}),e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:r("translations.translations")})}),e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsx(L,{children:r("translations.translations")}),e.jsx(A,{children:r("translations.description")})]}),e.jsx(B,{children:e.jsxs(E,{children:[e.jsx(H,{children:e.jsxs(f,{children:[e.jsx(d,{children:r("translations.key")}),e.jsx(d,{children:r("translations.value")}),e.jsx(d,{className:"text-right",children:r("common.actions")})]})}),e.jsx(I,{children:x.map((s,a)=>e.jsxs(f,{children:[e.jsx(p,{className:"font-medium max-w-[250px]",title:s.key,children:e.jsx("span",{className:"truncate block",children:s.key})}),e.jsx(p,{className:"max-w-[300px]",title:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{value:s.value??"",onChange:n=>y(s.key,n.target.value),onBlur:n=>b(s.key,n.target.value),disabled:u.has(s.key),className:"flex-1"}),u.has(s.key)&&e.jsx(R,{className:"h-4 w-4 animate-spin"})]})}),e.jsx(p,{className:"text-right"})]},`${s.key}-${a}`))})]})}),e.jsxs($,{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:r("translations.total_translations",{count:String(x.length)})}),e.jsx(k,{variant:"outline",asChild:!0,children:e.jsx(N,{href:route("languages.index"),children:r("languages.manage_languages")})})]})]})]})]})}export{me as default};

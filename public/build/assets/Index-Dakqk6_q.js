import{r as c,K as Y,j as e,L as Z,$ as y,a as ee}from"./app-BTwao5lV.js";import{A as se}from"./app-layout-D-kOwvDO.js";import{B as o}from"./button-BOH7HFqw.js";import{C as ae,a as te,b as ne,c as le,d as re,e as oe}from"./card-DRJdh0w-.js";import{T as ie,a as ce,b as S,c as w,d as de,e as j}from"./table-Do2hh8n5.js";import{S as O,a as P,b as $,c as D,d as T}from"./select-Bk40dX-I.js";import{I as E}from"./input-CK0Di3zu.js";import{u as ue}from"./translate-C098nKtj.js";import{c as B}from"./createLucideIcon-AitLqfJD.js";import{P as xe}from"./plus-NDqS9ylO.js";import{S as me}from"./search-Brl-QMG0.js";import"./index-ty2sf-gJ.js";import"./index-DsicJb1w.js";import"./index-BV7cHKwF.js";import"./index-D0iH_ebk.js";import"./x-CIkUpJ08.js";import"./index-BnzPjD0j.js";import"./avatar-kZFuc_qc.js";import"./app-logo-BY3jIwIe.js";import"./app-logo-icon-Bb1wDBZt.js";import"./triangle-alert-Bu-1Ju2I.js";import"./file-text-CrLbhVnL.js";import"./users-D9US5lqV.js";import"./tag-DP4Rw8do.js";import"./qr-code-BXxt7XJU.js";import"./index-DHLSgzAE.js";import"./check-BUeXEhKd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],pe=B("Download",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],je=B("Upload",ge);function Qe({languages:f=[],translations:l={data:[],current_page:1,last_page:1,per_page:15,total:0},groups:F=[],filters:v={}}){var H;const{t:a}=ue(),[d,G]=c.useState(""),{auth:fe,csrf_token:ve}=Y().props,[L,R]=c.useState(!1),[u,C]=c.useState({}),[x,k]=c.useState({}),[q,K]=c.useState(!1),i=v.language||((H=f[0])==null?void 0:H.code)||"en",r=v.group||"all",z=c.useMemo(()=>{var s;return(s=f.find(t=>t.code===i))==null?void 0:s.id},[f,i]),A=F.map(s=>s||"unnamed-group"),N=(l==null?void 0:l.data)||[],m=(l==null?void 0:l.current_page)||1,I=(l==null?void 0:l.last_page)||1,M=(l==null?void 0:l.total)||0,V=d?N.filter(s=>{var t,n;return((t=s.key)==null?void 0:t.toLowerCase().includes(d.toLowerCase()))||((n=s.value)==null?void 0:n.toLowerCase().includes(d.toLowerCase()))}):N,b=c.useMemo(()=>Object.keys(u).length>0||Object.keys(x).length>0,[u,x]),Q=(s,t)=>{C(n=>({...n,[s]:t}))},U=(s,t)=>{k(n=>({...n,[s]:t}))},J=()=>{C({}),k({})},W=s=>{const t=s.indexOf(".");return t>0?s.slice(0,t):"general"},X=async()=>{if(b)try{K(!0);const s={};N.forEach(n=>{const h=n.key,p=(x[h]??h).trim();if(!p)return;const _=u[h]??n.value??"",g=W(p);s[g]||(s[g]={}),s[g][p]=_});const t=Object.entries(s);for(const[n,h]of t){const p=Object.entries(h).map(([_,g])=>ee.post("/translations",{language_id:z,key:_,value:g,group:n}));await Promise.all(p)}C({}),k({}),window.location.href=route("translations.index",{page:m,language:i,group:r==="all"?"":r})}catch(s){console.error("Failed to save translations",s)}finally{K(!1)}};return e.jsxs(se,{children:[e.jsx(Z,{title:a("translations.translations")}),e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("translations.translations")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(y,{href:route("translations.export",{language_id:i,group:v.group==="all"?"":v.group}),children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),a("translations.export")]})}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(y,{href:route("translations.export-json"),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),a("translations.export_translations")]})}),e.jsx(o,{asChild:!0,children:e.jsxs(y,{href:route("translations.create"),children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),a("translations.add_translation")]})}),e.jsx(o,{variant:"outline",onClick:()=>R(s=>!s),children:a("common.edit")}),e.jsx(o,{onClick:X,disabled:!b||q,children:a("common.save")}),e.jsx(o,{variant:"outline",onClick:J,disabled:!b,children:a("common.cancel")})]})]}),e.jsxs(ae,{children:[e.jsxs(te,{children:[e.jsx(ne,{children:a("translations.translations")}),e.jsx(le,{children:a("translations.description")})]}),e.jsxs(re,{children:[e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(O,{value:i,onValueChange:s=>window.location.href=route("translations.index",{language:s,group:r==="all"?"":r}),children:[e.jsx(P,{children:e.jsx($,{placeholder:a("translations.select_language")})}),e.jsx(D,{children:f.map(s=>e.jsx(T,{value:s.code,children:s.name},s.code))})]})}),e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(O,{value:r,onValueChange:s=>window.location.href=route("translations.index",{language:i,group:s==="all"?"":s}),children:[e.jsx(P,{children:e.jsx($,{placeholder:a("translations.select_group")})}),e.jsxs(D,{children:[e.jsx(T,{value:"all",children:a("translations.all_groups")}),A.map(s=>e.jsx(T,{value:s,children:s},s))]})]})}),e.jsxs("div",{className:"w-full md:w-1/3 relative",children:[e.jsx(E,{placeholder:a("translations.filter_translations"),value:d,onChange:s=>G(s.target.value),className:"pr-8"}),e.jsx(me,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs(ie,{children:[e.jsx(ce,{children:e.jsxs(S,{children:[e.jsx(w,{children:a("translations.key")}),e.jsx(w,{children:a("translations.value")}),e.jsx(w,{children:a("translations.group")}),e.jsx(w,{className:"text-right",children:a("common.actions")})]})}),e.jsx(de,{children:V.length===0?e.jsx(S,{children:e.jsx(j,{colSpan:4,className:"text-center py-8",children:a(d?"common.no_results":"translations.no_translations")})}):V.map((s,t)=>e.jsxs(S,{children:[e.jsx(j,{className:"font-medium max-w-[250px]",title:x[s.key]??s.key,children:L?e.jsx(E,{value:x[s.key]??s.key,onChange:n=>U(s.key,n.target.value)}):e.jsx("span",{className:"truncate block",children:s.key})}),e.jsx(j,{className:"max-w-[300px]",title:u[s.key]??s.value,children:L?e.jsx(E,{value:u[s.key]??s.value??"",onChange:n=>Q(s.key,n.target.value)}):e.jsx("span",{className:s.value?"":"text-muted-foreground italic",children:s.value||"Empty"})}),e.jsx(j,{children:s.group}),e.jsx(j,{className:"text-right"})]},s.id??`${s.key}-${t}`))})]}),I>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("languages.total_languages",{count:String(M)})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{variant:"outline",size:"sm",disabled:m<=1,onClick:()=>window.location.href=route("translations.index",{page:m-1,language:i,group:r==="all"?"":r}),children:a("departments.prev")}),e.jsx(o,{variant:"outline",size:"sm",disabled:m>=I,onClick:()=>window.location.href=route("translations.index",{page:m+1,language:i,group:r==="all"?"":r}),children:a("departments.next")})]})]})]}),e.jsxs(oe,{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:a("translations.total_translations",{count:String(M)})}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsx(y,{href:route("languages.index"),children:a("languages.manage_languages")})})]})]})]})]})}export{Qe as default};

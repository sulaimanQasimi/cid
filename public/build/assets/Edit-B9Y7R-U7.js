import{r as d,m as P,j as e,L as R,$}from"./app-BpSUcJGn.js";import{A as z}from"./app-layout-Cci7W_wL.js";import{B as x}from"./button-D5HSAalX.js";import{C as w,d as C,a as H,b as G,c as J,e as K}from"./card-DH7bpRIX.js";import{I as S}from"./input-Bf4x-eDe.js";import{L as o}from"./label-BnpnVHdR.js";import{T}from"./textarea-ybXvi9HL.js";import{S as h,a as p,b as u,c as f,d as n}from"./select-4eflkJXu.js";import{T as O,a as Q,b as L,c as F}from"./tabs-DgMo9EHi.js";import{L as U}from"./LocationSelector-DgLsqLzV.js";import{u as W}from"./translate-De6eSKXZ.js";import{u as X}from"./use-permissions-BBPkzBQo.js";import{f as Y}from"./permission-guard-PRK_BxP5.js";import{S as Z,T as k}from"./triangle-alert-B3BvgGty.js";import{A as ee}from"./arrow-left-DYn3FwPw.js";import{F as te}from"./file-text-CxW02Lyq.js";import{M as se}from"./map-pin-CgRg4Sos.js";import{S as ie}from"./save-d9RNAEqQ.js";import"./utils-x2oEfXY4.js";import"./index-D_7o4Bq4.js";import"./createLucideIcon-Dazand73.js";import"./index-BAL59aVo.js";import"./index-BGe2Ej9s.js";import"./index-Dc7fd2uP.js";import"./x-DgxmVmP_.js";import"./index-B_ZArIVV.js";import"./avatar-CHvk5jYt.js";import"./users-y5BAq2Js.js";import"./tag-DBjzO3ec.js";import"./qr-code-D69zO1WT.js";import"./chart-column-BnoJN4YC.js";import"./building-B0gV305l.js";import"./database-DvJqsiWQ.js";import"./index-BfhS0AQq.js";import"./check-C0q8vu5-.js";import"./afghanistanLow-mnRKi4Rp.js";import"./AnimatedTheme-BUmUfnV6.js";import"./Theme-BmHcCuAX.js";import"./Circle-8EBaRFtt.js";import"./SerialChart-BVO0dC_-.js";import"./MapPolygonSeries-DTjfB9OR.js";import"./ZoomControl-BnspmdGB.js";import"./ZoomTools-BhpQy8Ri.js";import"./LinearGradient-DlmffUgH.js";function Qe({info:i,infoTypes:g=[],infoCategories:j=[],departments:b=[]}){var y;const{t}=W();X();const A=[{title:t("info_types.page_title"),href:route("info-types.index")},{title:t("info.edit.breadcrumb"),href:"#"}],[c,I]=d.useState("basic"),[v,_]=d.useState(!1),N=()=>i.value&&typeof i.value=="object"&&i.value.location?i.value.location:null,[M,V]=d.useState(N()),{data:r,setData:l,put:q,processing:m,errors:a}=P({name:i.name||"",code:i.code||"",description:i.description||"",info_type_id:i.info_type_id?i.info_type_id.toString():"",info_category_id:i.info_category_id?i.info_category_id.toString():"",department_id:(y=i.department)!=null&&y.id?i.department.id.toString():"none",value:{content:i.value&&typeof i.value=="object"&&i.value.content?i.value.content:"",location:N()},confirmed:i.confirmed||!1}),E=s=>{I(s),s==="location"&&_(!0)},D=s=>{V(s),l("value",{...r.value,location:s})},B=s=>{s.preventDefault(),q(route("infos.update",i.id),{onSuccess:()=>{}})};return d.useEffect(()=>{(c==="location"||i.value&&typeof i.value=="object"&&i.value.location)&&_(!0)},[c,i.value]),e.jsxs(z,{breadcrumbs:A,children:[e.jsx(R,{title:t("info.edit.page_title",{name:i.name||"Info Record"})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-l from-blue-600 via-indigo-600 to-purple-600 p-8 text-white shadow-2xl mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 -translate-x-32"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 bg-white/5 rounded-full translate-y-24 translate-x-24"}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-2xl border border-white/30",children:e.jsx(Z,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white drop-shadow-lg",children:t("info.edit.title")}),e.jsxs("div",{className:"text-white/90 flex items-center gap-2 mt-2 text-lg",children:[e.jsx(k,{className:"h-5 w-5"}),t("info.edit.description")]})]})]}),e.jsx(x,{variant:"outline",asChild:!0,className:"bg-white/20 backdrop-blur-sm border-white/30 text-white hover:bg-white/30 rounded-full shadow-lg",children:e.jsxs($,{href:route("info-types.index"),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),t("info.edit.back_to_list")]})})]})]}),i.confirmed&&e.jsx("div",{className:"mb-6",children:e.jsx(w,{className:"border-orange-200 bg-gradient-to-l from-orange-50 to-yellow-50",children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(k,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:t("info.edit.confirmed_warning.title")}),e.jsx("p",{className:"text-orange-700",children:t("info.edit.confirmed_warning.description")})]})]})})})}),e.jsx("form",{onSubmit:B,children:e.jsxs(w,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-blue-50/30",children:[e.jsxs(H,{className:"bg-gradient-to-l from-blue-500 to-blue-600 text-white border-b pb-4",children:[e.jsxs(G,{className:"text-lg flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(te,{className:"h-5 w-5"})}),t("info.edit.form.title")]}),e.jsx(J,{className:"text-blue-100",children:t("info.edit.form.description")})]}),e.jsxs(C,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"info_type_id",children:[t("info.edit.fields.type")," ",e.jsx("span",{className:"text-red-500",children:t("common.required_field")})]}),e.jsxs(h,{value:r.info_type_id,onValueChange:s=>l("info_type_id",s),required:!0,children:[e.jsx(p,{id:"info_type_id",children:e.jsx(u,{placeholder:t("info.edit.placeholders.select_type")})}),e.jsx(f,{children:g.length>0?g.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:t("info.edit.no_types_available")})})]}),a.info_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.info_type_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"info_category_id",children:[t("info.edit.fields.category")," ",e.jsx("span",{className:"text-red-500",children:t("common.required_field")})]}),e.jsxs(h,{value:r.info_category_id,onValueChange:s=>l("info_category_id",s),required:!0,children:[e.jsx(p,{id:"info_category_id",children:e.jsx(u,{placeholder:t("info.edit.placeholders.select_category")})}),e.jsx(f,{children:j.length>0?j.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:t("info.edit.no_categories_available")})})]}),a.info_category_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.info_category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"department_id",children:t("info.edit.fields.department")}),e.jsxs(h,{value:r.department_id,onValueChange:s=>l("department_id",s),children:[e.jsx(p,{id:"department_id",children:e.jsx(u,{placeholder:t("info.edit.placeholders.select_department")})}),e.jsxs(f,{children:[e.jsx(n,{value:"none",children:t("common.none")}),b.length>0?b.map(s=>e.jsx(n,{value:s.id.toString(),children:s.name},s.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:t("info.edit.no_departments_available")})]})]}),a.department_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.department_id})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:t("info.edit.fields.name")}),e.jsx(S,{id:"name",value:r.name,onChange:s=>l("name",s.target.value)}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"code",children:t("info.edit.fields.code")}),e.jsx(S,{id:"code",value:r.code,onChange:s=>l("code",s.target.value),placeholder:t("info.edit.placeholders.code")}),a.code&&e.jsx("p",{className:"text-sm text-red-500",children:a.code}),e.jsx("p",{className:"text-sm text-gray-500",children:t("info.edit.code_helper")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:t("info.edit.fields.description")}),e.jsx(T,{id:"description",value:r.description,onChange:s=>l("description",s.target.value),rows:3}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:t("info.edit.fields.content")}),e.jsxs(O,{defaultValue:"basic",value:c,onValueChange:E,children:[e.jsxs(Q,{className:"grid w-full grid-cols-2",children:[e.jsx(L,{value:"basic",children:t("info.edit.content_tabs.basic")}),e.jsxs(L,{value:"location",className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),t("info.edit.content_tabs.location")]})]}),e.jsx(F,{value:"basic",className:"pt-4",children:e.jsx(T,{id:"content",value:r.value.content,onChange:s=>l("value",{...r.value,content:s.target.value}),rows:5,placeholder:t("info.edit.placeholders.content")})}),e.jsx(F,{value:"location",className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:t("info.edit.location_description")}),v&&e.jsx(U,{value:M,onChange:D}),!v&&e.jsx("div",{className:"h-[400px] flex items-center justify-center bg-gray-100 rounded-md",children:t("info.edit.loading_map")})]})})]}),a.value&&e.jsx("p",{className:"text-sm text-red-500",children:a.value})]}),e.jsx(Y,{model:"info",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"confirmed",checked:r.confirmed,onChange:s=>l("confirmed",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx(o,{htmlFor:"confirmed",children:t("info.edit.fields.confirmed")})]}),a.confirmed&&e.jsx("p",{className:"text-sm text-red-500",children:a.confirmed})]})})]}),e.jsxs(K,{className:"flex justify-between border-t px-6 py-5 bg-gradient-to-l from-blue-50 to-blue-100",children:[e.jsx(x,{variant:"outline",onClick:()=>window.history.back(),type:"button",disabled:m,className:"rounded-full border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400 shadow-lg",children:t("common.cancel")}),e.jsxs(x,{type:"submit",disabled:m,className:"rounded-full px-8 font-medium bg-gradient-to-l from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),t(m?"info.edit.saving":"info.edit.save_changes")]})]})]})})]})]})}export{Qe as default};

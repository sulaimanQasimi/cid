import{u as q,r as d,j as r,L as Q,b as U}from"./app-NWlhzIiI.js";import{A as G}from"./app-layout-By-MARzy.js";import{H as _}from"./header-C6-eMOlP.js";import{S as J}from"./SearchFilters-D0irrE-h.js";import{B as v}from"./button-Box1-qgD.js";import{C as W,d as X}from"./card-DvyK6hRT.js";import{T as Y,a as Z,b as N,c as w,d as ee,e as f}from"./table-Bu901iQe.js";import{I as re}from"./input-DwzvWPem.js";import{u as ae}from"./translate-CQfM3vbo.js";import{c as te}from"./createLucideIcon-aOMmq26Q.js";import{T as se}from"./trending-up-BQm1HcWr.js";import{L as le}from"./loader-circle-BIMFIxoB.js";import{S as oe}from"./square-pen-zD04p5W5.js";import{T as ne}from"./triangle-alert-WGDBdikk.js";import"./utils-CjIpxwge.js";import"./index-LNM0viqu.js";import"./tslib.es6-CmEaCU22.js";import"./index--ZO2L52o.js";import"./index-DmWWB6Fq.js";import"./index-COnRykQT.js";import"./x-DPZesNn8.js";import"./index-DrYACo-5.js";import"./avatar-CQF4zAG1.js";import"./calendar-bCvzJPwI.js";import"./file-text-CyHLALFq.js";import"./users-DJjY4K-g.js";import"./tag-BRdLRwg_.js";import"./qr-code-gl_KlejU.js";import"./map-pin-gWVy6gHw.js";import"./database-BLSwhGHk.js";import"./shield-DUD3wVHp.js";import"./permission-guard-BE4HVUt5.js";import"./arrow-left-BW7btOfZ.js";import"./plus-Coi6u1xM.js";import"./select-CN__VSdP.js";import"./index-BxdvcV1_.js";import"./check-BL0RFP_t.js";import"./search-DsoCqGUD.js";import"./filter-x-BlDIiyAZ.js";import"./arrow-up-down-BGwJiRM5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],ie=te("Languages",pe),de=[{value:"key",label:"Key"},{value:"value",label:"Value"}],ce=[{value:10,label:"10 per page"},{value:25,label:"25 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"},{value:999999,label:"All"}];function Ze({translations:u=[],filters:c={search:"",sort:"key",direction:"asc",per_page:25},auth:ue={permissions:[]}}){const{t:s}=ae(),{reloadTranslations:$}=q(),[h,m]=d.useState([]),[C,P]=d.useState(new Set),[g,S]=d.useState(c.search),[o,x]=d.useState(1),[n,T]=d.useState(c.per_page),I=[{title:s("translations.translations"),href:route("translations.index")}],k=d.useMemo(()=>Array.isArray(u)?u:typeof u=="object"&&u!==null?Object.entries(u).map(([e,a])=>({key:e,value:typeof a=="string"?a:String(a)})):[],[u]);d.useEffect(()=>{m(k)},[k]);const p=d.useMemo(()=>{if(!g.trim())return h;const e=g.toLowerCase().trim();return h.filter(a=>a.key.toLowerCase().includes(e)||a.value.toLowerCase().includes(e))},[h,g]),L=d.useMemo(()=>{if(n>=p.length)return p;const e=(o-1)*n,a=e+n;return p.slice(e,a)},[p,o,n]),b=d.useMemo(()=>n>=p.length?1:Math.ceil(p.length/n),[p.length,n]),V=()=>{const e=[];let l=Math.max(1,o-Math.floor(2.5)),t=Math.min(b,l+5-1);t-l+1<5&&(l=Math.max(1,t-5+1)),o>1&&e.push({url:null,label:"Previous",active:!1,isPrevious:!0});for(let i=l;i<=t;i++)e.push({url:null,label:i.toString(),active:i===o,page:i});return o<b&&e.push({url:null,label:"Next",active:!1,isNext:!0}),e},A=async(e,a,l="fa")=>{P(t=>new Set(t).add(e));try{(await U.put(`/api/languages/translations/${e}`,{value:a,language:l})).data.success&&(m(i=>i.map(j=>j.key===e?{...j,value:a}:j)),await $())}catch(t){console.error("Failed to update translation:",t)}finally{P(t=>{const i=new Set(t);return i.delete(e),i})}},B=(e,a)=>{m(l=>l.map(t=>t.key===e?{...t,value:a}:t))},D=(e,a)=>{A(e,a)},O=e=>{e.preventDefault(),x(1)},M=e=>{const a=[...h].sort((l,t)=>e==="key"?c.direction==="asc"?l.key.localeCompare(t.key):t.key.localeCompare(l.key):e==="value"?c.direction==="asc"?l.value.localeCompare(t.value):t.value.localeCompare(l.value):0);m(a)},z=()=>{c.direction,M(c.sort)},F=e=>{T(parseInt(e)),x(1)},H=e=>{},E=e=>{},K=e=>{},R=()=>{S(""),x(1),T(c.per_page),m(k)},y=e=>{x(e)};return r.jsxs(G,{breadcrumbs:I,children:[r.jsx(Q,{title:s("translations.translations")}),r.jsxs("div",{className:"container px-0 py-6",children:[r.jsx(_,{title:s("translations.translations"),description:s("translations.translations"),icon:r.jsx(ie,{className:"h-6 w-6 text-white"}),model:"translation",routeName:"languages.index",buttonText:s("languages.manage_languages"),theme:"purple"}),r.jsx(J,{searchQuery:g,onSearchChange:S,onSearchSubmit:O,searchPlaceholder:s("translations.search_placeholder"),filters:{sort:c.sort,direction:c.direction,per_page:n},onTypeChange:H,onCategoryChange:E,onDepartmentChange:K,onSortChange:M,onDirectionChange:z,onPerPageChange:F,onResetFilters:R,types:[],categories:[],departments:[],sortOptions:de.map(e=>({value:e.value,label:s(`translations.sort_options.${e.value}`)})),perPageOptions:ce.map(e=>({value:e.value,label:e.value.toString()})),title:s("translations.search_filters"),description:s("translations.table.description")}),r.jsxs("div",{className:"mt-8",children:[r.jsx(_,{title:s("translations.table.title"),description:s("translations.table.description"),icon:r.jsx(se,{className:"h-6 w-6 text-white"}),model:"translation",routeName:"languages.index",buttonText:s("languages.manage_languages"),theme:"purple"}),r.jsx(W,{className:"shadow-2xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-purple-50/30 dark:to-purple-900/20 border-0 rounded-3xl",children:r.jsx(X,{className:"p-0",children:r.jsx("div",{className:"overflow-hidden rounded-b-3xl",children:r.jsxs(Y,{children:[r.jsx(Z,{children:r.jsxs(N,{className:"bg-gradient-to-l from-purple-100 dark:from-purple-900 to-purple-200 dark:to-purple-800 border-0",children:[r.jsx(w,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:s("translations.key")}),r.jsx(w,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:s("translations.value")}),r.jsx(w,{className:"text-purple-800 dark:text-purple-200 font-bold text-lg py-6 px-6",children:s("common.actions")})]})}),r.jsx(ee,{children:L.length>0?L.map((e,a)=>r.jsxs(N,{className:"hover:bg-purple-50/50 dark:hover:bg-purple-900/20 transition-colors duration-300 border-b border-purple-100 dark:border-purple-800",children:[r.jsx(f,{className:"font-bold text-purple-900 dark:text-purple-100 py-6 px-6 text-lg max-w-[250px]",title:e.key,children:r.jsx("span",{className:"truncate block",children:e.key})}),r.jsx(f,{className:"text-purple-800 dark:text-purple-200 py-6 px-6 max-w-[300px]",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{value:e.value??"",onChange:l=>B(e.key,l.target.value),onBlur:l=>D(e.key,l.target.value),disabled:C.has(e.key),className:"flex-1 bg-white dark:bg-gray-800 border-purple-200 dark:border-purple-700 focus:border-purple-500 dark:focus:border-purple-400"}),C.has(e.key)&&r.jsx(le,{className:"h-4 w-4 animate-spin text-purple-600"})]})}),r.jsx(f,{className:"py-6 px-6",children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(v,{variant:"ghost",size:"icon",title:s("translations.actions.edit"),className:"h-10 w-10 rounded-xl hover:bg-green-100 dark:hover:bg-green-800 text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 transition-all duration-300 hover:scale-110",children:r.jsx(oe,{className:"h-5 w-5"})})})})]},`${e.key}-${a}`)):r.jsx(N,{children:r.jsx(f,{colSpan:3,className:"h-32 text-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-4 text-purple-600 dark:text-purple-400",children:[r.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-800 rounded-full",children:r.jsx(ne,{className:"h-16 w-16 text-purple-400 dark:text-purple-300"})}),r.jsx("p",{className:"text-xl font-bold",children:s("translations.no_records")}),r.jsx("p",{className:"text-purple-500 dark:text-purple-400",children:"No translation records found"})]})})})})]})})})})]}),b>1&&r.jsx("div",{className:"mt-8 flex justify-center",children:r.jsxs("div",{className:"bg-gradient-to-l from-purple-50 dark:from-purple-900/20 to-white dark:to-gray-800 p-4 rounded-3xl shadow-2xl border border-purple-200 dark:border-purple-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[o>1&&r.jsx(v,{variant:"outline",size:"sm",onClick:()=>y(o-1),className:"bg-white dark:bg-gray-800 border-purple-200 dark:border-purple-700 text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/20",children:"Previous"}),V().map((e,a)=>e.isPrevious||e.isNext?null:r.jsx(v,{variant:e.active?"default":"outline",size:"sm",onClick:()=>y(e.page),className:`min-w-[40px] ${e.active?"bg-purple-600 hover:bg-purple-700 text-white":"bg-white dark:bg-gray-800 border-purple-200 dark:border-purple-700 text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/20"}`,children:e.label},a)),o<b&&r.jsx(v,{variant:"outline",size:"sm",onClick:()=>y(o+1),className:"bg-white dark:bg-gray-800 border-purple-200 dark:border-purple-700 text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/20",children:"Next"})]}),r.jsx("div",{className:"mt-4 text-center text-sm text-purple-600 dark:text-purple-400",children:n>=p.length?`Showing all ${p.length} translations`:`Showing ${(o-1)*n+1} to ${Math.min(o*n,p.length)} of ${p.length} translations`})]})})]})]})}export{Ze as default};

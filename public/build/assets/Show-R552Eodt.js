import{r as n,j as e,L as J,$ as i,S as d}from"./app-BufgRum3.js";import{B as r}from"./button-BoZujFSJ.js";import{B as c}from"./badge-DH8rzaGH.js";import{C as m,a as x,b as h,c as O,d as u}from"./card-rrrDQJu1.js";import{S as K}from"./separator-D2s-nZIu.js";import{A as b,h as B,a as p,b as f,c as j,d as g,e as N,f as w,g as v}from"./alert-dialog-CgDtf0o8.js";import{A as Q,C as V}from"./app-layout-CSvWCj9H.js";import{u as W}from"./translate-7dUrCLaN.js";import{T as X}from"./textarea-D3ZAymtL.js";import{L as Y}from"./label-DLCh9EuP.js";import{S as a,T as Z}from"./triangle-alert-BM_blpVd.js";import{F as l}from"./file-text-BBAUupbj.js";import{A as ee}from"./arrow-right-WS7-K-rd.js";import{S as F}from"./square-pen-0Ybc2OPj.js";import{T as L}from"./trash-2-DrPqF7H2.js";import{B as se}from"./book-text-DijQW5W_.js";import{C as te}from"./calendar-DbNbKWQS.js";import{f as $}from"./index-CaunA62S.js";import{T as re}from"./tag-ZGX8ncmK.js";import{M as le}from"./map-pin-DgniCjxk.js";import{U as ie}from"./user-BiEoGHHx.js";import{F as ae}from"./file-check-mEybwhmb.js";import"./utils-BNRNCaII.js";import"./index-CnuVBB4C.js";import"./index-BbmNhKHE.js";import"./createLucideIcon-DxOK0CP3.js";import"./index-CH52axAf.js";import"./index-eEIjwM6S.js";import"./x-B9zh7tQD.js";import"./index-FnlemJSI.js";import"./avatar-CJTUIFCH.js";import"./users-Dopi3ewh.js";import"./qr-code-Cli3oJDj.js";import"./chart-column-JeVGbhpr.js";import"./building-B7asMN4i.js";import"./database-CHq7A3iR.js";function qe({incident:t,canEdit:I,canDelete:U,canConfirm:_}){var A,k,T,S,P;const{t:s}=W(),[y,o]=n.useState(!1),[E,H]=n.useState(!1),[C,M]=n.useState(""),R=[{title:"Dashboard",href:"/dashboard"},{title:"Incidents",href:route("incidents.index")},{title:t.title,href:route("incidents.show",t.id)}],D=()=>{d.delete(route("incidents.destroy",t.id))},q=()=>{d.post(route("incidents.confirm",t.id),{confirmation_notes:C})},z=()=>{d.post(route("incidents.unconfirm",t.id))};return e.jsxs(Q,{breadcrumbs:R,children:[e.jsx(J,{title:s("incidents.show_title",{name:t.title})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-l from-blue-600 via-indigo-600 to-purple-600 p-8 lg:p-12 text-white shadow-2xl mb-8 group",children:[e.jsx("div",{className:"absolute inset-0 bg-black/5"}),e.jsx("div",{className:"absolute top-0 left-0 w-80 h-80 bg-white/10 rounded-full -translate-y-40 -translate-x-40 blur-3xl group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-white/5 rounded-full translate-y-32 translate-x-32 blur-2xl group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 bg-white/5 rounded-full -translate-x-16 -translate-y-16 blur-xl group-hover:scale-150 transition-transform duration-500"}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:justify-between lg:items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"p-6 bg-white/20 backdrop-blur-md rounded-3xl border border-white/30 shadow-2xl group-hover:scale-105 transition-transform duration-300",children:e.jsx(a,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-white drop-shadow-2xl tracking-tight",children:t.title}),e.jsxs("p",{className:"text-white/90 flex items-center gap-3 text-xl font-medium",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(l,{className:"h-6 w-6"})}),t.incident_type]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{href:route("incidents.index"),className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105 group/btn",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-white/20 rounded-lg group-hover/btn:scale-110 transition-transform duration-300",children:e.jsx(ee,{className:"h-4 w-4"})}),s("incidents.back_to_list")]})}),e.jsx(r,{asChild:!0,className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsx(i,{href:route("incidents.edit",t.id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-white/20 rounded-lg",children:e.jsx(F,{className:"h-4 w-4"})}),s("common.edit")]})})}),e.jsx(r,{onClick:()=>o(!0),className:"bg-red-500/20 backdrop-blur-md border-red-300/30 text-white hover:bg-red-500/30 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-red-500/20 rounded-lg",children:e.jsx(L,{className:"h-4 w-4"})}),s("common.delete")]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-12",children:[e.jsxs("div",{className:"md:col-span-8 space-y-8",children:[e.jsxs(m,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-blue-50/30",children:[e.jsxs(x,{className:"bg-gradient-to-l from-blue-500 to-blue-600 text-white border-b pb-4",children:[e.jsxs(h,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(l,{className:"h-5 w-5"})}),s("incidents.details_title")]}),e.jsx(O,{className:"text-blue-100",children:s("incidents.details_description")})]}),e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-blue-600 mb-3 flex items-center gap-2",dir:"rtl",children:[s("incidents.form.description"),e.jsx(se,{className:"h-4 w-4"})]}),e.jsx("div",{className:"rounded-xl border border-blue-100 bg-gradient-to-l from-blue-50 to-white p-4",children:e.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-line",dir:"rtl",children:t.description})})]}),e.jsx(K,{className:"my-6"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-blue-600 mb-3 flex items-center gap-2",dir:"rtl",children:[s("incidents.impact"),e.jsx(Z,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-blue-100 bg-gradient-to-l from-blue-50 to-white p-4",children:[e.jsx("div",{className:"text-sm text-blue-700 font-medium",dir:"rtl",children:s("incidents.form.casualties")}),e.jsx("div",{className:"mt-2 text-3xl font-bold text-blue-900",children:t.casualties})]}),e.jsxs("div",{className:"rounded-xl border border-blue-100 bg-gradient-to-l from-blue-50 to-white p-4",children:[e.jsx("div",{className:"text-sm text-blue-700 font-medium",dir:"rtl",children:s("incidents.form.injuries")}),e.jsx("div",{className:"mt-2 text-3xl font-bold text-blue-900",children:t.injuries})]})]})]})]})})]}),t.report&&e.jsxs(m,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-blue-50/30",children:[e.jsxs(x,{className:"bg-gradient-to-l from-blue-500 to-blue-600 text-white border-b pb-4",children:[e.jsxs(h,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(l,{className:"h-5 w-5"})}),s("incidents.associated_report")]}),e.jsx(O,{className:"text-blue-100",children:s("incidents.associated_report_description")})]}),e.jsx(u,{className:"p-6",children:e.jsxs(i,{href:route("incident-reports.show",t.report.id),className:"group flex items-center rounded-xl border border-blue-100 bg-gradient-to-l from-blue-50 to-white p-4 transition-all duration-300 hover:bg-blue-100/50 hover:scale-105",children:[e.jsx("div",{className:"mr-4 rounded-full bg-blue-100 p-2",children:e.jsx(l,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-900 group-hover:underline",children:t.report.report_number}),e.jsx("div",{className:"text-sm text-blue-600",children:s("incidents.view_full_report")})]})]})})]})]}),e.jsx("div",{className:"md:col-span-4 space-y-8",children:e.jsxs(m,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-blue-50/30",children:[e.jsx(x,{className:"bg-gradient-to-l from-blue-500 to-blue-600 text-white border-b pb-4",children:e.jsxs(h,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(V,{className:"h-5 w-5"})}),s("incidents.information")]})}),e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incidents.date_time"),":",e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("span",{className:"text-sm text-blue-900 font-semibold",children:[$(new Date(t.incident_date),"PPP"),t.incident_time&&` ${t.incident_time}`]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incidents.category_type"),":",e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(c,{variant:"outline",className:"bg-gradient-to-l from-blue-100 to-blue-200 text-blue-800 border-blue-300 px-3 py-1 text-xs font-medium mb-1",children:((A=t.category)==null?void 0:A.name)||s("incidents.unspecified")}),e.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:t.incident_type})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incidents.table.location"),":",e.jsx(le,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:t.location||s("incidents.unspecified_location")}),e.jsxs("div",{className:"text-sm text-blue-800",children:[(k=t.district)==null?void 0:k.name,", ",(S=(T=t.district)==null?void 0:T.province)==null?void 0:S.name]}),t.coordinates&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Coordinates: ",t.coordinates]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incidents.reported_by"),":",e.jsx(ie,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-blue-900 font-semibold",children:((P=t.reporter)==null?void 0:P.name)||s("incidents.unknown")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incidents.status"),":",e.jsx(ae,{className:"h-4 w-4"})]}),e.jsx(c,{variant:"outline",className:"bg-gradient-to-l from-blue-100 to-blue-200 text-blue-800 border-blue-300 px-3 py-1 text-xs font-medium",children:t.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incidents.confirmation_status"),":",e.jsx(a,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(c,{variant:t.is_confirmed?"default":"outline",className:`px-3 py-1 text-xs font-medium ${t.is_confirmed?"bg-green-100 text-green-800 border-green-300":"bg-yellow-100 text-yellow-800 border-yellow-300"}`,children:t.is_confirmed?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s("incidents.confirmed")]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s("incidents.unconfirmed")]})}),t.is_confirmed&&t.confirmer&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[s("incidents.confirmed_by"),": ",t.confirmer.name]}),t.is_confirmed&&t.confirmed_at&&e.jsxs("div",{className:"text-xs text-blue-600",children:[s("incidents.confirmed_at"),": ",$(new Date(t.confirmed_at),"PPP")]})]})]}),t.confirmation_notes&&e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("span",{className:"text-sm text-blue-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incidents.confirmation_notes"),":",e.jsx(l,{className:"h-4 w-4"})]}),e.jsx("div",{className:"text-right max-w-xs",children:e.jsx("div",{className:"text-sm text-blue-900 bg-blue-50 p-2 rounded-lg border border-blue-200",children:t.confirmation_notes})})]})]})})]})})]}),e.jsxs("div",{className:"mt-8 flex flex-wrap gap-4 justify-center",children:[I&&e.jsx(r,{asChild:!0,className:"bg-gradient-to-l from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105",children:e.jsxs(i,{href:route("incidents.edit",t.id),children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),s("common.edit")]})}),U&&e.jsxs(b,{open:y,onOpenChange:o,children:[e.jsx(B,{asChild:!0,children:e.jsxs(r,{variant:"destructive",className:"shadow-lg rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),s("common.delete")]})}),e.jsxs(p,{className:"max-w-md",children:[e.jsxs(f,{children:[e.jsx(j,{className:"text-xl",children:s("incidents.delete_title")}),e.jsx(g,{className:"mt-2",children:s("incidents.delete_description")})]}),e.jsxs(N,{className:"mt-6",children:[e.jsx(w,{className:"shadow-sm",children:s("common.cancel")}),e.jsx(v,{onClick:D,className:"bg-destructive text-destructive-foreground shadow-sm",children:s("common.delete")})]})]})]}),_&&!t.is_confirmed&&e.jsxs(b,{open:E,onOpenChange:H,children:[e.jsx(B,{asChild:!0,children:e.jsxs(r,{className:"bg-gradient-to-l from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105",children:[e.jsx(a,{className:"mr-2 h-4 w-4"}),s("incidents.confirm")]})}),e.jsxs(p,{className:"max-w-md",children:[e.jsxs(f,{children:[e.jsx(j,{className:"text-xl",children:s("incidents.confirm_title")}),e.jsx(g,{className:"mt-2",children:s("incidents.confirm_description")})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(Y,{htmlFor:"confirmation_notes",className:"text-sm font-medium",children:[s("incidents.confirmation_notes")," (",s("common.optional"),")"]}),e.jsx(X,{id:"confirmation_notes",value:C,onChange:G=>M(G.target.value),placeholder:s("incidents.confirmation_notes_placeholder"),className:"mt-2",rows:3})]}),e.jsxs(N,{className:"mt-6",children:[e.jsx(w,{className:"shadow-sm",children:s("common.cancel")}),e.jsx(v,{onClick:q,className:"bg-green-600 text-white shadow-sm",children:s("incidents.confirm")})]})]})]}),_&&t.is_confirmed&&e.jsxs(r,{onClick:z,variant:"outline",className:"border-yellow-300 text-yellow-700 hover:bg-yellow-50 shadow-lg rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105",children:[e.jsx(a,{className:"mr-2 h-4 w-4"}),s("incidents.unconfirm")]})]})]}),e.jsx(b,{open:y,onOpenChange:o,children:e.jsxs(p,{className:"max-w-md",children:[e.jsxs(f,{children:[e.jsx(j,{className:"text-xl",children:s("incidents.delete_title")}),e.jsx(g,{className:"mt-2",children:s("incidents.delete_description")})]}),e.jsxs(N,{className:"mt-6",children:[e.jsx(w,{className:"shadow-sm",children:s("common.cancel")}),e.jsx(v,{onClick:D,className:"bg-destructive text-destructive-foreground shadow-sm",children:s("common.delete")})]})]})})]})}export{qe as default};

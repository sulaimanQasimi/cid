import{r as c,S as g,j as e,L as $,$ as v}from"./app-Bma_fItU.js";import{A as Q,b as U}from"./app-layout-u8qGCbR6.js";import{B as t}from"./button-CzRgNsyG.js";import{T as M,a as X,b as N,c as h,d as q,e as d}from"./table-CYoQG8qQ.js";import{I as G}from"./input-D0SulR8O.js";import{S as T,a as _,b as I,c as P,d as z}from"./select-Pu4KpOHl.js";import{B as b}from"./badge-JO2x7ul7.js";import{C as J,d as K}from"./card-BIuJrEO3.js";import{A as W,a as Y,b as Z,c as ee,d as se,e as ae,f as re,g as te}from"./alert-dialog-9lJ4Juxc.js";import{u as le}from"./use-debounce-BqZ5w2MM.js";import{P as ie}from"./plus-Db6BRBpv.js";import{S as ne}from"./search-Cc6x5lVM.js";import{A as ce}from"./arrow-up-down-ULi-IYpz.js";import{F as oe}from"./filter-x-MzGzO-BU.js";import{E as de}from"./eye-BwI02PwO.js";import{P as me}from"./pencil-DSDaaQar.js";import{T as he}from"./trash-C6NCaIGL.js";import{C as xe}from"./chevron-left-DunJj24K.js";import"./utils-CrCc3beW.js";import"./index-DrfFIgyj.js";import"./createLucideIcon-DtvJ2D3y.js";import"./index-IbJpF8vp.js";import"./index-DMX7bFZZ.js";import"./index-CfcJg1bL.js";import"./x-DohXZfBk.js";import"./index-DWU8_amn.js";import"./avatar-BMavUdds.js";import"./translate-CnpFHJdd.js";import"./file-text-BJFIhoQp.js";import"./users-C4djnC4v.js";import"./tag-Bjku_qlO.js";import"./triangle-alert-Dw5xZqC3.js";import"./qr-code-KCWtWkQ9.js";import"./database-DOMgUFZB.js";import"./index-BTzh_SKg.js";import"./check-dF-pcThF.js";const pe=[{title:"Info Management",href:"#"},{title:"Info Categories",href:route("info-categories.index")}],E=[{value:"name",label:"Name"},{value:"created_at",label:"Created Date"},{value:"updated_at",label:"Updated Date"}],ue=[{value:10,label:"10 per page"},{value:25,label:"25 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}];function Ye({categories:a,filters:i}){var y,A;const[o,C]=c.useState(i.search||""),[l,S]=c.useState(i.sort||"name"),[r,D]=c.useState(i.direction||"asc"),[n,w]=c.useState(i.per_page||10),[F,k]=c.useState(((y=a.meta)==null?void 0:y.current_page)||1),[B,x]=c.useState(!1),[m,p]=c.useState(null),u=le(o,300);c.useEffect(()=>{(u!==i.search||l!==i.sort||r!==i.direction||n!==i.per_page)&&L()},[u,l,r,n]);const L=()=>{try{const s={search:u,sort:l,direction:r,per_page:n,page:1};g.get(route("info-categories.index"),s,{preserveState:!0,preserveScroll:!1,replace:!0})}catch(s){console.error("Error applying filters:",s)}},j=s=>{if(s!==F){k(s);try{g.get(route("info-categories.index"),{search:u,sort:l,direction:r,per_page:n,page:s},{preserveState:!0,preserveScroll:!0,replace:!0})}catch(f){console.error("Error navigating to page:",f)}}},O=s=>{s.preventDefault()},R=()=>{D(r==="asc"?"desc":"asc")},H=()=>{C(""),S("name"),D("asc"),w(10)},V=()=>{if(m)try{g.delete(route("info-categories.destroy",m.id),{onSuccess:()=>{p(null),x(!1)},preserveScroll:!0})}catch(s){console.error("Error deleting category:",s),p(null),x(!1)}};return e.jsxs(Q,{breadcrumbs:pe,children:[e.jsx($,{title:"Info Categories"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Info Categories"}),e.jsx(t,{asChild:!0,children:e.jsxs(v,{href:route("info-categories.create"),children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Create Category"]})})]}),e.jsx(J,{className:"mb-6",children:e.jsxs(K,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("form",{onSubmit:O,className:"flex w-full items-center space-x-2",children:[e.jsx(G,{type:"search",placeholder:"Search categories...",value:o,onChange:s=>C(s.target.value),className:"flex-1"}),e.jsxs(t,{type:"submit",size:"sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{value:l,onValueChange:S,children:[e.jsx(_,{className:"w-[130px]",children:e.jsx(I,{placeholder:"Sort by"})}),e.jsx(P,{children:E.map(s=>e.jsx(z,{value:s.value,children:s.label},s.value))})]}),e.jsx(t,{variant:"outline",size:"icon",onClick:R,title:r==="asc"?"Ascending":"Descending",children:e.jsx(ce,{className:`h-4 w-4 ${r==="asc"?"":"transform rotate-180"}`})})]}),e.jsxs(T,{value:n.toString(),onValueChange:s=>w(parseInt(s)),children:[e.jsx(_,{className:"w-[130px]",children:e.jsx(I,{placeholder:"Items per page"})}),e.jsx(P,{children:ue.map(s=>e.jsx(z,{value:s.value.toString(),children:s.label},s.value))})]}),(o||l!=="name"||r!=="asc"||n!==10)&&e.jsxs(t,{variant:"ghost",size:"sm",onClick:H,className:"ml-2",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Reset"]})]})]}),(o||l!=="name"||r!=="asc"||n!==10)&&e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Active filters:"}),o&&e.jsxs(b,{variant:"secondary",className:"text-xs",children:["Search: ",o]}),e.jsxs(b,{variant:"secondary",className:"text-xs",children:["Sort: ",((A=E.find(s=>s.value===l))==null?void 0:A.label)||l," (",r==="asc"?"Ascending":"Descending",")"]}),e.jsxs(b,{variant:"secondary",className:"text-xs",children:["Per page: ",n]})]})]})}),e.jsxs(M,{children:[e.jsx(X,{children:e.jsxs(N,{children:[e.jsx(h,{children:"ID"}),e.jsx(h,{children:"Name"}),e.jsx(h,{children:"Description"}),e.jsx(h,{children:"Created At"}),e.jsx(h,{className:"text-right",children:"Actions"})]})}),e.jsx(q,{children:a.data&&a.data.length>0?a.data.map(s=>e.jsxs(N,{children:[e.jsx(d,{children:s.id}),e.jsx(d,{className:"font-medium",children:s.name}),e.jsx(d,{children:s.description||"-"}),e.jsx(d,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(d,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(v,{href:route("info-categories.show",s.id),children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsx(t,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(v,{href:route("info-categories.edit",s.id),children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsx(t,{size:"sm",variant:"destructive",onClick:()=>{p(s),x(!0)},children:e.jsx(he,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx(N,{children:e.jsxs(d,{colSpan:5,className:"text-center py-4",children:["No categories found. ",o?"Try clearing your search filters.":"Create your first one!"]})})})]}),a.meta&&a.meta.last_page>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",a.meta.from," to ",a.meta.to," of ",a.meta.total," categories"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>j(a.meta.current_page-1),disabled:a.meta.current_page===1,children:e.jsx(xe,{className:"h-4 w-4"})}),a.meta.links.slice(1,-1).map((s,f)=>e.jsx(t,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&j(Number(s.label)),disabled:!s.url,children:s.label},f)),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>j(a.meta.current_page+1),disabled:a.meta.current_page===a.meta.last_page,children:e.jsx(U,{className:"h-4 w-4"})})]})]})]})})})}),e.jsx(W,{open:B,onOpenChange:x,children:e.jsxs(Y,{children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Are you sure?"}),e.jsxs(se,{children:['This will permanently delete the category "',m==null?void 0:m.name,'".',e.jsx("br",{}),"This action cannot be undone."]})]}),e.jsxs(ae,{children:[e.jsx(re,{onClick:()=>p(null),children:"Cancel"}),e.jsx(te,{onClick:V,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})}export{Ye as default};

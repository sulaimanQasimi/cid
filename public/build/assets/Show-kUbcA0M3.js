import{K,r as S,j as e,L as T,$ as m,S as J}from"./app-KQLyvN2P.js";import{B as x}from"./button-AvxSes-o.js";import{C as u,a as f,b as j,d as b,c as w}from"./card-DrHUIg8O.js";import{B as h}from"./badge-B6QHWS4I.js";import{P as Q}from"./pagination-RjediMO3.js";import{A as O}from"./app-layout-Bdzothk-.js";import{T as W,a as X,b as U,c as v,d as Y,e as y}from"./table-BMthOfyk.js";import{T as Z,a as ee,b as F,c as B}from"./tabs-DQb8wmLo.js";import{L as se}from"./label-BRZ6Piws.js";import{S as te,a as re,b as ae,c as ne,d as V}from"./select-Cg60_nLF.js";import{u as ie}from"./translate-COBoxX77.js";import{c as A}from"./utils-CiMkPJiI.js";import{A as le,a as ce,b as de,c as oe,d as me,e as xe,f as he,g as pe}from"./alert-dialog-C7eJTm2P.js";import{S as N,T as C}from"./triangle-alert-CQ_CjCLp.js";import{A as L}from"./arrow-left-Bw8Z3N6s.js";import{f as p}from"./index-CaunA62S.js";import{F as g}from"./file-text-Dzj-nAtw.js";import{C as _}from"./clock-BCl1lfRo.js";import{T as ge}from"./trash-jbxLdSRd.js";import{P as ue}from"./pencil-BHLNqs_N.js";import{P as fe}from"./printer-BdgbuNK5.js";import{C as je}from"./calendar-3bWFNNua.js";import{U as be}from"./users-CAUjgfNW.js";import{U as Ne}from"./user-round-XTPJtDf8.js";import{U as E}from"./user-JvU-HWN6.js";import{B as we}from"./book-text-BSb5srls.js";import{G as _e}from"./gavel-DWgkMuFE.js";import{F as ve}from"./file-check-BxbLk5Fb.js";import{C as G}from"./chart-bar-D5ENngFy.js";import{S as ye}from"./square-pen-B975GMCw.js";import{c as Ae}from"./createLucideIcon-CznAHYsV.js";import"./index-UWzNoFPx.js";import"./index-CVbkeVfs.js";import"./index-DiT7L2kZ.js";import"./index-CljKSe8P.js";import"./x-DIaGT7WW.js";import"./index-DgfNbBKk.js";import"./avatar-CsW0f8-D.js";import"./eye-nKR_1c9r.js";import"./tag-C3Nkr3rh.js";import"./qr-code-CL-9LaLC.js";import"./map-pin-D7myEqRr.js";import"./database-CFc0aJ7L.js";import"./index-D60cCxxV.js";import"./check-D15UBcOh.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Re=Ae("CirclePlus",Ce);function Ie(){const{incidentReportAccess:t}=K().props,r=t||{};return{canViewIncidentReports:r.canViewIncidentReports||!1,canCreateIncidentReports:r.canCreateIncidentReports||!1,canUpdateIncidentReports:r.canUpdateIncidentReports||!1,canDeleteIncidentReports:r.canDeleteIncidentReports||!1,canAccessIncidentsOnly:r.canAccessIncidentsOnly||!1,hasIncidentReportAccess:r.hasIncidentReportAccess||!1,currentAccess:r.currentAccess||null,canViewIncidentReport:r.canViewIncidentReport||!1,canUpdateIncidentReport:r.canUpdateIncidentReport||!1,canDeleteIncidentReport:r.canDeleteIncidentReport||!1,canAccessIncidentsOnlyForReport:r.canAccessIncidentsOnlyForReport||!1,hasIncidentReportAccessForReport:r.hasIncidentReportAccessForReport||!1,hasFullAccess:()=>{var n;return((n=r.currentAccess)==null?void 0:n.access_type)==="full"},hasReadOnlyAccess:()=>{var n,l;return((n=r.currentAccess)==null?void 0:n.access_type)==="read_only"||((l=r.currentAccess)==null?void 0:l.access_type)==="full"},hasIncidentsOnlyAccess:()=>{var n,l;return((n=r.currentAccess)==null?void 0:n.access_type)==="incidents_only"||((l=r.currentAccess)==null?void 0:l.access_type)==="full"},isAccessExpired:()=>{var n;return(n=r.currentAccess)!=null&&n.expires_at?new Date(r.currentAccess.expires_at)<new Date:!1},isAccessActive:()=>{var n,l;return((n=r.currentAccess)==null?void 0:n.is_active)&&!((l=r.isAccessExpired)!=null&&l.call(r))},isGlobalAccess:()=>{var n,l;return((n=r.currentAccess)==null?void 0:n.is_global)||((l=r.currentAccess)==null?void 0:l.incident_report_id)===null},isReportSpecificAccess:()=>!r.isGlobalAccess(),getCurrentReportId:()=>{var n;return(n=r.currentAccess)==null?void 0:n.incident_report_id},isReportSpecific:()=>{var n;return((n=r.currentAccess)==null?void 0:n.is_report_specific)||!1}}}function Ns({report:t,incidents:r,reportStats:n,statCategories:l}){var D,P;const{t:s}=ie(),[H,R]=S.useState(!1),i=Ie(),I=[{title:s("incident_reports.page_title"),href:route("incident-reports.index")},{title:t.report_number,href:route("incident-reports.show",t.id)}],$=()=>{J.delete(route("incident-reports.destroy",t.id))},[k,z]=S.useState(null),d={};n.forEach(a=>{const c=a.stat_category_item.category.label;a.stat_category_item.category.id,d[c]||(d[c]=[]),d[c].push(a)});const M=k?Object.entries(d).filter(([a,c])=>c.some(o=>o.stat_category_item.category.id===k)):Object.entries(d);function q(a){return a.integer_value!==null?a.integer_value.toString():a.string_value||""}return!i.hasIncidentReportAccessForReport||i.isAccessExpired()?e.jsxs(O,{breadcrumbs:I,children:[e.jsx(T,{title:s("incident_reports.show.page_title",{number:t.report_number})}),e.jsx("div",{className:"container px-0 py-6",children:e.jsxs(u,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-red-50 to-red-100/30",children:[e.jsx(f,{className:"bg-gradient-to-l from-red-500 to-red-600 text-white border-b pb-4",children:e.jsxs(j,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(N,{className:"h-5 w-5"})}),s("incident_reports.access_denied.title")]})}),e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:s("incident_reports.access_denied.message")}),e.jsx("p",{className:"text-red-600 mb-6",children:s("incident_reports.access_denied.description")}),e.jsx(x,{asChild:!0,className:"bg-gradient-to-l from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white",children:e.jsxs(m,{href:route("incident-reports.index"),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),s("common.back_to_list")]})})]})})]})})]}):e.jsxs(O,{breadcrumbs:I,children:[e.jsx(T,{title:s("incident_reports.show.page_title",{number:t.report_number})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-l from-teal-600 via-emerald-600 to-green-600 p-8 lg:p-12 text-white shadow-2xl mb-8 group",children:[e.jsx("div",{className:"absolute inset-0 bg-black/5"}),e.jsx("div",{className:"absolute top-0 left-0 w-80 h-80 bg-white/10 rounded-full -translate-y-40 -translate-x-40 blur-3xl group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-white/5 rounded-full translate-y-32 translate-x-32 blur-2xl group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 bg-white/5 rounded-full -translate-x-16 -translate-y-16 blur-xl group-hover:scale-150 transition-transform duration-500"}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:justify-between lg:items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"p-6 bg-white/20 backdrop-blur-md rounded-3xl border border-white/30 shadow-2xl group-hover:scale-105 transition-transform duration-300",children:e.jsx(N,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-white drop-shadow-2xl tracking-tight",children:t.report_number}),e.jsxs("p",{className:"text-white/90 flex items-center gap-3 text-xl font-medium",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(g,{className:"h-6 w-6"})}),s("incident_reports.show.report_date_label"),": ",p(new Date(t.report_date),"PPP")]}),i.currentAccess&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",className:"bg-white/20 backdrop-blur-sm border-white/30 text-white px-3 py-1 text-sm font-medium",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),i.currentAccess.access_type==="full"&&s("incident_reports.access.full"),i.currentAccess.access_type==="read_only"&&s("incident_reports.access.read_only"),i.currentAccess.access_type==="incidents_only"&&s("incident_reports.access.incidents_only")]}),e.jsxs(h,{variant:"outline",className:"bg-white/20 backdrop-blur-sm border-white/30 text-white px-3 py-1 text-sm font-medium",children:[e.jsx(g,{className:"h-3 w-3 mr-1"}),i.isReportSpecific()?s("incident_reports.access.report_specific"):s("incident_reports.access.global")]}),i.currentAccess.expires_at&&e.jsxs(h,{variant:"outline",className:A("backdrop-blur-sm text-white px-3 py-1 text-sm font-medium",new Date(i.currentAccess.expires_at)<new Date(Date.now()+7*24*60*60*1e3)?"bg-yellow-500/20 border-yellow-300/30":"bg-white/20 border-white/30"),children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),s("incident_reports.access.expires"),": ",p(new Date(i.currentAccess.expires_at),"PP")]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i.canDeleteIncidentReport&&e.jsx(x,{onClick:()=>R(!0),className:"bg-red-500/20 backdrop-blur-md border-red-300/30 text-white hover:bg-red-500/30 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-red-500/20 rounded-lg",children:e.jsx(ge,{className:"h-4 w-4"})}),s("common.delete")]})}),i.canUpdateIncidentReport&&e.jsx(x,{asChild:!0,className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsx(m,{href:route("incident-reports.edit",t.id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-white/20 rounded-lg",children:e.jsx(ue,{className:"h-4 w-4"})}),s("incident_reports.actions.edit_report")]})})}),i.canViewIncidentReport&&e.jsx(x,{asChild:!0,className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105",children:e.jsx(m,{href:route("incident-reports.print",t.id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-white/20 rounded-lg",children:e.jsx(fe,{className:"h-4 w-4"})}),s("incident_reports.actions.print_report")]})})}),e.jsx(m,{href:route("incident-reports.index"),className:"bg-white/20 backdrop-blur-md border-white/30 text-white hover:bg-white/30 rounded-xl shadow-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105 group/btn",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s("common.back"),e.jsx("div",{className:"p-1 bg-white/20 rounded-lg group-hover/btn:scale-110 transition-transform duration-300",children:e.jsx(L,{className:"h-4 w-4"})})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-12",children:[e.jsxs(u,{className:"md:col-span-4 border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:[e.jsxs(f,{className:"bg-gradient-to-l from-green-500 to-green-600 text-white border-b pb-4",children:[e.jsxs(j,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(g,{className:"h-5 w-5"})}),s("incident_reports.form.info_title")]}),e.jsx(w,{className:"text-green-100",children:s("incident_reports.details.long_description")})]}),e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-green-600 mb-3 flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.report_info"),e.jsx(g,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"rounded-xl border border-green-100 bg-gradient-to-l from-green-50 to-white p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.report_number"),":",e.jsx(g,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-green-900 font-semibold",children:t.report_number})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.report_date_label"),":",e.jsx(je,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-green-900",children:p(new Date(t.report_date),"PPP")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.status"),":",e.jsx(_,{className:"h-4 w-4"})]}),e.jsx(h,{variant:"outline",className:"bg-gradient-to-l from-green-100 to-green-200 text-green-800 border-green-300 px-3 py-1 text-xs font-medium",children:s(`incident_reports.status.${t.report_status}`)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.security_level"),":",e.jsx(N,{className:"h-4 w-4"})]}),e.jsx(h,{variant:"outline",className:"bg-gradient-to-l from-green-100 to-green-200 text-green-800 border-green-300 px-3 py-1 text-xs font-medium",children:s(`incident_reports.level.${t.security_level}`)})]}),t.source&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.source_label"),":",e.jsx(be,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-green-900",children:t.source})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-green-600 mb-3 flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.user_info"),e.jsx(Ne,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"rounded-xl border border-green-100 bg-gradient-to-l from-green-50 to-white p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.submitted_by"),":",e.jsx(E,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-green-900",children:((D=t.submitter)==null?void 0:D.name)||s("incidents.unknown")})]}),t.approver&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.approved_by"),":",e.jsx(E,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-green-900",children:(P=t.approver)==null?void 0:P.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.created_at"),":",e.jsx(_,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-green-900",children:p(new Date(t.created_at),"PPP")})]}),t.updated_at!==t.created_at&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-green-700 font-medium flex items-center gap-2",dir:"rtl",children:[s("incident_reports.show.last_updated"),":",e.jsx(_,{className:"h-4 w-4"})]}),e.jsx("span",{className:"text-sm text-green-900",children:p(new Date(t.updated_at),"PPP")})]})]})]})]})})]}),e.jsx("div",{className:"md:col-span-8 space-y-8",children:e.jsxs(u,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:[e.jsxs(f,{className:"bg-gradient-to-l from-green-500 to-green-600 text-white border-b pb-4",children:[e.jsxs(j,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(we,{className:"h-5 w-5"})}),s("incident_reports.details.title")]}),e.jsx(w,{className:"text-green-100",children:s("incident_reports.details.long_description")})]}),e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-green-600 mb-3 flex items-center gap-2",dir:"rtl",children:[s("incident_reports.details.details_label"),e.jsx(g,{className:"h-4 w-4"})]}),e.jsx("div",{className:"rounded-xl border border-green-100 bg-gradient-to-l from-green-50 to-white p-4",children:e.jsx("p",{className:"text-sm text-green-900 whitespace-pre-wrap",dir:"rtl",children:t.details})})]}),t.action_taken&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-green-600 mb-3 flex items-center gap-2",dir:"rtl",children:[s("incident_reports.details.action_taken_label"),e.jsx(_e,{className:"h-4 w-4"})]}),e.jsx("div",{className:"rounded-xl border border-green-100 bg-gradient-to-l from-green-50 to-white p-4",children:e.jsx("p",{className:"text-sm text-green-900 whitespace-pre-wrap",dir:"rtl",children:t.action_taken})})]}),t.recommendation&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-green-600 mb-3 flex items-center gap-2",dir:"rtl",children:[s("incident_reports.details.recommendation_label"),e.jsx(ve,{className:"h-4 w-4"})]}),e.jsx("div",{className:"rounded-xl border border-green-100 bg-gradient-to-l from-green-50 to-white p-4",children:e.jsx("p",{className:"text-sm text-green-900 whitespace-pre-wrap",dir:"rtl",children:t.recommendation})})]})]})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(Z,{defaultValue:"incidents",className:"w-full",children:[e.jsxs(ee,{className:"grid w-full grid-cols-2 mb-6 rounded-xl p-1 bg-gradient-to-l from-green-100 to-green-200 shadow-lg",children:[e.jsxs(F,{value:"incidents",className:A("data-[state=active]:bg-gradient-to-l data-[state=active]:from-green-500 data-[state=active]:to-green-600 data-[state=active]:text-white data-[state=active]:shadow-lg flex items-center gap-2","transition-all duration-300 rounded-lg"),children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:s("incidents.page_title")})]}),e.jsxs(F,{value:"stats",className:A("data-[state=active]:bg-gradient-to-l data-[state=active]:from-green-500 data-[state=active]:to-green-600 data-[state=active]:text-white data-[state=active]:shadow-lg flex items-center gap-2","transition-all duration-300 rounded-lg"),children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:s("incident_reports.stats.title")})]})]}),e.jsx(B,{value:"incidents",children:e.jsxs(u,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:[e.jsxs(f,{className:"bg-gradient-to-l from-green-500 to-green-600 text-white border-b pb-4",children:[e.jsxs(j,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(C,{className:"h-5 w-5"})}),s("incidents.page_title")]}),e.jsx(w,{className:"text-green-100",children:s("incident_reports.incidents.card_description")})]}),e.jsxs(b,{className:"p-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(x,{asChild:!0,className:"bg-gradient-to-l from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg",children:e.jsxs(m,{href:route("incident-reports.incidents",t.id),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),s("incident_reports.incidents.view_all")]})})}),e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"border-b transition-colors hover:bg-green-50/50 data-[state=selected]:bg-green-50",children:[e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-green-700",children:s("incidents.table.title")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-green-700",children:s("incidents.table.date")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-green-700",children:s("incidents.table.category")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-green-700",children:s("incidents.table.severity")}),e.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-green-700",children:s("common.actions")})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"h-12 px-4 text-center align-middle text-green-600",children:s("incidents.no_incidents")})}):r.data.map(a=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-green-50/50 data-[state=selected]:bg-green-50",children:[e.jsx("td",{className:"p-4 align-middle text-green-900",children:a.title}),e.jsx("td",{className:"p-4 align-middle text-green-900",children:p(new Date(a.incident_date),"PP")}),e.jsx("td",{className:"p-4 align-middle",children:a.category?e.jsx(h,{style:{backgroundColor:a.category.color,color:"#fff"},children:a.category.name}):s("incidents.none")}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(h,{variant:a.severity==="high"?"destructive":a.severity==="medium"?"warning":"default",children:a.severity})}),e.jsx("td",{className:"p-4 align-middle",children:e.jsx(x,{variant:"ghost",size:"sm",asChild:!0,className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:e.jsx(m,{href:route("incidents.show",a.id),children:s("incident_reports.view")})})})]},a.id))})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(Q,{links:r.links})})]})]})}),e.jsx(B,{value:"stats",children:e.jsxs(u,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:[e.jsxs(f,{className:"bg-gradient-to-l from-green-500 to-green-600 text-white border-b pb-4",children:[e.jsxs(j,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(G,{className:"h-5 w-5"})}),s("incident_reports.stats.title")]}),e.jsx(w,{className:"text-green-100",children:s("incident_reports.stats.description")})]}),e.jsxs(b,{className:"p-6",children:[i.canUpdateIncidentReport&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(x,{asChild:!0,className:"bg-gradient-to-l from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg",children:e.jsxs(m,{href:route("incident-reports.edit",t.id),children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),s("incident_reports.stats.edit")]})})}),Object.keys(d).length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("p",{className:"text-green-600",children:s("incident_reports.stats.empty")}),i.canUpdateIncidentReport&&e.jsx(x,{variant:"outline",asChild:!0,className:"mt-4 border-green-300 text-green-700 hover:bg-green-50",children:e.jsxs(m,{href:route("incident-reports.edit",t.id),children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),s("incident_reports.stats.add_data")]})})]}):e.jsxs("div",{className:"space-y-6",children:[l.length>1&&n.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx(se,{htmlFor:"category-filter",className:"text-green-700 font-medium",children:s("incident_reports.stats.filter_by_category")}),e.jsxs(te,{onValueChange:a=>z(a==="all"?null:parseInt(a)),defaultValue:"all",children:[e.jsx(re,{id:"category-filter",className:"border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white",children:e.jsx(ae,{placeholder:s("incident_reports.stats.select_category")})}),e.jsxs(ne,{children:[e.jsx(V,{value:"all",children:s("incidents.filters.all_categories")}),l.filter(a=>Object.entries(d).some(([c])=>d[c][0].stat_category_item.category.id===a.id)).map(a=>e.jsx(V,{value:a.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:a.color}}),a.label]})},a.id))]})]})]}),M.map(([a,c])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-medium text-green-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:c[0].stat_category_item.category.color}}),a]})}),e.jsxs(W,{children:[e.jsx(X,{children:e.jsxs(U,{className:"bg-green-50",children:[e.jsx(v,{className:"text-green-700 font-medium",children:s("incident_reports.stats.table.item")}),e.jsx(v,{className:"text-green-700 font-medium",children:s("incident_reports.stats.table.value")}),e.jsx(v,{className:"text-green-700 font-medium",children:s("incident_reports.stats.table.notes")})]})}),e.jsx(Y,{children:c.map(o=>e.jsxs(U,{className:"hover:bg-green-50/50",children:[e.jsx(y,{className:"text-green-900",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:o.stat_category_item.color||o.stat_category_item.category.color}}),e.jsx("span",{children:o.stat_category_item.label})]})}),e.jsx(y,{className:"text-green-900 font-medium",children:q(o)}),e.jsx(y,{className:"text-green-900",children:o.notes||"-"})]},o.id))})]})]},a))]})]})]})})]})})]}),e.jsx(le,{open:H,onOpenChange:R,children:e.jsxs(ce,{className:"max-w-md",children:[e.jsxs(de,{children:[e.jsx(oe,{className:"text-xl",children:s("incident_reports.delete_dialog.title")}),e.jsx(me,{className:"mt-2",children:s("incident_reports.delete_dialog.description",{number:t.report_number})})]}),e.jsxs(xe,{className:"mt-6",children:[e.jsx(he,{className:"shadow-sm",children:s("incident_reports.delete_dialog.cancel")}),e.jsx(pe,{onClick:$,className:"bg-destructive text-destructive-foreground shadow-sm",children:s("incident_reports.delete_dialog.confirm")})]})]})})]})}export{Ns as default};

import{r as o,j as e,L as se,$ as N,S as _}from"./app-i9gygtI7.js";import{A as te,a as le}from"./app-layout-COHwvIY4.js";import{B as r}from"./button-DA8WHqQ5.js";import{T as re,a as ne,b,c as d,d as ie,e as i}from"./table-C-ClZ2FP.js";import{I as ce}from"./input-DoARJtkj.js";import{S as p,a as x,b as j,c as g,d as c}from"./select-yjOttDTn.js";import{B as C}from"./badge-CGb-l8vH.js";import{C as de,a as oe,b as me,d as he}from"./card-NUH92OWN.js";import{A as pe,a as xe,b as je,c as ge,d as ue,e as ve,f as _e,g as Ce}from"./alert-dialog-CPvMowUg.js";import{u as ye}from"./translate-wL0aa-sI.js";import{u as Ne,C as be,a as Se,b as De,c as we}from"./permission-guard-Box27-57.js";import{P as fe}from"./plus-DpSM99ox.js";import{S as Te}from"./search-CdlVHK6c.js";import{A as Ae}from"./arrow-up-down-CenPxcc7.js";import{F as ke}from"./filter-x-BPvI8jR9.js";import{E as Ie}from"./eye-CM8Mcy_6.js";import{P as ze}from"./pencil-C_Xg70FF.js";import{T as Pe}from"./trash-CrYzJ1o7.js";import{C as Fe}from"./chevron-left-CAL4Kwwx.js";import"./utils-Cqzwlyr3.js";import"./index-BYxWpEkI.js";import"./createLucideIcon-CCdCu9x0.js";import"./index-DvqLlsqE.js";import"./index-CeLN-tmV.js";import"./index-CVa0K7PG.js";import"./x-C8tQnPGz.js";import"./index-BVlwhF2s.js";import"./avatar-sdpJXCM7.js";import"./app-logo-Zw_iVi_A.js";import"./app-logo-icon-CAGB5ViX.js";import"./file-text-DN0_y2i8.js";import"./users-CRlr-5yi.js";import"./tag-BP1vVV3I.js";import"./triangle-alert-TrSvGMVO.js";import"./qr-code-5CTkCvG_.js";import"./globe-DI9HJTz2.js";import"./index-DOgva_i9.js";import"./check-BTVcMUtY.js";const Ve=[{title:"Info Management",href:"#"},{title:"Info Records",href:route("infos.index")}],Le=[{value:"name",label:"Name"},{value:"info_type_id",label:"Type"},{value:"info_category_id",label:"Category"},{value:"department_id",label:"Department"},{value:"created_at",label:"Created Date"},{value:"updated_at",label:"Updated Date"}],Be=[{value:10,label:"10 per page"},{value:25,label:"25 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}];function Na({infos:s={data:[],links:{first:null,last:null,prev:null,next:null},meta:{current_page:1,from:1,last_page:1,links:[],path:"",per_page:10,to:0,total:0}},types:S=[],categories:D=[],departments:w=[],filters:t}){var L,B,O,R,$,E,H,U;Ne();const{t:l}=ye(),[f,T]=o.useState(t.search),[M,u]=o.useState(!1),[m,A]=o.useState(null),[X,k]=o.useState(t.type_id||""),[q,I]=o.useState(t.category_id||""),[G,z]=o.useState(t.department_id||""),J=a=>{a.preventDefault(),n({search:f})},K=a=>{n({sort:a})},W=()=>{const a=t.direction==="asc"?"desc":"asc";n({direction:a})},Y=a=>{n({per_page:parseInt(a)})},P=a=>{k(a),n({type_id:a==="_all"?void 0:a})},F=a=>{I(a),n({category_id:a==="_all"?void 0:a})},V=a=>{z(a),n({department_id:a==="_all"?void 0:a})},y=a=>{_.get(route("infos.index"),{...t,page:a},{preserveState:!0,preserveScroll:!0})},n=a=>{_.get(route("infos.index"),{...t,...a,page:1},{preserveState:!0,preserveScroll:!0})},Z=()=>{T(""),k(""),I(""),z(""),_.get(route("infos.index"),{search:"",sort:"name",direction:"asc",per_page:10,page:1,type_id:void 0,category_id:void 0,department_id:void 0})},ee=a=>{A(a),u(!0)},ae=()=>{m&&_.delete(route("infos.destroy",m.id),{onSuccess:()=>{A(null),u(!1)}})};return e.jsxs(te,{breadcrumbs:Ve,children:[e.jsx(se,{title:l("info.page_title")}),e.jsx(pe,{open:M,onOpenChange:u,children:e.jsxs(xe,{children:[e.jsxs(je,{children:[e.jsx(ge,{children:l("info.delete_dialog.title")}),e.jsx(ue,{children:l("info.delete_dialog.description",{name:(m==null?void 0:m.name)||""})})]}),e.jsxs(ve,{children:[e.jsx(_e,{onClick:()=>u(!1),children:l("info.delete_dialog.cancel")}),e.jsx(Ce,{onClick:ae,className:"bg-red-600 hover:bg-red-700",children:l("info.delete_dialog.confirm")})]})]})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:l("info.page_title")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:l("info.page_description")})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(be,{model:"info",children:e.jsx(r,{asChild:!0,size:"default",className:"shadow-sm",children:e.jsxs(N,{href:route("infos.create"),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),l("info.add_button")]})})})})]}),e.jsxs(de,{className:"shadow-sm",children:[e.jsx(oe,{className:"py-4",children:e.jsx(me,{className:"text-base font-medium",children:l("info.search_filters")})}),e.jsxs(he,{children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("form",{onSubmit:J,className:"flex items-center gap-2",children:[e.jsx(ce,{placeholder:l("info.search_placeholder"),value:f,onChange:a=>T(a.target.value),className:"w-full"}),e.jsx(r,{type:"submit",variant:"outline",size:"sm",className:"shadow-sm",children:e.jsx(Te,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{value:t.sort,onValueChange:K,children:[e.jsx(x,{className:"w-[130px]",children:e.jsx(j,{placeholder:l("info.sort_by")})}),e.jsx(g,{children:Le.map(a=>e.jsx(c,{value:a.value,children:l(`info.sort_options.${a.value}`)},a.value))})]}),e.jsx(r,{variant:"outline",size:"icon",onClick:W,title:l(`info.sort_${t.direction==="asc"?"ascending":"descending"}`),children:e.jsx(Ae,{className:`h-4 w-4 ${t.direction==="asc"?"":"transform rotate-180"}`})})]}),e.jsxs(p,{value:t.per_page.toString(),onValueChange:Y,children:[e.jsx(x,{className:"w-[130px]",children:e.jsx(j,{placeholder:l("info.items_per_page")})}),e.jsx(g,{children:Be.map(a=>e.jsx(c,{value:a.value.toString(),children:l("info.per_page_option",{count:a.value.toString()})},a.value))})]}),(t.search||t.sort!=="name"||t.direction!=="asc"||t.per_page!==10||t.type_id||t.category_id||t.department_id)&&e.jsxs(r,{variant:"ghost",size:"sm",onClick:Z,className:"ml-2",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),l("info.reset_filters")]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(p,{value:X,onValueChange:P,children:[e.jsx(x,{children:e.jsx(j,{placeholder:l("info.filter_by_type")})}),e.jsxs(g,{children:[e.jsx(c,{value:"_all",children:l("info.all_types")}),S.map(a=>e.jsx(c,{value:a.id.toString(),children:a.name},a.id))]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs(p,{value:q,onValueChange:F,children:[e.jsx(x,{children:e.jsx(j,{placeholder:"Filter by Category"})}),e.jsxs(g,{children:[e.jsx(c,{value:"_all",children:"All Categories"}),D.map(a=>e.jsx(c,{value:a.id.toString(),children:a.name},a.id))]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs(p,{value:G,onValueChange:V,children:[e.jsx(x,{children:e.jsx(j,{placeholder:"Filter by Department"})}),e.jsxs(g,{children:[e.jsx(c,{value:"_all",children:"All Departments"}),w.map(a=>e.jsx(c,{value:a.id.toString(),children:a.name},a.id))]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[t.search&&e.jsxs(C,{variant:"secondary",className:"px-3 py-1",children:["Search: ",t.search,e.jsx("button",{className:"ml-2",onClick:()=>n({search:""}),children:"Ã—"})]}),t.type_id&&e.jsxs(C,{variant:"secondary",className:"px-3 py-1",children:["Type: ",((L=S.find(a=>a.id.toString()===t.type_id))==null?void 0:L.name)||t.type_id,e.jsx("button",{className:"ml-2",onClick:()=>P(""),children:"Ã—"})]}),t.category_id&&e.jsxs(C,{variant:"secondary",className:"px-3 py-1",children:["Category: ",((B=D.find(a=>a.id.toString()===t.category_id))==null?void 0:B.name)||t.category_id,e.jsx("button",{className:"ml-2",onClick:()=>F(""),children:"Ã—"})]}),t.department_id&&e.jsxs(C,{variant:"secondary",className:"px-3 py-1",children:["Department: ",((O=w.find(a=>a.id.toString()===t.department_id))==null?void 0:O.name)||t.department_id,e.jsx("button",{className:"ml-2",onClick:()=>V(""),children:"Ã—"})]})]})]})]}),e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs(b,{children:[e.jsx(d,{children:"ID"}),e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Category"}),e.jsx(d,{children:"Department"}),e.jsx(d,{children:"Created At"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(ie,{children:s.data&&s.data.length>0?s.data.map(a=>{var v,h,Q;return e.jsxs(b,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{className:"font-medium",children:a.name}),e.jsx(i,{children:((v=a.infoType)==null?void 0:v.name)||"-"}),e.jsx(i,{children:((h=a.infoCategory)==null?void 0:h.name)||"-"}),e.jsx(i,{children:((Q=a.department)==null?void 0:Q.name)||"-"}),e.jsx(i,{children:new Date(a.created_at).toLocaleDateString()}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Se,{model:"info",children:e.jsx(r,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(N,{href:route("infos.show",a.id),children:e.jsx(Ie,{className:"h-4 w-4"})})})}),e.jsx(De,{model:"info",children:e.jsx(r,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(N,{href:route("infos.edit",a.id),children:e.jsx(ze,{className:"h-4 w-4"})})})}),e.jsx(we,{model:"info",children:e.jsx(r,{size:"sm",variant:"destructive",onClick:()=>ee(a),children:e.jsx(Pe,{className:"h-4 w-4"})})})]})})]},a.id)}):e.jsx(b,{children:e.jsx(i,{colSpan:6,className:"text-center py-4",children:"No info records found. Create your first one!"})})})]}),(s==null?void 0:s.meta)&&s.meta.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(R=s==null?void 0:s.meta)==null?void 0:R.from," to ",($=s==null?void 0:s.meta)==null?void 0:$.to," of ",(E=s==null?void 0:s.meta)==null?void 0:E.total," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{var a;return y((((a=s==null?void 0:s.meta)==null?void 0:a.current_page)||1)-1)},disabled:!(s!=null&&s.links)||!s.links.prev,children:e.jsx(Fe,{className:"h-4 w-4"})}),((H=s==null?void 0:s.meta)==null?void 0:H.links)&&((U=s==null?void 0:s.meta)==null?void 0:U.links.slice(1,-1).map((a,v)=>e.jsx(r,{variant:a.active?"default":"outline",size:"sm",onClick:()=>{if(a.url){const h=new URL(a.url).searchParams.get("page");h&&y(parseInt(h))}},disabled:!a.url,children:a.label},v))),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{var a;return y((((a=s==null?void 0:s.meta)==null?void 0:a.current_page)||1)+1)},disabled:!(s!=null&&s.links)||!s.links.next,children:e.jsx(le,{className:"h-4 w-4"})})]})]})]})]})}export{Na as default};

import{j as e,r as b}from"./app-DkoXbpwI.js";import{I as j}from"./input-BygYWTdX.js";import{T as v}from"./textarea-M2JtxZtt.js";import{L as u}from"./label-CX_9_bIH.js";import{c as N}from"./utils-BkyQWX51.js";import{C as y}from"./index-DeUeLHo2.js";import{a as w}from"./app-layout-B16q5OE5.js";function k(r){const d=new Map,o=[];return r.forEach(s=>{const l={...s,children:[]};d.set(s.id,l)}),r.forEach(s=>{const l=d.get(s.id);if(s.parent_id===null)o.push(l);else{const a=d.get(s.parent_id);a&&(a.children=a.children||[],a.children.push(l))}}),o}const f=({item:r,level:d=0,statsData:o,onValueChange:s,onNotesChange:l})=>{var m,h,p,x;const[a,g]=b.useState(!0),t=r.children&&r.children.length>0,i=!t,c=`${d*20}px`;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:N("flex items-center py-2 border-b border-gray-100 dark:border-gray-800",t?"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50":""),style:{paddingLeft:c},onClick:()=>t&&g(!a),children:[t?e.jsx("div",{className:"mr-1",children:a?e.jsx(y,{className:"h-4 w-4"}):e.jsx(w,{className:"h-4 w-4"})}):e.jsx("div",{className:"w-5"}),e.jsx("div",{className:"h-3 w-3 rounded-full mr-2 flex-shrink-0",style:{backgroundColor:r.color||"#e2e8f0"}}),e.jsx("div",{className:"font-medium flex-grow",children:r.label}),i&&e.jsx("div",{className:"flex-shrink-0 ml-4 w-32",children:e.jsx(j,{value:((m=o[r.id])==null?void 0:m.value)||"",onChange:n=>s(r.id,n.target.value),onClick:n=>n.stopPropagation(),placeholder:"Value",className:"text-right h-8 py-1"})})]}),t&&a&&e.jsx("div",{className:`pl-${d+1}`,children:(h=r.children)==null?void 0:h.map(n=>e.jsx(f,{item:n,level:d+1,statsData:o,onValueChange:s,onNotesChange:l},n.id))}),i&&((p=o[r.id])==null?void 0:p.value)&&e.jsx("div",{style:{paddingLeft:`${c+20}px`},className:"py-2 border-b border-gray-100 dark:border-gray-800",children:e.jsx(v,{value:((x=o[r.id])==null?void 0:x.notes)||"",onChange:n=>l(r.id,n.target.value),placeholder:"Notes (optional)",className:"text-sm mt-1",rows:2})})]})};function M({items:r,statsData:d,onValueChange:o,onNotesChange:s}){const l=k(r);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 p-2 bg-gray-100 dark:bg-gray-800 rounded-t-md",children:[e.jsx(u,{className:"font-semibold",children:"Category Items"}),e.jsx(u,{className:"font-semibold w-32 text-right",children:"Value"})]}),e.jsx("div",{className:"border rounded-b-md border-gray-200 dark:border-gray-700",children:l.map(a=>e.jsx(f,{item:a,statsData:d,onValueChange:o,onNotesChange:s},a.id))})]})}export{M as T};

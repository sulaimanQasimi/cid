import{m as $,r as S,j as e,L as H,$ as k}from"./app-OQZATGjm.js";import{B as h}from"./button-BXzQ4Ryb.js";import{C as x,a as p,b as u,c as b,d as f,e as J}from"./card-BROOWpe6.js";import{I as j}from"./input-4h8jwHpg.js";import{L as n}from"./label-u82EJ29s.js";import{T as N}from"./textarea-BCpo7yOd.js";import{S as F,a as T,b as D,c as B,d as m}from"./select-D2p78GN0.js";import{A as K}from"./app-layout-BrVWanYC.js";import{T as M}from"./TreeViewStatSelector-EZtU1f13.js";import{u as P}from"./translate-dWqCPhKR.js";import{S as L,T as a}from"./triangle-alert-CEQLqQPJ.js";import{A as Q}from"./arrow-right-Dz2baRfv.js";import{F as _}from"./file-text-Cw9R3YmD.js";import{C as A}from"./calendar-B0K3Sh4h.js";import{U as W}from"./users-D0ehSGNW.js";import{B as X}from"./book-text-COUspR7K.js";import{G as Y}from"./gavel-Dv14ryxu.js";import{F as Z}from"./file-check-BmncIjd3.js";import{B as ee}from"./building-2-DrfmlGqv.js";import"./utils-teJhgnIT.js";import"./index-DSruFeE4.js";import"./index-DHobRqXF.js";import"./index-Af13HbHL.js";import"./index-C0UM9Ktk.js";import"./createLucideIcon-D0GsNjBQ.js";import"./index-9WxTs6Ao.js";import"./check-B9V8gUL1.js";import"./x-8mnsibS2.js";import"./index-CsOAe5Um.js";import"./avatar-CXMFIMSV.js";import"./eye-C9pzddpB.js";import"./tag-CAIPppT8.js";import"./qr-code-BRRxXOAJ.js";import"./database-DoAHOI2k.js";const re=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Reports",href:route("incident-reports.index")},{title:"Create",href:route("incident-reports.create")}];function Re({securityLevels:te,statItems:w,statCategories:I}){const{t}=P(),{data:o,setData:i,post:V,processing:v,errors:s}=$({report_date:new Date().toISOString().split("T")[0],security_level:"normal",details:"",report_status:"submitted",report_number:"",action_taken:"",recommendation:"",source:""}),[y,C]=S.useState({}),[c,z]=S.useState(null);function R(r){r.preventDefault();const d=Object.entries(y).filter(([l,{value:g}])=>g.trim()!=="").map(([l,{value:g,notes:U}])=>({stat_category_item_id:parseInt(l),value:g,notes:U||void 0}));d.length>0&&i("stats",d),V(route("incident-reports.store"))}const q=I.map(r=>({id:r.id,label:r.label,color:r.color})),E=c?w.filter(r=>r.category.id===c):w;function G(r,d){C(l=>({...l,[r]:{...l[r]||{notes:null},value:d}}))}function O(r,d){C(l=>({...l,[r]:{...l[r]||{value:""},notes:d||null}}))}return e.jsxs(K,{breadcrumbs:re,children:[e.jsx(H,{title:t("incident_reports.create.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-l from-green-600 via-emerald-600 to-teal-600 p-8 text-white shadow-2xl mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 -translate-x-32"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 bg-white/5 rounded-full translate-y-24 translate-x-24"}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-2xl border border-white/30",children:e.jsx(L,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white drop-shadow-lg",children:t("incident_reports.create.page_title")}),e.jsxs("p",{className:"text-white/90 flex items-center gap-2 mt-2 text-lg",children:[e.jsx(a,{className:"h-5 w-5"}),t("incident_reports.create.page_description")]})]})]}),e.jsx(h,{asChild:!0,className:"bg-white/20 backdrop-blur-sm border-white/30 text-white hover:bg-white/30 rounded-full shadow-lg",children:e.jsxs(k,{href:route("incident-reports.index"),children:[e.jsx(Q,{className:"ml-2 h-4 w-4"}),t("common.back")]})})]})]}),e.jsx("form",{onSubmit:R,children:e.jsxs("div",{className:"grid gap-8",children:[e.jsxs(x,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:[e.jsxs(p,{className:"bg-gradient-to-l from-green-500 to-green-600 text-white border-b pb-4",children:[e.jsxs(u,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(_,{className:"h-5 w-5"})}),t("incident_reports.form.info_title")]}),e.jsx(b,{className:"text-green-100",children:t("incident_reports.form.info_description")})]}),e.jsxs(f,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"report_number",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[t("incident_reports.form.report_number_label"),e.jsx(_,{className:"h-4 w-4"})]}),e.jsx(j,{id:"report_number",value:o.report_number,onChange:r=>i("report_number",r.target.value),placeholder:t("incident_reports.form.report_number_placeholder"),className:"h-12 border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right"}),s.report_number&&e.jsxs("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),s.report_number]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"report_date",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[e.jsx("span",{className:"text-red-500",children:"*"}),t("incident_reports.form.report_date"),e.jsx(A,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"report_date",type:"date",value:o.report_date,onChange:r=>i("report_date",r.target.value),required:!0,className:"h-12 border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right"}),e.jsx(A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-green-400 pointer-events-none"})]}),s.report_date&&e.jsxs("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),s.report_date]})]})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"security_level",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[t("incident_reports.form.security_level"),e.jsx(L,{className:"h-4 w-4"})]}),e.jsxs(F,{value:o.security_level,onValueChange:r=>i("security_level",r),children:[e.jsx(T,{id:"security_level",className:"h-12 border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right",children:e.jsx(D,{placeholder:t("incident_reports.form.security_level_placeholder")})}),e.jsxs(B,{children:[e.jsx(m,{value:"normal",children:t("incident_reports.level.normal")}),e.jsx(m,{value:"restricted",children:t("incident_reports.level.restricted")}),e.jsx(m,{value:"classified",children:t("incident_reports.level.classified")})]})]}),s.security_level&&e.jsxs("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),s.security_level]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"source",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[t("incident_reports.form.source_label"),e.jsx(W,{className:"h-4 w-4"})]}),e.jsx(j,{id:"source",value:o.source,onChange:r=>i("source",r.target.value),placeholder:t("incident_reports.form.source_placeholder"),className:"h-12 border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right"}),s.source&&e.jsxs("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),s.source]})]})]})]})]}),e.jsxs(x,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:[e.jsxs(p,{className:"bg-gradient-to-l from-green-500 to-green-600 text-white border-b pb-4",children:[e.jsxs(u,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(X,{className:"h-5 w-5"})}),t("incident_reports.details.title")]}),e.jsx(b,{className:"text-green-100",children:t("incident_reports.details.description")})]}),e.jsxs(f,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"details",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[e.jsx("span",{className:"text-red-500",children:"*"}),t("incident_reports.details.details_label"),e.jsx(_,{className:"h-4 w-4"})]}),e.jsx(N,{id:"details",rows:5,value:o.details,onChange:r=>i("details",r.target.value),placeholder:t("incident_reports.details.details_placeholder"),required:!0,className:"min-h-[120px] resize-none border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right"}),s.details&&e.jsxs("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),s.details]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"action_taken",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[t("incident_reports.details.action_taken_label"),e.jsx(Y,{className:"h-4 w-4"})]}),e.jsx(N,{id:"action_taken",rows:3,value:o.action_taken,onChange:r=>i("action_taken",r.target.value),placeholder:t("incident_reports.details.action_taken_placeholder"),className:"min-h-[80px] resize-none border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right"}),s.action_taken&&e.jsxs("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),s.action_taken]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"recommendation",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[t("incident_reports.details.recommendation_label"),e.jsx(Z,{className:"h-4 w-4"})]}),e.jsx(N,{id:"recommendation",rows:3,value:o.recommendation,onChange:r=>i("recommendation",r.target.value),placeholder:t("incident_reports.details.recommendation_placeholder"),className:"min-h-[80px] resize-none border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right"}),s.recommendation&&e.jsxs("p",{className:"text-sm text-red-500 font-medium bg-red-50 p-2 rounded-lg border border-red-200 flex items-center gap-2 text-right",children:[e.jsx(a,{className:"h-4 w-4"}),s.recommendation]})]}),e.jsx("input",{type:"hidden",name:"report_status",value:"submitted"})]})]}),e.jsxs(x,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:[e.jsxs(p,{className:"bg-gradient-to-l from-green-500 to-green-600 text-white border-b pb-4",children:[e.jsxs(u,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(a,{className:"h-5 w-5"})}),t("incident_reports.stats.title")]}),e.jsx(b,{className:"text-green-100",children:t("incident_reports.stats.description")})]}),e.jsxs(f,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(n,{htmlFor:"category-filter",className:"text-base font-medium flex items-center gap-2 text-green-700 text-right",dir:"rtl",children:[t("incident_reports.stats.filter_by_category"),e.jsx(ee,{className:"h-4 w-4"})]}),e.jsxs(F,{value:(c==null?void 0:c.toString())||"all",onValueChange:r=>z(r!=="all"?parseInt(r):null),children:[e.jsx(T,{id:"category-filter",className:"h-12 border-green-200 focus:border-green-500 focus:ring-green-500/20 bg-gradient-to-l from-green-50 to-white text-right",children:e.jsx(D,{placeholder:t("incidents.filters.all_categories")})}),e.jsxs(B,{children:[e.jsx(m,{value:"all",children:t("incidents.filters.all_categories")}),q.map(r=>e.jsx(m,{value:r.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:r.color}}),r.label]})},r.id))]})]})]}),e.jsx(M,{items:E,statsData:y,onValueChange:G,onNotesChange:O})]})]}),e.jsx(x,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-green-50/30",children:e.jsxs(J,{className:"flex justify-between border-t px-6 py-5 bg-gradient-to-l from-green-50 to-green-100",children:[e.jsx(h,{variant:"outline",asChild:!0,className:"rounded-full border-green-300 text-green-700 hover:bg-green-100 hover:border-green-400 shadow-lg",children:e.jsx(k,{href:route("incident-reports.index"),children:t("common.cancel")})}),e.jsx(h,{type:"submit",disabled:v,className:"rounded-full px-8 font-medium bg-gradient-to-l from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:t(v?"incident_reports.actions.submitting":"incident_reports.actions.create")})]})})]})})]})]})}export{Re as default};

import{r as j,m as D,j as e,L as H}from"./app-NWlhzIiI.js";import{B as P}from"./button-Box1-qgD.js";import{C as _,a as N,b as v,c as w,d as y}from"./card-DvyK6hRT.js";import{I as x}from"./input-DwzvWPem.js";import{L as o}from"./label-BN1ItyM7.js";import{T as p}from"./textarea-6687mORR.js";import{S as q,a as E,b as G,c as V,d as h}from"./select-CN__VSdP.js";import{P as I}from"./PersianDatePicker-BhwENYHm.js";import{A as J}from"./app-layout-By-MARzy.js";import{u as K}from"./translate-CQfM3vbo.js";import{H as M}from"./header-C6-eMOlP.js";import{F as O}from"./FooterButtons-BvWK5qtz.js";import{S as C}from"./shield-DUD3wVHp.js";import{F as u}from"./file-text-CyHLALFq.js";import{T as c}from"./triangle-alert-WGDBdikk.js";import{U as m}from"./users-DJjY4K-g.js";import{G as Q}from"./gavel-Wabke-oq.js";import{F as W}from"./file-check-C-IhSs1N.js";import{S}from"./search-DsoCqGUD.js";import{U as T}from"./user-CIT0RyMm.js";import{A as X}from"./arrow-right-DAzLS9eQ.js";import{T as Y}from"./trash-D3hOutvw.js";import"./utils-CjIpxwge.js";import"./index-COnRykQT.js";import"./index--ZO2L52o.js";import"./index-DmWWB6Fq.js";import"./index-LNM0viqu.js";import"./createLucideIcon-aOMmq26Q.js";import"./tslib.es6-CmEaCU22.js";import"./index-BxdvcV1_.js";import"./check-BL0RFP_t.js";import"./index-DJdvG5Wj.js";import"./calendar-bCvzJPwI.js";import"./chevron-left-CVBzoS_T.js";import"./x-DPZesNn8.js";import"./index-DrYACo-5.js";import"./avatar-CQF4zAG1.js";import"./tag-BRdLRwg_.js";import"./qr-code-gl_KlejU.js";import"./map-pin-gWVy6gHw.js";import"./database-BLSwhGHk.js";import"./permission-guard-BE4HVUt5.js";import"./arrow-left-BW7btOfZ.js";import"./plus-Coi6u1xM.js";import"./save-BTXg4_Ul.js";const Z=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Reports",href:route("incident-reports.index")},{title:"Create",href:route("incident-reports.create")}];function Ke({securityLevels:$,users:f}){const{t}=K(),[a,b]=j.useState([]),[l,F]=j.useState(""),{data:n,setData:s,post:U,processing:L,errors:i}=D({report_date:"",security_level:"normal",details:"",report_status:"submitted",report_number:"",action_taken:"",recommendation:"",source:"",access_users:[]});function B(){window.location.href=route("incident-reports.index")}function A(){U(route("incident-reports.store"))}const R=r=>{if(!a.includes(r)){const d=[...a,r];b(d),s("access_users",d)}},z=r=>{const d=a.filter(g=>g!==r);b(d),s("access_users",d)},k=f.filter(r=>r.name.toLowerCase().includes(l.toLowerCase())||r.email.toLowerCase().includes(l.toLowerCase()));return e.jsxs(J,{breadcrumbs:Z,children:[e.jsx(H,{title:t("incident_reports.create.page_title")}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(M,{title:t("incident_reports.create.page_title"),description:t("incident_reports.create.page_description"),icon:e.jsx(C,{className:"h-5 w-5"}),model:"incident_reports",routeName:()=>route("incident-reports.index"),buttonText:t("common.back"),theme:"indigo",showBackButton:!0,backRouteName:()=>route("incident-reports.index"),backButtonText:t("common.back"),showButton:!1}),e.jsx("form",{children:e.jsxs("div",{className:"grid gap-8",children:[e.jsxs(_,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(N,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(v,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(u,{className:"h-5 w-5"})}),t("incident_reports.form.info_title")]}),e.jsx(w,{className:"text-indigo-100",children:t("incident_reports.form.info_description")})]}),e.jsxs(y,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{htmlFor:"report_number",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.report_number_label"),e.jsx(u,{className:"h-4 w-4"})]}),e.jsx(x,{id:"report_number",value:n.report_number,onChange:r=>s("report_number",r.target.value),placeholder:t("incident_reports.form.report_number_placeholder"),className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.report_number&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(c,{className:"h-4 w-4"}),i.report_number]})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(I,{id:"report_date",label:t("incident_reports.form.report_date"),value:n.report_date,onChange:r=>s("report_date",r),placeholder:t("incident_reports.form.report_date_placeholder"),required:!0,error:i.report_date,className:"w-full"})})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{htmlFor:"security_level",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.security_level"),e.jsx(C,{className:"h-4 w-4"})]}),e.jsxs(q,{value:n.security_level,onValueChange:r=>s("security_level",r),children:[e.jsx(E,{id:"security_level",className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right",children:e.jsx(G,{placeholder:t("incident_reports.form.security_level_placeholder")})}),e.jsxs(V,{children:[e.jsx(h,{value:"normal",children:t("incident_reports.level.normal")}),e.jsx(h,{value:"restricted",children:t("incident_reports.level.restricted")}),e.jsx(h,{value:"classified",children:t("incident_reports.level.classified")})]})]}),i.security_level&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(c,{className:"h-4 w-4"}),i.security_level]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{htmlFor:"source",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.form.source_label"),e.jsx(m,{className:"h-4 w-4"})]}),e.jsx(x,{id:"source",value:n.source,onChange:r=>s("source",r.target.value),placeholder:t("incident_reports.form.source_placeholder"),className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.source&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(c,{className:"h-4 w-4"}),i.source]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{htmlFor:"details",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[e.jsx("span",{className:"text-red-500",children:"*"}),t("incident_reports.details.details_label"),e.jsx(u,{className:"h-4 w-4"})]}),e.jsx(p,{id:"details",rows:5,value:n.details,onChange:r=>s("details",r.target.value),placeholder:t("incident_reports.details.details_placeholder"),required:!0,className:"min-h-[120px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.details&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(c,{className:"h-4 w-4"}),i.details]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{htmlFor:"action_taken",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.details.action_taken_label"),e.jsx(Q,{className:"h-4 w-4"})]}),e.jsx(p,{id:"action_taken",rows:3,value:n.action_taken,onChange:r=>s("action_taken",r.target.value),placeholder:t("incident_reports.details.action_taken_placeholder"),className:"min-h-[80px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.action_taken&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(c,{className:"h-4 w-4"}),i.action_taken]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{htmlFor:"recommendation",className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[t("incident_reports.details.recommendation_label"),e.jsx(W,{className:"h-4 w-4"})]}),e.jsx(p,{id:"recommendation",rows:3,value:n.recommendation,onChange:r=>s("recommendation",r.target.value),placeholder:t("incident_reports.details.recommendation_placeholder"),className:"min-h-[80px] resize-none border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),i.recommendation&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 p-2 rounded-lg border border-red-200 dark:border-red-800 flex items-center gap-2 text-right",children:[e.jsx(c,{className:"h-4 w-4"}),i.recommendation]})]}),e.jsx("input",{type:"hidden",name:"report_status",value:"submitted"})]})]}),e.jsxs(_,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white dark:from-gray-800 to-indigo-50/30 dark:to-indigo-900/20",children:[e.jsxs(N,{className:"bg-gradient-to-l from-indigo-500 dark:from-indigo-600 to-indigo-600 dark:to-indigo-700 text-white border-b pb-4",children:[e.jsxs(v,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(m,{className:"h-5 w-5"})}),t("incident_reports.form.access_title")]}),e.jsx(w,{className:"text-indigo-100",children:t("incident_reports.form.access_description")})]}),e.jsxs(y,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[e.jsx(S,{className:"h-4 w-4"}),t("incident_reports.form.search_users")]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{value:l,onChange:r=>F(r.target.value),placeholder:t("incident_reports.form.search_users_placeholder"),className:"h-12 border-indigo-200 dark:border-indigo-700 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500/20 dark:focus:ring-indigo-400/20 bg-gradient-to-l from-indigo-50 dark:from-indigo-900/30 to-white dark:to-gray-800 text-right"}),e.jsx(S,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-indigo-400 pointer-events-none"})]})]}),l&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:t("incident_reports.form.select_users")}),e.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 border border-indigo-200 dark:border-indigo-700 rounded-xl p-4 bg-white dark:bg-gray-800",children:[k.filter(r=>!a.includes(r.id)).map(r=>e.jsxs("div",{onClick:()=>R(r.id),className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-indigo-200 dark:border-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-100 to-indigo-200 dark:from-indigo-800 dark:to-indigo-900 rounded-lg",children:e.jsx(T,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-300"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-indigo-900 dark:text-indigo-100",children:r.name}),e.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:r.email})]})]}),e.jsx(X,{className:"h-4 w-4 text-indigo-500"})]},r.id)),k.filter(r=>!a.includes(r.id)).length===0&&e.jsx("p",{className:"text-center text-indigo-600 dark:text-indigo-400 py-4",children:t("incident_reports.form.no_users_found")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{className:"text-base font-medium flex items-center gap-2 text-indigo-700 dark:text-indigo-400 text-right",dir:"rtl",children:[e.jsx(m,{className:"h-4 w-4"}),t("incident_reports.form.selected_users")]}),a.length>0?e.jsx("div",{className:"space-y-2",children:a.map(r=>{const d=f.find(g=>g.id===r);return d?e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-indigo-200 dark:border-indigo-700 bg-gradient-to-r from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-200 to-indigo-300 dark:from-indigo-700 dark:to-indigo-800 rounded-lg",children:e.jsx(T,{className:"h-4 w-4 text-indigo-700 dark:text-indigo-200"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-indigo-900 dark:text-indigo-100",children:d.name}),e.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:d.email})]})]}),e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>z(r),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 border-red-200 dark:border-red-700",children:e.jsx(Y,{className:"h-3 w-3"})})]},r):null})}):e.jsxs("div",{className:"text-center py-8 text-indigo-600 dark:text-indigo-400",children:[e.jsx(m,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:t("incident_reports.form.no_users_selected")})]})]})]})]}),e.jsx(O,{onCancel:B,onSubmit:A,processing:L,cancelText:t("common.cancel"),submitText:t("incident_reports.actions.create"),savingText:t("incident_reports.actions.submitting")})]})})]})]})}export{Ke as default};

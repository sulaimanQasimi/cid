import{u as C,r as o,j as e,L as N,$ as w,a as k}from"./app-YfAqnR7f.js";import{A as v}from"./app-layout-COLkdL-_.js";import{B as S}from"./button-CbisaLmO.js";import{C as L,a as A,b as B,c as $,d as E,e as H}from"./card-184hTnvA.js";import{T as I,a as F,b as f,c as d,d as K,e as p}from"./table-BrY5RXTB.js";import{I as R}from"./input-D9iYlYH4.js";import{u as V}from"./translate-BsBDFk7S.js";import{L as _}from"./loader-circle-Cjd_IsB-.js";import"./utils-VXzwhqC1.js";import"./index-DK972n6K.js";import"./createLucideIcon-BKvLtUqt.js";import"./index-BC0tnl-N.js";import"./index-D9Wsk12K.js";import"./index-C2Xbs3d_.js";import"./x-CUCKIsNl.js";import"./index-CuGmnaN-.js";import"./avatar-Du_tf7pZ.js";import"./file-text-C1GLrAVP.js";import"./users-Dcm7r78U.js";import"./tag-Cw_E9OYd.js";import"./triangle-alert-Dle-CcDC.js";import"./qr-code-BkqhmOCJ.js";import"./chart-column-caK4rhCu.js";import"./map-pin-Ci-gwDht.js";import"./building-Ce6TO76f.js";import"./database-Dvh0JOEn.js";function pe({translations:i=[]}){const{t:r}=V(),{reloadTranslations:g}=C(),[x,c]=o.useState([]),[u,h]=o.useState(new Set),j=o.useMemo(()=>Array.isArray(i)?i:typeof i=="object"&&i!==null?Object.entries(i).map(([s,a])=>({key:s,value:typeof a=="string"?a:String(a)})):[],[i]);o.useEffect(()=>{c(j)},[j]);const y=async(s,a,n="fa")=>{h(t=>new Set(t).add(s));try{(await k.put(`/api/languages/translations/${s}`,{value:a,language:n})).data.success&&(c(l=>l.map(m=>m.key===s?{...m,value:a}:m)),await g())}catch(t){console.error("Failed to update translation:",t)}finally{h(t=>{const l=new Set(t);return l.delete(s),l})}},b=(s,a)=>{c(n=>n.map(t=>t.key===s?{...t,value:a}:t))},T=(s,a)=>{y(s,a)};return e.jsxs(v,{children:[e.jsx(N,{title:r("translations.translations")}),e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:r("translations.translations")})}),e.jsxs(L,{children:[e.jsxs(A,{children:[e.jsx(B,{children:r("translations.translations")}),e.jsx($,{children:r("translations.description")})]}),e.jsx(E,{children:e.jsxs(I,{children:[e.jsx(F,{children:e.jsxs(f,{children:[e.jsx(d,{children:r("translations.key")}),e.jsx(d,{children:r("translations.value")}),e.jsx(d,{className:"text-right",children:r("common.actions")})]})}),e.jsx(K,{children:x.map((s,a)=>e.jsxs(f,{children:[e.jsx(p,{className:"font-medium max-w-[250px]",title:s.key,children:e.jsx("span",{className:"truncate block",children:s.key})}),e.jsx(p,{className:"max-w-[300px]",title:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{value:s.value??"",onChange:n=>b(s.key,n.target.value),onBlur:n=>T(s.key,n.target.value),disabled:u.has(s.key),className:"flex-1"}),u.has(s.key)&&e.jsx(_,{className:"h-4 w-4 animate-spin"})]})}),e.jsx(p,{className:"text-right"})]},`${s.key}-${a}`))})]})}),e.jsxs(H,{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:r("translations.total_translations",{count:String(x.length)})}),e.jsx(S,{variant:"outline",asChild:!0,children:e.jsx(w,{href:route("languages.index"),children:r("languages.manage_languages")})})]})]})]})]})}export{pe as default};

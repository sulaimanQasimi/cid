import{r as l,S as N,j as e,L as U,$ as v}from"./app-GSRKIW_T.js";import{B as j}from"./button-Bhpc0mxF.js";import{B as s}from"./badge-DdpioI1Z.js";import{C as k,a as w,b as _,d as A}from"./card-CDAlzg9H.js";import{P as z}from"./pagination-CxNLGDOC.js";import{A as H}from"./app-layout-emDz1iZm.js";import{I as O}from"./input-BGshir76.js";import{S as h,a as m,b as p,c as u,d as t}from"./select-D2FbI8UT.js";import{L as n}from"./label-Dq0R7r09.js";import{u as $}from"./use-debounce-B_oe6kC0.js";import{u as G}from"./translate-DpzX0cI9.js";import{H as M}from"./header-DRfXp_LH.js";import{A as q,h as J,a as K,b as Q,c as W,d as X,e as Y,f as Z,g as ee}from"./alert-dialog-BepLiZCJ.js";import{S}from"./triangle-alert-C0gSSmBZ.js";import{c as re}from"./createLucideIcon-ByoieD3J.js";import{A as ae}from"./arrow-up-down-R1g1gP_9.js";import{U as te}from"./users-CS0ZKnBY.js";import{f as se}from"./index-CaunA62S.js";import{C as le}from"./calendar-DQQS-Q5F.js";import{E as ie}from"./eye-DQMM9808.js";import{S as de}from"./square-pen-CvgKmyQY.js";import{T as ne}from"./trash-2-DUiIS-Fc.js";import"./utils-BxWwq5MK.js";import"./index-BLmRVGNR.js";import"./index-DWc4EHPD.js";import"./index-DfrI1gSZ.js";import"./index-NS5dWUhR.js";import"./x-BU9D2CU7.js";import"./index-CICnqlfQ.js";import"./avatar-CImu7SZ-.js";import"./file-text-CE615OX-.js";import"./tag-Cv3AiiQv.js";import"./qr-code-BC18dc0P.js";import"./chart-column-BtfunLoJ.js";import"./map-pin-DNSrnVYj.js";import"./database-BIGb81Fl.js";import"./index-BzJtsLa4.js";import"./check-C_h62Xjz.js";import"./permission-guard-j_I3l0Ma.js";import"./arrow-left-C_Tb0prb.js";import"./plus-B3eoYTDk.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],oe=re("Filter",ce),xe=[{title:"Dashboard",href:"/dashboard"},{title:"Incident Report Access",href:route("incident-report-access.index")}];function Ze({accessRecords:i,incidentReports:C,filters:d={}}){const{t:a}=G(),[b,T]=l.useState(d.search||""),[c,D]=l.useState(d.status||"all"),[o,R]=l.useState(d.access_type||"all"),[x,I]=l.useState(d.report_type||"all"),[g,B]=l.useState(d.incident_report_id||"all"),[y,F]=l.useState(!1),f=$(b,500);l.useEffect(()=>{const r={search:f,status:c==="all"?"":c,access_type:o==="all"?"":o,report_type:x==="all"?"":x,incident_report_id:g==="all"?"":g};N.get(route("incident-report-access.index"),r,{preserveState:!0,replace:!0})},[f,c,o,x,g]);function E(r){switch(r){case"full":return e.jsx(s,{className:"bg-green-100 text-green-800 border-green-300",children:a("full_access")});case"read_only":return e.jsx(s,{className:"bg-blue-100 text-blue-800 border-blue-300",children:a("read_only")});case"incidents_only":return e.jsx(s,{className:"bg-orange-100 text-orange-800 border-orange-300",children:a("incidents_only")});default:return e.jsx(s,{variant:"outline",children:a("unknown")})}}function L(r){return r.is_active?r.expires_at&&new Date(r.expires_at)<new Date?e.jsx(s,{className:"bg-red-100 text-red-800 border-red-300",children:a("expired")}):e.jsx(s,{className:"bg-green-100 text-green-800 border-green-300",children:a("active")}):e.jsx(s,{className:"bg-gray-100 text-gray-800 border-gray-300",children:a("inactive")})}function P(r){return r.incident_report?e.jsx(s,{className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 border-purple-300",children:r.incident_report.report_number}):e.jsx(s,{className:"bg-blue-100 text-blue-800 border-blue-300",children:a("global")})}function V(r){N.delete(route("incident-report-access.destroy",r))}return e.jsxs(H,{breadcrumbs:xe,children:[e.jsx(U,{title:"Incident Report Access Management"}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsx(M,{title:a("incident_report_access"),description:a("manage_user_access_to_incident_reports"),icon:e.jsx(S,{className:"h-6 w-6 text-white"}),model:"incident_report_access",routeName:()=>route("incident-report-access.create"),buttonText:a("grant_access"),theme:"purple",buttonSize:"lg",showBackButton:!1,showButton:!0}),e.jsxs(k,{className:"shadow-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700  overflow-hidden mb-8",children:[e.jsx(w,{className:"py-4 bg-gradient-to-l from-purple-500 to-purple-600 text-white cursor-pointer",onClick:()=>F(!y),children:e.jsxs(_,{className:"text-lg font-semibold flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm shadow-lg",children:e.jsx(oe,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold",children:a("filters")}),e.jsx("div",{className:"text-purple-100 text-xs font-medium",children:a("filter_access_records")})]})]}),e.jsx("div",{className:`transition-transform duration-300 ${y?"rotate-180":""}`,children:e.jsx(ae,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:`transition-all duration-300 overflow-hidden ${y?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"search",className:"text-gray-800 dark:text-gray-200 font-medium",children:"Search Users"}),e.jsx(O,{id:"search",placeholder:"Search by name or email...",value:b,onChange:r=>T(r.target.value),className:"mt-2 border-gray-200 dark:border-gray-700 focus:border-purple-500 focus:ring-purple-500/20 bg-white dark:bg-gray-800"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"status",className:"text-gray-800 dark:text-gray-200 font-medium",children:"Status"}),e.jsxs(h,{value:c,onValueChange:D,children:[e.jsx(m,{className:"mt-2 border-gray-200 dark:border-gray-700 focus:border-purple-500 focus:ring-purple-500/20 bg-white dark:bg-gray-800",children:e.jsx(p,{placeholder:"All Statuses"})}),e.jsxs(u,{children:[e.jsx(t,{value:"all",children:"All Statuses"}),e.jsx(t,{value:"active",children:"Active"}),e.jsx(t,{value:"expired",children:"Expired"}),e.jsx(t,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"access_type",className:"text-gray-800 dark:text-gray-200 font-medium",children:"Access Type"}),e.jsxs(h,{value:o,onValueChange:R,children:[e.jsx(m,{className:"mt-2 border-gray-200 dark:border-gray-700 focus:border-purple-500 focus:ring-purple-500/20 bg-white dark:bg-gray-800",children:e.jsx(p,{placeholder:"All Types"})}),e.jsxs(u,{children:[e.jsx(t,{value:"all",children:"All Types"}),e.jsx(t,{value:"full",children:"Full Access"}),e.jsx(t,{value:"read_only",children:"Read Only"}),e.jsx(t,{value:"incidents_only",children:"Incidents Only"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"report_type",className:"text-gray-800 dark:text-gray-200 font-medium",children:"Report Type"}),e.jsxs(h,{value:x,onValueChange:I,children:[e.jsx(m,{className:"mt-2 border-gray-200 dark:border-gray-700 focus:border-purple-500 focus:ring-purple-500/20 bg-white dark:bg-gray-800",children:e.jsx(p,{placeholder:"All Types"})}),e.jsxs(u,{children:[e.jsx(t,{value:"all",children:"All Types"}),e.jsx(t,{value:"global",children:"Global Access"}),e.jsx(t,{value:"specific",children:"Report Specific"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"incident_report_id",className:"text-gray-800 dark:text-gray-200 font-medium",children:"Specific Report"}),e.jsxs(h,{value:g,onValueChange:B,children:[e.jsx(m,{className:"mt-2 border-gray-200 dark:border-gray-700 focus:border-purple-500 focus:ring-purple-500/20 bg-white dark:bg-gray-800",children:e.jsx(p,{placeholder:"All Reports"})}),e.jsxs(u,{children:[e.jsx(t,{value:"all",children:"All Reports"}),C.map(r=>e.jsx(t,{value:r.id.toString(),children:r.report_number},r.id))]})]})]})]})})})]}),e.jsxs(k,{className:"shadow-2xl overflow-hidden bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 ",children:[e.jsx(w,{className:"bg-gradient-to-l from-purple-500 to-purple-600 text-white py-6",children:e.jsxs(_,{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm shadow-lg",children:e.jsx(te,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Access Records"}),e.jsx("div",{className:"text-purple-100 text-sm font-medium",children:"Manage user access to incident reports"})]})]})}),e.jsx(A,{className:"p-0",children:e.jsx("div",{className:"overflow-hidden rounded-b-3xl",children:e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700 border-0",children:[e.jsx("th",{className:"h-12 px-6 text-left align-middle font-bold text-gray-800 dark:text-gray-200 text-lg",children:"User"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-bold text-gray-800 dark:text-gray-200 text-lg",children:"Access Type"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-bold text-gray-800 dark:text-gray-200 text-lg",children:"Report"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-bold text-gray-800 dark:text-gray-200 text-lg",children:"Status"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-bold text-gray-800 dark:text-gray-200 text-lg",children:"Granted By"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-bold text-gray-800 dark:text-gray-200 text-lg",children:"Expires"}),e.jsx("th",{className:"h-12 px-6 text-left align-middle font-bold text-gray-800 dark:text-gray-200 text-lg",children:"Actions"})]})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:i.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"h-32 text-center align-middle",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-full",children:e.jsx(S,{className:"h-16 w-16 text-gray-400"})}),e.jsx("p",{className:"text-xl font-bold",children:"No access records found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No users have been granted incident report access yet"})]})})}):i.data.map(r=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 transition-colors hover:bg-gray-50 dark:hover:bg-gray-700 data-[state=selected]:bg-muted",children:[e.jsx("td",{className:"p-6 align-middle",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.user.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.user.email})]})}),e.jsx("td",{className:"p-6 align-middle",children:E(r.access_type)}),e.jsx("td",{className:"p-6 align-middle",children:P(r)}),e.jsx("td",{className:"p-6 align-middle",children:L(r)}),e.jsx("td",{className:"p-6 align-middle text-gray-800 dark:text-gray-200 font-medium",children:r.granted_by.name}),e.jsx("td",{className:"p-6 align-middle text-gray-800 dark:text-gray-200",children:r.expires_at?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),se(new Date(r.expires_at),"PPP")]}):e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"No expiration"})}),e.jsx("td",{className:"p-6 align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",asChild:!0,title:"View Details",className:"h-10 w-10 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:text-gray-200 transition-all duration-300 hover:scale-110",children:e.jsx(v,{href:route("incident-report-access.show",r.id),children:e.jsx(ie,{className:"h-5 w-5"})})}),e.jsx(j,{variant:"ghost",size:"icon",asChild:!0,title:"Edit Access",className:"h-10 w-10 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:text-gray-200 transition-all duration-300 hover:scale-110",children:e.jsx(v,{href:route("incident-report-access.edit",r.id),children:e.jsx(de,{className:"h-5 w-5"})})}),e.jsxs(q,{children:[e.jsx(J,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",title:"Revoke Access",className:"h-10 w-10 rounded-xl hover:bg-red-100 text-red-600 hover:text-red-700 transition-all duration-300 hover:scale-110",children:e.jsx(ne,{className:"h-5 w-5"})})}),e.jsxs(K,{children:[e.jsxs(Q,{children:[e.jsx(W,{children:"Revoke Access"}),e.jsxs(X,{children:["Are you sure you want to revoke incident report access for ",r.user.name,"? This action cannot be undone."]})]}),e.jsxs(Y,{children:[e.jsx(Z,{children:"Cancel"}),e.jsx(ee,{onClick:()=>V(r.id),className:"bg-red-600 hover:bg-red-700",children:"Revoke Access"})]})]})]})]})})]},r.id))})]})})})]}),i.links&&i.links.length>0&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4  shadow-2xl border border-gray-200 dark:border-gray-700",children:e.jsx(z,{links:i.links})})})]})]})}export{Ze as default};

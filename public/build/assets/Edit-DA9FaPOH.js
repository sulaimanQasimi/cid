import{r as d,m as D,j as e,L as B,$ as P}from"./app-BfDRc1f-.js";import{B as m}from"./button-BCCHitQI.js";import{C as g,d as j,a as R,b as $,c as z,e as H}from"./card-DCeUu7Vn.js";import{I as b}from"./input-BQ4AI6Gt.js";import{L as l}from"./label-DKs_JBP_.js";import{S as v,a as N,b as _,c as y,d as w}from"./select-BV9eMMY2.js";import{T as G,a as J,b as C,c as S}from"./tabs-Buu7QZGP.js";import{T}from"./textarea-9enOyqUT.js";import{A as K}from"./app-layout-Bw3eKY7A.js";import{L as O}from"./LocationSelector-DeFqTs7E.js";import{f as Q}from"./permission-guard-1DbDjkr9.js";import{u as U}from"./use-permissions-DeX7hxz9.js";import{u as W}from"./translate-j9XkJZ7q.js";import{S as X}from"./shield-CwQ4TdAp.js";import{T as L}from"./triangle-alert-D-2M0gh_.js";import{A as Y}from"./arrow-left-DOq08Pul.js";import{F as Z}from"./file-text-5QHGN9HB.js";import{M as ee}from"./map-pin-BKkrlfBG.js";import{S as te}from"./save-BJXVtIm5.js";import"./utils-DtaP0F8H.js";import"./index-DNDvwoPo.js";import"./index-mTXxgOzk.js";import"./index-DhV7aT9W.js";import"./index-D4Y5Xbos.js";import"./createLucideIcon-B7qMPpIQ.js";import"./tslib.es6-CmEaCU22.js";import"./index-BqquqZDX.js";import"./check-DeotEHnd.js";import"./x-CP5uc_k7.js";import"./index-BKXKFttF.js";import"./avatar-DS3s3CaB.js";import"./users-CPAzNt6x.js";import"./tag-BMYEE8Fo.js";import"./qr-code-BwnkwkEx.js";import"./database-CjGk9FYL.js";import"./afghanistanLow-mnRKi4Rp.js";import"./AnimatedTheme-Cau1-Aan.js";import"./Theme-Dgo0XspA.js";import"./Root-KLg9UpOR.js";import"./SerialChart-CAnqEg8j.js";import"./MapPolygonSeries-BzVZlCSa.js";import"./GraticuleSeries-xd2mOaE9.js";import"./LinearGradient-B6IotMss.js";import"./MapPointSeries-CZOXYQmX.js";import"./Circle-DJKlttmY.js";import"./ZoomControl-D3aVP6vn.js";import"./ZoomTools-CCR8UINi.js";import"./Button-Dxks9qV6.js";function We({info:i,infoTypes:x=[],infoCategories:h=[]}){const{t}=W();U();const F=[{title:t("info_types.page_title"),href:route("info-types.index")},{title:t("info.edit.breadcrumb"),href:"#"}],[n,k]=d.useState("basic"),[p,u]=d.useState(!1),f=()=>i.value&&typeof i.value=="object"&&i.value.location?i.value.location:null,[A,I]=d.useState(f()),{data:r,setData:o,put:M,processing:c,errors:a}=D({name:i.name||"",code:i.code||"",description:i.description||"",info_type_id:i.info_type_id?i.info_type_id.toString():"",info_category_id:i.info_category_id?i.info_category_id.toString():"",value:{content:i.value&&typeof i.value=="object"&&i.value.content?i.value.content:"",location:f()},confirmed:i.confirmed||!1}),V=s=>{k(s),s==="location"&&u(!0)},q=s=>{I(s),o("value",{...r.value,location:s})},E=s=>{s.preventDefault(),M(route("infos.update",i.id),{onSuccess:()=>{}})};return d.useEffect(()=>{(n==="location"||i.value&&typeof i.value=="object"&&i.value.location)&&u(!0)},[n,i.value]),e.jsxs(K,{breadcrumbs:F,children:[e.jsx(B,{title:t("info.edit.page_title",{name:i.name||"Info Record"})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"relative mb-8 overflow-hidden rounded-2xl bg-gradient-to-l from-blue-600 via-indigo-600 to-purple-600 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 left-0 h-64 w-64 -translate-x-32 -translate-y-32 rounded-full bg-white/10"}),e.jsx("div",{className:"absolute right-0 bottom-0 h-48 w-48 translate-x-24 translate-y-24 rounded-full bg-white/5"}),e.jsxs("div",{className:"relative z-10 flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"rounded-2xl border border-white/30 bg-white/20 p-4 backdrop-blur-sm",children:e.jsx(X,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white drop-shadow-lg lg:text-4xl",children:t("info.edit.title")}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-lg text-white/90",children:[e.jsx(L,{className:"h-5 w-5"}),t("info.edit.description")]})]})]}),e.jsx(m,{variant:"outline",asChild:!0,className:"rounded-full border-white/30 bg-white/20 text-white shadow-lg backdrop-blur-sm hover:bg-white/30",children:e.jsx(P,{href:route("info-types.index"),children:e.jsx(Y,{className:"h-4 w-4"})})})]})]}),i.confirmed&&e.jsx("div",{className:"mb-6",children:e.jsx(g,{className:"border-orange-200 bg-gradient-to-l from-orange-50 to-yellow-50",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-orange-100 p-2",children:e.jsx(L,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:t("info.edit.confirmed_warning.title")}),e.jsx("p",{className:"text-orange-700",children:t("info.edit.confirmed_warning.description")})]})]})})})}),e.jsx("form",{onSubmit:E,children:e.jsxs(g,{className:"overflow-hidden border-none bg-gradient-to-bl from-white to-blue-50/30 shadow-xl",children:[e.jsxs(R,{className:"border-b bg-gradient-to-l from-blue-500 to-blue-600 pb-4 text-white",children:[e.jsxs($,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"rounded-lg bg-white/20 p-2",children:e.jsx(Z,{className:"h-5 w-5"})}),t("info.edit.form.title")]}),e.jsx(z,{className:"text-blue-100",children:t("info.edit.form.description")})]}),e.jsxs(j,{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"info_type_id",children:[t("info.edit.fields.type")," ",e.jsx("span",{className:"text-red-500",children:t("common.required_field")})]}),e.jsxs(v,{value:r.info_type_id,onValueChange:s=>o("info_type_id",s),required:!0,children:[e.jsx(N,{id:"info_type_id",children:e.jsx(_,{placeholder:t("info.edit.placeholders.select_type")})}),e.jsx(y,{children:x.length>0?x.map(s=>e.jsx(w,{value:s.id.toString(),children:s.name},s.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:t("info.edit.no_types_available")})})]}),a.info_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.info_type_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"info_category_id",children:[t("info.edit.fields.category")," ",e.jsx("span",{className:"text-red-500",children:t("common.required_field")})]}),e.jsxs(v,{value:r.info_category_id,onValueChange:s=>o("info_category_id",s),required:!0,children:[e.jsx(N,{id:"info_category_id",children:e.jsx(_,{placeholder:t("info.edit.placeholders.select_category")})}),e.jsx(y,{children:h.length>0?h.map(s=>e.jsx(w,{value:s.id.toString(),children:s.name},s.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:t("info.edit.no_categories_available")})})]}),a.info_category_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.info_category_id})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:t("info.edit.fields.name")}),e.jsx(b,{id:"name",value:r.name,onChange:s=>o("name",s.target.value)}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"code",children:t("info.edit.fields.code")}),e.jsx(b,{id:"code",value:r.code,onChange:s=>o("code",s.target.value),placeholder:t("info.edit.placeholders.code")}),a.code&&e.jsx("p",{className:"text-sm text-red-500",children:a.code}),e.jsx("p",{className:"text-sm text-gray-500",children:t("info.edit.code_helper")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:t("info.edit.fields.description")}),e.jsx(T,{id:"description",value:r.description,onChange:s=>o("description",s.target.value),rows:3}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:t("info.edit.fields.content")}),e.jsxs(G,{defaultValue:"basic",value:n,onValueChange:V,children:[e.jsxs(J,{className:"grid w-full grid-cols-2",children:[e.jsx(C,{value:"basic",children:t("info.edit.content_tabs.basic")}),e.jsxs(C,{value:"location",className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-4 w-4"}),t("info.edit.content_tabs.location")]})]}),e.jsx(S,{value:"basic",className:"pt-4",children:e.jsx(T,{id:"content",value:r.value.content,onChange:s=>o("value",{...r.value,content:s.target.value}),rows:5,placeholder:t("info.edit.placeholders.content")})}),e.jsx(S,{value:"location",className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:t("info.edit.location_description")}),p&&e.jsx(O,{value:A,onChange:q}),!p&&e.jsx("div",{className:"flex h-[400px] items-center justify-center rounded-md bg-gray-100",children:t("info.edit.loading_map")})]})})]}),a.value&&e.jsx("p",{className:"text-sm text-red-500",children:a.value})]}),e.jsx(Q,{model:"info",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"confirmed",checked:r.confirmed,onChange:s=>o("confirmed",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx(l,{htmlFor:"confirmed",children:t("info.edit.fields.confirmed")})]}),a.confirmed&&e.jsx("p",{className:"text-sm text-red-500",children:a.confirmed})]})})]}),e.jsxs(H,{className:"flex justify-between border-t bg-gradient-to-l from-blue-50 to-blue-100 px-6 py-5",children:[e.jsx(m,{variant:"outline",onClick:()=>window.history.back(),type:"button",disabled:c,className:"rounded-full border-blue-300 text-blue-700 shadow-lg hover:border-blue-400 hover:bg-blue-100",children:t("common.cancel")}),e.jsxs(m,{type:"submit",disabled:c,className:"rounded-full bg-gradient-to-l from-blue-500 to-blue-600 px-8 font-medium text-white shadow-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-700 hover:shadow-xl",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),t(c?"info.edit.saving":"info.edit.save_changes")]})]})]})})]})]})}export{We as default};

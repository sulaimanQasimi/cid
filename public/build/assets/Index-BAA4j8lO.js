import{r as N,j as e,L as B,S as v}from"./app-OQZATGjm.js";import{u as R}from"./translate-dWqCPhKR.js";import{C as r,a,b as t,d as l,c as n}from"./card-BROOWpe6.js";import{S as b,a as y,b as w,c as _,d as T}from"./select-D2p78GN0.js";import{B as U}from"./badge-DOCDMIXu.js";import{T as q,a as A,b as m,c as o}from"./tabs-DvvGtoO1.js";import{E}from"./eye-C9pzddpB.js";import{U as I}from"./users-D0ehSGNW.js";import{A as L,M as C,T as O,S as F}from"./tablet-CrVtPC3i.js";import{C as G}from"./clock-BCwrrNY0.js";import{M as H}from"./index-C0UM9Ktk.js";import"./utils-teJhgnIT.js";import"./index-DHobRqXF.js";import"./index-Af13HbHL.js";import"./index-DSruFeE4.js";import"./index-9WxTs6Ao.js";import"./check-B9V8gUL1.js";import"./createLucideIcon-D0GsNjBQ.js";function de({overallStats:c,modelStats:M,detailedAnalytics:d,filters:h}){R();const[u,V]=N.useState(h.period),[p,$]=N.useState(h.modelType),S=s=>{V(s),v.get(route("analytics.index"),{period:s,model_type:p},{preserveState:!0})},D=s=>{$(s),v.get(route("analytics.index"),{period:u,model_type:s},{preserveState:!0})},x=s=>new Intl.NumberFormat().format(s),f=s=>{if(!s)return"0s";const i=Math.floor(s/3600),j=Math.floor(s%3600/60),g=s%60;return i>0?`${i}h ${j}m`:j>0?`${j}m ${g}s`:`${g}s`},P=s=>{switch(s){case"desktop":return e.jsx(C,{className:"h-4 w-4"});case"mobile":return e.jsx(F,{className:"h-4 w-4"});case"tablet":return e.jsx(O,{className:"h-4 w-4"});default:return e.jsx(C,{className:"h-4 w-4"})}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Visitor Analytics"}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Visitor Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive analytics and insights for your application"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(b,{value:u,onValueChange:S,children:[e.jsx(y,{className:"w-40",children:e.jsx(w,{})}),e.jsx(_,{children:Object.entries(h.availablePeriods).map(([s,i])=>e.jsx(T,{value:s,children:i},s))})]}),e.jsxs(b,{value:p,onValueChange:D,children:[e.jsx(y,{className:"w-40",children:e.jsx(w,{})}),e.jsx(_,{children:Object.entries(h.availableModels).map(([s,i])=>e.jsx(T,{value:s,children:i},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Total Visits"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x(c.total_visits)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x(c.unique_visitors)," unique visitors"]})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Authenticated Users"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x(c.authenticated_visitors)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.total_visits>0?Math.round(c.authenticated_visitors/c.total_visits*100):0,"% of total visits"]})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Bounce Rate"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[c.bounce_rate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Single page visits"})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Avg. Time Spent"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f(c.average_time_spent||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per session"})]})]})]}),e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(t,{children:"Model Performance"}),e.jsx(n,{children:"Visitor statistics by model type"})]}),e.jsx(l,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(M).map(([s,i])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s}),e.jsxs(U,{variant:"secondary",children:[i.model_count||i.page_count||0," items"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Visits:"}),e.jsx("span",{className:"font-medium",children:x(i.total_visits)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Unique:"}),e.jsx("span",{className:"font-medium",children:x(i.unique_visitors)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Bounce Rate:"}),e.jsxs("span",{className:"font-medium",children:[i.bounce_rate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Avg. Time:"}),e.jsx("span",{className:"font-medium",children:f(i.average_time_spent||0)})]})]})]},s))})})]}),e.jsxs(q,{defaultValue:"devices",className:"space-y-4",children:[e.jsxs(A,{children:[e.jsx(m,{value:"devices",children:"Devices"}),e.jsx(m,{value:"browsers",children:"Browsers"}),e.jsx(m,{value:"geography",children:"Geography"}),e.jsx(m,{value:"pages",children:"Top Pages"}),e.jsx(m,{value:"referrers",children:"Referrers"})]}),e.jsx(o,{value:"devices",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(t,{children:"Device Distribution"}),e.jsx(n,{children:"How visitors access your application"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:d.device_distribution.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[P(s.device_type),e.jsx("span",{className:"capitalize",children:s.device_type})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[s.count," (",s.percentage,"%)"]})]})]},s.device_type))})})]})}),e.jsx(o,{value:"browsers",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(t,{children:"Browser Distribution"}),e.jsx(n,{children:"Most popular browsers among visitors"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:d.browser_distribution.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.browser}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[s.count," (",s.percentage,"%)"]})]})]},s.browser))})})]})}),e.jsx(o,{value:"geography",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(t,{children:"Geographic Distribution"}),e.jsx(n,{children:"Where your visitors are located"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:d.geographic_distribution.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:s.country})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[s.count," (",s.percentage,"%)"]})]})]},s.country))})})]})}),e.jsx(o,{value:"pages",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(t,{children:"Top Pages"}),e.jsx(n,{children:"Most visited pages in your application"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:d.top_pages.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm truncate max-w-md",children:s.url}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[s.count," (",s.percentage,"%)"]})]})]},s.url))})})]})}),e.jsx(o,{value:"referrers",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(t,{children:"Top Referrers"}),e.jsx(n,{children:"Where your visitors are coming from"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:d.top_referrers.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm truncate max-w-md",children:s.referrer}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("span",{className:"text-sm font-medium w-16 text-right",children:[s.count," (",s.percentage,"%)"]})]})]},s.referrer))})})]})})]})]})]})}export{de as default};

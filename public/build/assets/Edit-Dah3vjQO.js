import{r as n,m as V,j as e,L as D,$ as q}from"./app-DA8sOZWN.js";import{A as B}from"./app-layout-NqvxRZx-.js";import{B as x}from"./button-C3vSmMDb.js";import{C as R,a as $,b as z,c as H,d as P,e as U}from"./card-imU-9qlR.js";import{I as w}from"./input-DRHpveui.js";import{L as o}from"./label-GHah2W4I.js";import{T as C}from"./textarea-8Wn81s9B.js";import{S as h,a as p,b as u,c as j,d}from"./select-DMWZmMYp.js";import{T as G,a as J,b as S,c as T}from"./tabs-9rihyH-F.js";import{L as K}from"./LocationSelector-VasPKYXt.js";import{u as O}from"./translate-6C-KY6tx.js";import{S as Q,T as W}from"./triangle-alert-CMVbXdW-.js";import{A as X}from"./arrow-left-B5nCS7WS.js";import{F as Y}from"./file-text-eydQIyop.js";import{M as Z}from"./index-DysFxijF.js";import{S as ee}from"./save-Dt0yUSi7.js";import"./utils-Cbj8MG-M.js";import"./x-Dt5cQcwv.js";import"./createLucideIcon-C993a760.js";import"./index-D-v88lWu.js";import"./index-O_137OJP.js";import"./index-CqTR-B7w.js";import"./index-tK1OKhiv.js";import"./avatar-DUrQVzNN.js";import"./eye-F11dxYiJ.js";import"./users-FxlrPsxY.js";import"./tag-G_qXFnRU.js";import"./qr-code-BuIrK_G-.js";import"./database-BPVIruC7.js";import"./index-CaFwoxJZ.js";import"./check-C6sPznpd.js";import"./afghanistanLow-mnRKi4Rp.js";import"./AnimatedTheme-BUmUfnV6.js";import"./Theme-BmHcCuAX.js";import"./Circle-Dhn1WvuM.js";import"./SerialChart-C12eJX3u.js";import"./MapPolygonSeries-DF4bE1T0.js";import"./ZoomControl-ePXQFKJE.js";import"./ZoomTools-BzdHUcwi.js";import"./LinearGradient-D75CNNI3.js";const te=[{title:"Info Management",href:"#"},{title:"Info Records",href:route("infos.index")},{title:"Edit",href:"#"}];function He({info:a,infoTypes:g=[],infoCategories:f=[],departments:b=[]}){var _;const{t:r}=O(),[c,L]=n.useState("basic"),[v,N]=n.useState(!1),y=()=>a.value&&typeof a.value=="object"&&a.value.location?a.value.location:null,[k,F]=n.useState(y()),{data:i,setData:l,put:A,processing:m,errors:s}=V({name:a.name||"",code:a.code||"",description:a.description||"",info_type_id:a.info_type_id?a.info_type_id.toString():"",info_category_id:a.info_category_id?a.info_category_id.toString():"",department_id:(_=a.department)!=null&&_.id?a.department.id.toString():"none",value:{content:a.value&&typeof a.value=="object"&&a.value.content?a.value.content:"",location:y()},confirmed:a.confirmed||!1}),I=t=>{L(t),t==="location"&&N(!0)},M=t=>{F(t),l("value",{...i.value,location:t})},E=t=>{t.preventDefault(),A(route("infos.update",a.id),{onSuccess:()=>{}})};return n.useEffect(()=>{(c==="location"||a.value&&typeof a.value=="object"&&a.value.location)&&N(!0)},[c,a.value]),e.jsxs(B,{breadcrumbs:te,children:[e.jsx(D,{title:r("info.edit.page_title",{name:a.name||"Info Record"})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-l from-blue-600 via-indigo-600 to-purple-600 p-8 text-white shadow-2xl mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 -translate-x-32"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 bg-white/5 rounded-full translate-y-24 translate-x-24"}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:justify-between lg:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-2xl border border-white/30",children:e.jsx(Q,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white drop-shadow-lg",children:r("info.edit.title")}),e.jsxs("p",{className:"text-white/90 flex items-center gap-2 mt-2 text-lg",children:[e.jsx(W,{className:"h-5 w-5"}),r("info.edit.description")]})]})]}),e.jsx(x,{variant:"outline",asChild:!0,className:"bg-white/20 backdrop-blur-sm border-white/30 text-white hover:bg-white/30 rounded-full shadow-lg",children:e.jsxs(q,{href:route("infos.index"),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),r("info.edit.back_to_list")]})})]})]}),e.jsx("form",{onSubmit:E,children:e.jsxs(R,{className:"border-none shadow-xl overflow-hidden bg-gradient-to-bl from-white to-blue-50/30",children:[e.jsxs($,{className:"bg-gradient-to-l from-blue-500 to-blue-600 text-white border-b pb-4",children:[e.jsxs(z,{className:"text-lg flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Y,{className:"h-5 w-5"})}),r("info.edit.form.title")]}),e.jsx(H,{className:"text-blue-100",children:r("info.edit.form.description")})]}),e.jsxs(P,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"info_type_id",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(h,{value:i.info_type_id,onValueChange:t=>l("info_type_id",t),required:!0,children:[e.jsx(p,{id:"info_type_id",children:e.jsx(u,{placeholder:"Select a type"})}),e.jsx(j,{children:g.length>0?g.map(t=>e.jsx(d,{value:t.id.toString(),children:t.name},t.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No types available"})})]}),s.info_type_id&&e.jsx("p",{className:"text-sm text-red-500",children:s.info_type_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"info_category_id",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(h,{value:i.info_category_id,onValueChange:t=>l("info_category_id",t),required:!0,children:[e.jsx(p,{id:"info_category_id",children:e.jsx(u,{placeholder:"Select a category"})}),e.jsx(j,{children:f.length>0?f.map(t=>e.jsx(d,{value:t.id.toString(),children:t.name},t.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No categories available"})})]}),s.info_category_id&&e.jsx("p",{className:"text-sm text-red-500",children:s.info_category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"department_id",children:"Department"}),e.jsxs(h,{value:i.department_id,onValueChange:t=>l("department_id",t),children:[e.jsx(p,{id:"department_id",children:e.jsx(u,{placeholder:"Select a department (optional)"})}),e.jsxs(j,{children:[e.jsx(d,{value:"none",children:"None"}),b.length>0?b.map(t=>e.jsx(d,{value:t.id.toString(),children:t.name},t.id)):e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No departments available"})]})]}),s.department_id&&e.jsx("p",{className:"text-sm text-red-500",children:s.department_id})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Name"}),e.jsx(w,{id:"name",value:i.name,onChange:t=>l("name",t.target.value)}),s.name&&e.jsx("p",{className:"text-sm text-red-500",children:s.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"code",children:"Code"}),e.jsx(w,{id:"code",value:i.code,onChange:t=>l("code",t.target.value),placeholder:"Unique identifier (optional)"}),s.code&&e.jsx("p",{className:"text-sm text-red-500",children:s.code}),e.jsx("p",{className:"text-sm text-gray-500",children:"A unique identifier for this record. Can contain letters, numbers, underscores, and hyphens."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(C,{id:"description",value:i.description,onChange:t=>l("description",t.target.value),rows:3}),s.description&&e.jsx("p",{className:"text-sm text-red-500",children:s.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Content"}),e.jsxs(G,{defaultValue:"basic",value:c,onValueChange:I,children:[e.jsxs(J,{className:"grid w-full grid-cols-2",children:[e.jsx(S,{value:"basic",children:"Basic Content"}),e.jsxs(S,{value:"location",className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-4 w-4"}),"Location"]})]}),e.jsx(T,{value:"basic",className:"pt-4",children:e.jsx(C,{id:"content",value:i.value.content,onChange:t=>l("value",{...i.value,content:t.target.value}),rows:5,placeholder:"Enter content here..."})}),e.jsx(T,{value:"location",className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Click on the map to select a location in Afghanistan."}),v&&e.jsx(K,{value:k,onChange:M}),!v&&e.jsx("div",{className:"h-[400px] flex items-center justify-center bg-gray-100 rounded-md",children:"Loading map..."})]})})]}),s.value&&e.jsx("p",{className:"text-sm text-red-500",children:s.value})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"confirmed",checked:i.confirmed,onChange:t=>l("confirmed",t.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx(o,{htmlFor:"confirmed",children:"Mark as Confirmed"})]}),s.confirmed&&e.jsx("p",{className:"text-sm text-red-500",children:s.confirmed})]})]}),e.jsxs(U,{className:"flex justify-between border-t px-6 py-5 bg-gradient-to-l from-blue-50 to-blue-100",children:[e.jsx(x,{variant:"outline",onClick:()=>window.history.back(),type:"button",disabled:m,className:"rounded-full border-blue-300 text-blue-700 hover:bg-blue-100 hover:border-blue-400 shadow-lg",children:r("common.cancel")}),e.jsxs(x,{type:"submit",disabled:m,className:"rounded-full px-8 font-medium bg-gradient-to-l from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),r(m?"info.edit.saving":"info.edit.save_changes")]})]})]})})]})]})}export{He as default};

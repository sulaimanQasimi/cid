import{m as A,r as D,j as e,L as V,$ as h}from"./app-D9EKp-j0.js";import{B as n}from"./button-C_lbOJaF.js";import{C,d as w,a as $,b as T,c as O,e as B}from"./card-CJ646PJT.js";import{P}from"./page-header-i4y0N3hM.js";import{A as U}from"./app-layout-DLN7lXRp.js";import{I as m}from"./input-CDqmtBAl.js";import{L as o}from"./label-DFSxdoGP.js";import{I as d}from"./input-error-D4iMLVDS.js";import{S as x,a as p,b as u,c as g,d as c}from"./select-Cs4X5igs.js";import{C as R}from"./checkbox-dg6Aszmc.js";import{A as H}from"./arrow-left-BcosiyJl.js";import{E as M}from"./eye-B6wn_tZH.js";import"./index-CEWyTXIf.js";import"./createLucideIcon-2sT-PLZR.js";import"./index--GEwVf8d.js";import"./index-BYrHusN6.js";import"./index-BdHtEbnZ.js";import"./x-CUky7n0R.js";import"./index-DQJiO2ZR.js";import"./avatar-DJGRXLRL.js";import"./app-logo-zrypSq5u.js";import"./app-logo-icon-BTqQbP9x.js";import"./tag-B3sBBI3s.js";import"./file-text-J_QMBZXb.js";import"./qr-code-Bvz4OGpj.js";import"./index-BrNC6hno.js";import"./check-C5q72oI5.js";const W=["#4f46e5","#3b82f6","#06b6d4","#10b981","#84cc16","#eab308","#f97316","#ef4444","#ec4899","#8b5cf6","#a3a3a3"];function fe({item:r,categories:j,parentItems:_=[],hasChildren:S}){var v,y;const{data:a,setData:t,put:k,processing:f,errors:i}=A({stat_category_id:r.stat_category_id.toString(),parent_id:r.parent_id?r.parent_id.toString():"null",name:r.name,label:r.label,color:r.color||"",status:r.status,order:r.order}),[b,I]=D.useState(!1),l=j.find(s=>s.id.toString()===a.stat_category_id),L=[{title:"Dashboard",href:"/dashboard"},{title:"Settings",href:"#"},{title:"Stat Categories",href:route("stat-categories.index")},{title:((v=r.category)==null?void 0:v.label)||"Category",href:route("stat-categories.show",(y=r.category)==null?void 0:y.id)},{title:r.name,href:route("stat-category-items.show",r.id)},{title:"Edit",href:route("stat-category-items.edit",r.id)}],E=s=>{s.preventDefault();const F=route("stat-category-items.update",r.id),N=new URL(F,window.location.origin);b&&N.searchParams.append("redirect_to_category","true"),k(N.toString())};return e.jsxs(U,{breadcrumbs:L,children:[e.jsx(V,{title:`Edit Item - ${r.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(P,{title:`Edit: ${r.label}`,description:`Edit details for item: ${r.name}`,actions:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(h,{href:route("stat-category-items.index",{category_id:r.stat_category_id}),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Back to Items"]})}),e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(h,{href:route("stat-category-items.show",r.id),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"View Item"]})})]})}),S&&e.jsx(C,{className:"bg-amber-50 dark:bg-amber-950 border-amber-200 dark:border-amber-800",children:e.jsx(w,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"text-amber-600 dark:text-amber-400",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-alert-triangle",children:[e.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e.jsx("path",{d:"M12 9v4"}),e.jsx("path",{d:"M12 17h.01"})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-300",children:"This item has child items"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:"Values cannot be assigned to this item because it has children. Values can only be assigned to leaf items without children."})]})]})})}),e.jsx("form",{onSubmit:E,children:e.jsxs(C,{children:[e.jsxs($,{children:[e.jsx(T,{children:"Item Information"}),e.jsx(O,{children:"Update the details for this category item"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"category",children:"Category"}),e.jsxs(x,{value:a.stat_category_id,onValueChange:s=>t("stat_category_id",s),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select a category"})}),e.jsx(g,{children:j.map(s=>e.jsx(c,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:s.color}}),s.label]})},s.id))})]}),e.jsx(d,{message:i.stat_category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"parent_id",children:"Parent Item (Optional)"}),e.jsxs(x,{value:a.parent_id,onValueChange:s=>t("parent_id",s),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"No parent (top level)"})}),e.jsxs(g,{children:[e.jsx(c,{value:"null",children:"No parent (top level)"}),_.map(s=>e.jsx(c,{value:s.id.toString(),children:s.label},s.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a parent item or leave empty for a top-level item."}),e.jsx(d,{message:i.parent_id})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Item Name"}),e.jsx(m,{id:"name",value:a.name,onChange:s=>t("name",s.target.value),placeholder:"system_name"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"System name should be lowercase with underscores instead of spaces."}),e.jsx(d,{message:i.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"label",children:"Display Label"}),e.jsx(m,{id:"label",value:a.label,onChange:s=>t("label",s.target.value),placeholder:"Display Label"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is how the item will be displayed to users."}),e.jsx(d,{message:i.label})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"color",children:"Color (Optional)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full border",style:{backgroundColor:a.color||(l==null?void 0:l.color)||"#e2e8f0"}}),e.jsx(m,{id:"color",value:a.color,onChange:s=>t("color",s.target.value),placeholder:(l==null?void 0:l.color)||"Optional override"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[W.map(s=>e.jsx("button",{type:"button",className:`h-6 w-6 rounded-full border ${a.color===s?"ring-2 ring-primary ring-offset-2":""}`,style:{backgroundColor:s},onClick:()=>t("color",s)},s)),l&&e.jsx("button",{type:"button",className:`h-6 w-6 rounded-full border ${a.color===""?"ring-2 ring-primary ring-offset-2":""}`,style:{backgroundColor:l.color},onClick:()=>t("color",""),title:"Use category default"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to use the category's default color."}),e.jsx(d,{message:i.color})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"status",children:"Status"}),e.jsxs(x,{value:a.status,onValueChange:s=>t("status",s),children:[e.jsx(p,{children:e.jsx(u,{placeholder:"Select status"})}),e.jsxs(g,{children:[e.jsx(c,{value:"active",children:"Active"}),e.jsx(c,{value:"inactive",children:"Inactive"})]})]}),e.jsx(d,{message:i.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"order",children:"Display Order"}),e.jsx(m,{id:"order",type:"number",min:"0",value:a.order.toString(),onChange:s=>t("order",parseInt(s.target.value)||0),placeholder:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower numbers appear first."}),e.jsx(d,{message:i.order})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[e.jsx(R,{id:"redirect_to_category",checked:b,onCheckedChange:s=>{I(s===!0)}}),e.jsx(o,{htmlFor:"redirect_to_category",className:"text-sm font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"After saving, redirect to the category details page"})]})]}),e.jsxs(B,{className:"flex justify-end space-x-2",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsx(h,{href:route("stat-category-items.show",r.id),children:"Cancel"})}),e.jsx(n,{type:"submit",disabled:f,children:f?"Saving...":"Save Changes"})]})]})})]})]})}export{fe as default};

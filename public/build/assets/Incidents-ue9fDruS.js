import{j as e,L as u,$ as a}from"./app-CaOFbb5p.js";import{B as n}from"./button-BgmOCw2s.js";import{C as c,d as l,a as f,b as j,c as _}from"./card-BisyDRUw.js";import{B as i}from"./badge-DkAel5D-.js";import{P as g}from"./page-header-DixF9XNI.js";import{A as N,C as b}from"./app-layout-BnaWUlXy.js";import{u as v}from"./translate-TdXOf_jB.js";import{A as w}from"./arrow-left-7nojBI5D.js";import{P as o}from"./plus-BJ1qFFYt.js";import{f as m}from"./index-CaunA62S.js";import{M as C}from"./users-DacFqtlq.js";import{F as y}from"./file-text-tQrNfThz.js";import"./index-djsfXYng.js";import"./createLucideIcon-YrFxUe8D.js";import"./index-QYTXijtn.js";import"./index-CMwx1BFh.js";import"./index-Dz_2ROfM.js";import"./x-BX68FbZw.js";import"./index-CB1115OV.js";import"./avatar-DwlMoviI.js";import"./app-logo-DEy1bYcE.js";import"./app-logo-icon-BNvkhmTw.js";import"./triangle-alert-DwpGNmzU.js";import"./tag-CRH5rx9C.js";import"./qr-code-DvifJzwA.js";function X({report:r,incidents:d}){const{t}=v(),x=[{title:t("sidebar.intelligence_dashboard"),href:"/dashboard"},{title:t("sidebar.incident_reports"),href:route("incident-reports.index")},{title:r.report_number,href:route("incident-reports.show",r.id)},{title:t("incidents.page_title"),href:route("incident-reports.incidents",r.id)}];function h(s){switch(s){case"high":return e.jsx(i,{variant:"destructive",children:s});case"medium":return e.jsx(i,{variant:"default",children:s});default:return e.jsx(i,{variant:"outline",children:s})}}function p(s){switch(s){case"closed":return e.jsx(i,{variant:"secondary",children:t("incidents.status.closed")});case"in_progress":return e.jsx(i,{variant:"default",children:t("incidents.status.in_progress")});default:return e.jsx(i,{variant:"outline",children:s})}}return e.jsxs(N,{breadcrumbs:x,children:[e.jsx(u,{title:t("incident_reports.incidents.page_title",{number:r.report_number})}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(g,{title:t("incident_reports.incidents.page_header_title",{number:r.report_number}),description:t("incident_reports.incidents.page_header_desc",{date:m(new Date(r.report_date),"PPP")}),actions:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(a,{href:route("incident-reports.show",r.id),children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),t("incident_reports.actions.back_to_report")]})}),e.jsx(n,{asChild:!0,children:e.jsxs(a,{href:route("incidents.create",{report_id:r.id}),children:[e.jsx(o,{className:"mr-2 h-4 w-4"}),t("incident_reports.actions.add_incident")]})})]})}),d.length===0?e.jsx(c,{children:e.jsx(l,{className:"flex flex-col items-center justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:t("incidents.no_incidents")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("incident_reports.incidents.empty.description")}),e.jsx(n,{className:"mt-4",asChild:!0,children:e.jsxs(a,{href:route("incidents.create",{report_id:r.id}),children:[e.jsx(o,{className:"mr-2 h-4 w-4"}),t("incident_reports.incidents.empty.add_first")]})})]})})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(s=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(f,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{className:"text-base",children:e.jsx(a,{href:route("incidents.show",s.id),className:"hover:underline text-primary",children:s.title})}),e.jsxs(_,{className:"flex items-center text-xs",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),m(new Date(s.incident_date),"PPP")]})]}),s.category?e.jsx(i,{style:{backgroundColor:s.category.color},children:s.category.name}):e.jsx(i,{variant:"outline",children:t("incident_reports.incidents.uncategorized")})]})}),e.jsxs(l,{className:"flex-1 pb-2",children:[e.jsxs("div",{className:"mb-3 flex items-start text-xs text-muted-foreground",children:[e.jsx(C,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:s.location||t("incidents.unspecified_location")})]}),e.jsx("p",{className:"text-sm line-clamp-3",children:s.description})]}),e.jsx("div",{className:"px-6 pb-4 pt-0 mt-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[h(s.severity),p(s.status)]}),e.jsx(n,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(a,{href:route("incidents.show",s.id),children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),t("incident_reports.view")]})})]})})]},s.id))})]})]})}export{X as default};

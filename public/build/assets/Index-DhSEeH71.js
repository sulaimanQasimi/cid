import{r as c,K as Y,j as e,L as Z,$ as y,a as ee}from"./app-i9gygtI7.js";import{A as se}from"./app-layout-COHwvIY4.js";import{B as o}from"./button-DA8WHqQ5.js";import{C as ae,a as te,b as re,c as le,d as ne,e as oe}from"./card-NUH92OWN.js";import{T as ie,a as ce,b as S,c as w,d as de,e as j}from"./table-C-ClZ2FP.js";import{S as O,a as P,b as $,c as D,d as T}from"./select-yjOttDTn.js";import{I as E}from"./input-DoARJtkj.js";import{u as ue}from"./translate-wL0aa-sI.js";import{c as B}from"./createLucideIcon-CCdCu9x0.js";import{P as me}from"./plus-DpSM99ox.js";import{S as xe}from"./search-CdlVHK6c.js";import"./utils-Cqzwlyr3.js";import"./index-BYxWpEkI.js";import"./index-DvqLlsqE.js";import"./index-CeLN-tmV.js";import"./index-CVa0K7PG.js";import"./x-C8tQnPGz.js";import"./index-BVlwhF2s.js";import"./avatar-sdpJXCM7.js";import"./app-logo-Zw_iVi_A.js";import"./app-logo-icon-CAGB5ViX.js";import"./eye-CM8Mcy_6.js";import"./file-text-DN0_y2i8.js";import"./users-CRlr-5yi.js";import"./tag-BP1vVV3I.js";import"./triangle-alert-TrSvGMVO.js";import"./qr-code-5CTkCvG_.js";import"./globe-DI9HJTz2.js";import"./index-DOgva_i9.js";import"./check-BTVcMUtY.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],he=B("Download",pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],je=B("Upload",ge);function We({languages:f=[],translations:l={data:[],current_page:1,last_page:1,per_page:15,total:0},groups:F=[],filters:v={}}){var H;const{t:a}=ue(),[u,G]=c.useState(""),{auth:fe,csrf_token:ve}=Y().props,[L,R]=c.useState(!1),[m,C]=c.useState({}),[x,k]=c.useState({}),[q,K]=c.useState(!1),i=v.language||((H=f[0])==null?void 0:H.code)||"en",n=v.group||"all",z=c.useMemo(()=>{var s;return(s=f.find(t=>t.code===i))==null?void 0:s.id},[f,i]),A=F.map(s=>s||"unnamed-group"),N=(l==null?void 0:l.data)||[],p=(l==null?void 0:l.current_page)||1,I=(l==null?void 0:l.last_page)||1,M=(l==null?void 0:l.total)||0,V=u?N.filter(s=>{var t,r;return((t=s.key)==null?void 0:t.toLowerCase().includes(u.toLowerCase()))||((r=s.value)==null?void 0:r.toLowerCase().includes(u.toLowerCase()))}):N,b=c.useMemo(()=>Object.keys(m).length>0||Object.keys(x).length>0,[m,x]),Q=(s,t)=>{C(r=>({...r,[s]:t}))},U=(s,t)=>{k(r=>({...r,[s]:t}))},J=()=>{C({}),k({})},W=s=>{const t=s.indexOf(".");return t>0?s.slice(0,t):"general"},X=async()=>{if(b)try{K(!0);const s={};N.forEach(r=>{const h=r.key,d=(x[h]??h).trim();if(!d)return;const _=m[h]??r.value??"",g=W(d);s[g]||(s[g]={}),s[g][d]=_});const t=Object.entries(s);for(const[r,h]of t){const d=Object.entries(h).map(([_,g])=>ee.post("translations/import",{language_id:z,key:_,value:g,group:r}));console.log(d),await Promise.all(d)}C({}),k({}),window.location.href=route("translations.index",{page:p,language:i,group:n==="all"?"":n})}catch(s){console.error("Failed to save translations",s)}finally{K(!1)}};return e.jsxs(se,{children:[e.jsx(Z,{title:a("translations.translations")}),e.jsxs("div",{className:"container py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("translations.translations")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(y,{href:route("translations.export",{language_id:i,group:v.group==="all"?"":v.group}),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),a("translations.export")]})}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(y,{href:route("translations.export-json"),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),a("translations.export_translations")]})}),e.jsx(o,{asChild:!0,children:e.jsxs(y,{href:route("translations.create"),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),a("translations.add_translation")]})}),e.jsx(o,{variant:"outline",onClick:()=>R(s=>!s),children:a("common.edit")}),e.jsx(o,{onClick:X,disabled:!b||q,children:a("common.save")}),e.jsx(o,{variant:"outline",onClick:J,disabled:!b,children:a("common.cancel")})]})]}),e.jsxs(ae,{children:[e.jsxs(te,{children:[e.jsx(re,{children:a("translations.translations")}),e.jsx(le,{children:a("translations.description")})]}),e.jsxs(ne,{children:[e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(O,{value:i,onValueChange:s=>window.location.href=route("translations.index",{language:s,group:n==="all"?"":n}),children:[e.jsx(P,{children:e.jsx($,{placeholder:a("translations.select_language")})}),e.jsx(D,{children:f.map(s=>e.jsx(T,{value:s.code,children:s.name},s.code))})]})}),e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs(O,{value:n,onValueChange:s=>window.location.href=route("translations.index",{language:i,group:s==="all"?"":s}),children:[e.jsx(P,{children:e.jsx($,{placeholder:a("translations.select_group")})}),e.jsxs(D,{children:[e.jsx(T,{value:"all",children:a("translations.all_groups")}),A.map(s=>e.jsx(T,{value:s,children:s},s))]})]})}),e.jsxs("div",{className:"w-full md:w-1/3 relative",children:[e.jsx(E,{placeholder:a("translations.filter_translations"),value:u,onChange:s=>G(s.target.value),className:"pr-8"}),e.jsx(xe,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs(ie,{children:[e.jsx(ce,{children:e.jsxs(S,{children:[e.jsx(w,{children:a("translations.key")}),e.jsx(w,{children:a("translations.value")}),e.jsx(w,{children:a("translations.group")}),e.jsx(w,{className:"text-right",children:a("common.actions")})]})}),e.jsx(de,{children:V.length===0?e.jsx(S,{children:e.jsx(j,{colSpan:4,className:"text-center py-8",children:a(u?"common.no_results":"translations.no_translations")})}):V.map((s,t)=>e.jsxs(S,{children:[e.jsx(j,{className:"font-medium max-w-[250px]",title:x[s.key]??s.key,children:L?e.jsx(E,{value:x[s.key]??s.key,onChange:r=>U(s.key,r.target.value)}):e.jsx("span",{className:"truncate block",children:s.key})}),e.jsx(j,{className:"max-w-[300px]",title:m[s.key]??s.value,children:L?e.jsx(E,{value:m[s.key]??s.value??"",onChange:r=>Q(s.key,r.target.value)}):e.jsx("span",{className:s.value?"":"text-muted-foreground italic",children:s.value||"Empty"})}),e.jsx(j,{children:s.group}),e.jsx(j,{className:"text-right"})]},s.id??`${s.key}-${t}`))})]}),I>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("languages.total_languages",{count:String(M)})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{variant:"outline",size:"sm",disabled:p<=1,onClick:()=>window.location.href=route("translations.index",{page:p-1,language:i,group:n==="all"?"":n}),children:a("departments.prev")}),e.jsx(o,{variant:"outline",size:"sm",disabled:p>=I,onClick:()=>window.location.href=route("translations.index",{page:p+1,language:i,group:n==="all"?"":n}),children:a("departments.next")})]})]})]}),e.jsxs(oe,{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:a("translations.total_translations",{count:String(M)})}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsx(y,{href:route("languages.index"),children:a("languages.manage_languages")})})]})]})]})]})}export{We as default};

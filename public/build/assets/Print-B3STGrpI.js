import{r as d,j as e,L as _}from"./app-DmDo5wY0.js";import{B as b}from"./button-jP4wdIm_.js";import{u as R}from"./translate-CZarN8Xl.js";import{a as C,b as O}from"./date-BaJKjiu2.js";import{I as Y,Q as H}from"./browser-PgKc7ArP.js";import{L as q}from"./lock-CXS76HHf.js";import{A as k}from"./arrow-left-CVm_XHso.js";import{F as j}from"./file-text-CFIJyUxo.js";import{X as G,S as X}from"./x-DM2uWUfX.js";import{P as F}from"./palette-vaN96RPi.js";import{T as S}from"./type-C4B_34IU.js";import{P as T}from"./panels-top-left-BeL_ML0V.js";import{T as $}from"./tablet-smartphone-CR10UDp6.js";import{C as u}from"./calendar-BtwU3wUU.js";import{C as D}from"./clock-BzOyf_TS.js";import{S as J}from"./shield-DWNRSsYE.js";import{U as z}from"./user-mrEC5lDj.js";import{U as K}from"./users-DPt7sQqw.js";import{B as V}from"./book-text-BYVWPOQw.js";import{G as W}from"./gavel-CmBtN5rM.js";import{F as Z}from"./file-check-Dwfk3SQt.js";import{T as A}from"./triangle-alert-BCbMomVa.js";import{T as P}from"./tag-Cgf7madg.js";import{M as ee}from"./map-pin-CUovXqLP.js";import{B as te}from"./building-2-DpYzWC6y.js";import{f as se}from"./index-CaunA62S.js";import"./utils-PjlJSuiK.js";import"./createLucideIcon-B3WK61Vj.js";function ze({report:i,incidents:m,barcodeData:re,isAdmin:M}){var v,w;const{t}=R(),[f,L]=d.useState(""),[E,x]=d.useState(!1),[c,p]=d.useState("colors"),[r,B]=d.useState({headerColor:"#1f2937",textColor:"#374151",accentColor:"#3b82f6",fontFamily:"Amiri, Traditional Arabic, Arial, sans-serif",fontSize:12,showLogo:!0,showFooter:!0,showDate:!0,pageSize:"a4",orientation:"portrait",margins:"normal",dateFormat:"persian"}),y=(s,a)=>{const l=g=>{switch(g){case"narrow":return"0.5cm";case"wide":return"2cm";default:return"1cm"}},o=`
      @page {
        size: ${a.pageSize} ${a.orientation};
        margin: ${l(a.margins)};
      }
      @media print {
        body {
          font-family: ${a.fontFamily};
          print-color-adjust: exact;
          -webkit-print-color-adjust: exact;
          background: none;
          font-size: ${a.fontSize}px;
          color: ${a.textColor};
        }
        .print-header-bg {
          -webkit-print-color-adjust: exact !important;
          print-color-adjust: exact !important;
          background-color: ${a.headerColor} !important;
          color: white !important;
        }
        .text-accent, h1, h2, h3, .font-bold.text-accent {
          color: ${a.accentColor} !important;
        }
        .border-accent {
          border-color: ${a.accentColor} !important;
        }
        .bg-accent {
          background-color: ${a.accentColor} !important;
        }
      }
    `;s.innerHTML=o};d.useEffect(()=>{(async()=>{try{const l=i.report_number||i.id.toString(),o=await H.toDataURL(l,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"}});L(o)}catch(l){console.error("Error generating QR code:",l)}})();let a=document.getElementById("dynamic-print-styles");return a||(a=document.createElement("style"),a.id="dynamic-print-styles",document.head.appendChild(a)),y(a,r),()=>{const l=document.getElementById("dynamic-print-styles");l&&l.remove()}},[i.report_number,i.id,r]);const I=s=>{const a=Math.floor((s.getFullYear()-622)*.970224),l=Math.floor((s.getMonth()+1)*.970224),o=Math.floor(s.getDate()*.970224);return`${a}/${l.toString().padStart(2,"0")}/${o.toString().padStart(2,"0")}`},U=s=>{const a=s.getFullYear()-621,l=s.getMonth()+1,o=s.getDate();return`${a}/${l.toString().padStart(2,"0")}/${o.toString().padStart(2,"0")}`},h=s=>{if(!s)return"";try{const a=new Date(s);switch(r.dateFormat){case"hijri":return I(a);case"persian":return U(a);case"gregorian":default:return se(a,"yyyy/MM/dd")}}catch{return""}},n=(s,a)=>{B(l=>{const o={...l,[s]:a},g=document.getElementById("dynamic-print-styles");return g&&y(g,o),o})},Q=()=>{window.print()},N=()=>{window.history.back()};return M?e.jsxs(e.Fragment,{children:[e.jsx(_,{title:t("incident_reports.print.page_title",{number:i.report_number})}),e.jsx("style",{id:"dynamic-print-styles"}),E&&e.jsx("div",{className:"screen-only fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[e.jsx(j,{className:"mr-2 h-5 w-5"}),t("incident_reports.print.settings.title")||"تنظیمات چاپ"]}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{onClick:()=>p("colors"),className:`px-4 py-2 border-b-2 font-medium text-sm ${c==="colors"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),t("incident_reports.print.settings.tabs.colors")||"رنگ‌ها"]})}),e.jsx("button",{onClick:()=>p("typography"),className:`px-4 py-2 border-b-2 font-medium text-sm ${c==="typography"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),t("incident_reports.print.settings.tabs.typography")||"تایپوگرافی"]})}),e.jsx("button",{onClick:()=>p("layout"),className:`px-4 py-2 border-b-2 font-medium text-sm ${c==="layout"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),t("incident_reports.print.settings.tabs.layout")||"چیدمان"]})}),e.jsx("button",{onClick:()=>p("date_format"),className:`px-4 py-2 border-b-2 font-medium text-sm ${c==="date_format"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),t("incident_reports.print.settings.tabs.date_format")||"فرمت تاریخ"]})})]}),c==="colors"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"mr-2 h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-md font-medium",children:t("incident_reports.print.settings.colors.title")||"رنگ‌ها"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.colors.header")||"رنگ هدر"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",id:"headerColorPicker",value:r.headerColor,onChange:s=>n("headerColor",s.target.value),className:"sr-only"}),e.jsx("label",{htmlFor:"headerColorPicker",className:"block h-10 w-10 rounded border border-gray-300 cursor-pointer",style:{backgroundColor:r.headerColor}})]}),e.jsx("input",{type:"text",value:r.headerColor,onChange:s=>n("headerColor",s.target.value),className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.colors.text")||"رنگ متن"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",id:"textColorPicker",value:r.textColor,onChange:s=>n("textColor",s.target.value),className:"sr-only"}),e.jsx("label",{htmlFor:"textColorPicker",className:"block h-10 w-10 rounded border border-gray-300 cursor-pointer",style:{backgroundColor:r.textColor}})]}),e.jsx("input",{type:"text",value:r.textColor,onChange:s=>n("textColor",s.target.value),className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.colors.accent")||"رنگ تاکید"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",id:"accentColorPicker",value:r.accentColor,onChange:s=>n("accentColor",s.target.value),className:"sr-only"}),e.jsx("label",{htmlFor:"accentColorPicker",className:"block h-10 w-10 rounded border border-gray-300 cursor-pointer",style:{backgroundColor:r.accentColor}})]}),e.jsx("input",{type:"text",value:r.accentColor,onChange:s=>n("accentColor",s.target.value),className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm"})]})]})]})]}),c==="typography"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"mr-2 h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-md font-medium",children:t("incident_reports.print.settings.typography.title")||"تایپوگرافی"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.typography.font_family")||"فونت"}),e.jsxs("select",{value:r.fontFamily,onChange:s=>n("fontFamily",s.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[e.jsxs("option",{value:"Amiri, Traditional Arabic, Arial, sans-serif",children:["Amiri (",t("incident_reports.print.settings.typography.font_default"),")"]}),e.jsx("option",{value:"Traditional Arabic, Arial, sans-serif",children:"Traditional Arabic"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),e.jsx("option",{value:"Calibri, sans-serif",children:"Calibri"}),e.jsx("option",{value:"Tahoma, sans-serif",children:"Tahoma"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.typography.font_size")||"اندازه فونت"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"range",min:"10",max:"16",value:r.fontSize,onChange:s=>n("fontSize",parseInt(s.target.value)),className:"flex-1"}),e.jsxs("span",{className:"ml-2 text-sm w-10 text-center",children:[r.fontSize,"pt"]})]})]})]})]}),c==="layout"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"mr-2 h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-md font-medium",children:t("incident_reports.print.settings.layout.title")||"چیدمان"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.layout.page_size")||"اندازه صفحه"}),e.jsxs("select",{value:r.pageSize,onChange:s=>n("pageSize",s.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"a4",children:"A4"}),e.jsx("option",{value:"letter",children:"Letter"}),e.jsx("option",{value:"legal",children:"Legal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.layout.orientation")||"جهت صفحه"}),e.jsxs("select",{value:r.orientation,onChange:s=>n("orientation",s.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"portrait",children:t("incident_reports.print.settings.layout.orientation.portrait")}),e.jsx("option",{value:"landscape",children:t("incident_reports.print.settings.layout.orientation.landscape")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("incident_reports.print.settings.layout.margins")||"حاشیه"}),e.jsxs("select",{value:r.margins,onChange:s=>n("margins",s.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"normal",children:t("incident_reports.print.settings.layout.margins.normal")}),e.jsx("option",{value:"narrow",children:t("incident_reports.print.settings.layout.margins.narrow")}),e.jsx("option",{value:"wide",children:t("incident_reports.print.settings.layout.margins.wide")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.showLogo,onChange:s=>n("showLogo",s.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("incident_reports.print.settings.layout.show_logo")||"نمایش لوگو"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.showFooter,onChange:s=>n("showFooter",s.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("incident_reports.print.settings.layout.show_footer")||"نمایش پاورقی"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.showDate,onChange:s=>n("showDate",s.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("incident_reports.print.settings.layout.show_date")||"نمایش تاریخ"})]})]})]}),c==="date_format"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"mr-2 h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-md font-medium",children:t("incident_reports.print.settings.date_format.title")||"فرمت تاریخ"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("incident_reports.print.settings.date_format.title")||"فرمت تاریخ"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"dateFormat",value:"gregorian",checked:r.dateFormat==="gregorian",onChange:s=>n("dateFormat",s.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("incident_reports.print.settings.date_format.gregorian")||"میلادی"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"dateFormat",value:"hijri",checked:r.dateFormat==="hijri",onChange:s=>n("dateFormat",s.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("incident_reports.print.settings.date_format.hijri")||"هجری قمری"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"dateFormat",value:"persian",checked:r.dateFormat==="persian",onChange:s=>n("dateFormat",s.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:t("incident_reports.print.settings.date_format.persian")||"هجری شمسی"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:t("incident_reports.print.settings.date_format.preview")}),e.jsx("div",{className:"text-sm text-gray-600",children:h(new Date().toISOString())})]})]})]})]}),e.jsxs("div",{className:"border-t px-4 py-3 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:t("common.cancel")||"لغو"}),e.jsx("button",{onClick:()=>{x(!1),setTimeout(()=>window.print(),300)},className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:t("incident_reports.print.settings.apply_and_print")||"اعمال و چاپ"})]})]})}),e.jsxs("div",{className:"print:max-w-none print:p-0 print:m-0",style:{fontFamily:r.fontFamily,color:r.textColor,fontSize:`${r.fontSize}px`},children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @media print {
            .print\\:text-xs {
              font-size: 10px !important;
            }
            .print\\:border-gray-800 {
              border-color: #1f2937 !important;
            }
            .print\\:border-gray-600 {
              border-color: #4b5563 !important;
            }
            .print\\:hidden {
              display: none !important;
            }
            .screen-only {
              display: none !important;
            }
          }
          @media screen {
            .screen-only {
              display: block;
            }
          }
        `}}),e.jsx("div",{className:"mb-6 print:hidden",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(b,{onClick:N,variant:"outline",size:"lg",className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),t("incident_reports.print.back_button")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{onClick:()=>x(!0),variant:"outline",size:"lg",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),t("incident_reports.print.settings_button")||"تنظیمات چاپ"]}),e.jsxs(b,{onClick:Q,size:"lg",className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(j,{className:"h-4 w-4"}),t("incident_reports.print.print_button")]})]})]})}),e.jsxs("div",{className:"print:page-break-inside-avoid relative",children:[e.jsx("h1",{className:"text-2xl font-bold text-black text-center mb-2",children:t("incident_reports.print.title")}),e.jsx("h2",{className:"text-xl font-semibold text-black text-center pt-2 mb-4",children:t("incident_reports.print.subtitle")}),f&&e.jsx("div",{className:"absolute top-0 right-0 print:top-0 print:right-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:f,alt:"QR Code",className:"w-24 h-24 print:w-20 print:h-20 border border-gray-300 print:border-gray-600"}),e.jsx("p",{className:"text-xs text-gray-600 print:text-gray-800 mt-1",children:i.report_number})]})})]}),e.jsxs("table",{className:"w-full mt-4 print:text-xs",style:{borderCollapse:"collapse"},children:[e.jsxs("tr",{className:"text-sm border-b border-gray-900 print:border-gray-800",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(j,{className:"h-3 w-3"}),t("incident_reports.show.report_number"),":"]}),e.jsx("td",{className:"pr-4",children:i.report_number}),e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),t("incident_reports.show.report_date_label"),":"]}),e.jsx("td",{className:"pr-4",children:r.dateFormat==="persian"?C(i.report_date):h(i.report_date)})]}),e.jsxs("tr",{className:"text-sm border-b border-gray-900 print:border-gray-800",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),t("incident_reports.show.status"),":"]}),e.jsx("td",{className:"pr-4",children:t(`incident_reports.status.${i.report_status}`)}),e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),t("incident_reports.show.security_level"),":"]}),e.jsx("td",{className:"pr-4",children:t(`incident_reports.level.${i.security_level}`)})]}),e.jsxs("tr",{className:"text-sm border-b border-gray-900 print:border-gray-800",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),t("incident_reports.show.submitted_by"),":"]}),e.jsx("td",{className:"pr-4",children:((v=i.submitter)==null?void 0:v.name)||t("incidents.unknown")}),e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),t("incident_reports.show.approved_by"),":"]}),e.jsx("td",{className:"pr-4",children:((w=i.approver)==null?void 0:w.name)||t("incident_reports.print.pending_approval")})]}),i.source&&e.jsxs("tr",{className:"text-sm pt-2 py-2",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),t("incident_reports.show.source_label"),":"]}),e.jsx("td",{colSpan:3,children:i.source})]})]}),e.jsx("hr",{className:"my-4 border-gray-900 print:border-gray-800"}),e.jsxs("div",{className:"mt-4 print:page-break-inside-avoid",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),t("incident_reports.details.title")]}),e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 print:bg-white print:border print:border-gray-300 rounded",children:[e.jsxs("h4",{className:"font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),t("incident_reports.details.details_label"),":"]}),e.jsx("p",{className:"text-sm text-justify leading-relaxed",children:i.details})]}),i.action_taken&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 print:bg-white print:border print:border-gray-300 rounded",children:[e.jsxs("h4",{className:"font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),t("incident_reports.details.action_taken_label"),":"]}),e.jsx("p",{className:"text-sm text-justify leading-relaxed",children:i.action_taken})]}),i.recommendation&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 print:bg-white print:border print:border-gray-300 rounded",children:[e.jsxs("h4",{className:"font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),t("incident_reports.details.recommendation_label"),":"]}),e.jsx("p",{className:"text-sm text-justify leading-relaxed",children:i.recommendation})]})]}),e.jsx("hr",{className:"my-4 border-gray-300 print:border-gray-600"}),e.jsxs("div",{className:"mt-4 print:page-break-inside-avoid",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),t("incidents.page_title")," (",m.length,")"]}),m.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(A,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:t("incidents.no_incidents")})]}):m.map((s,a)=>e.jsxs("div",{className:"mt-4 print:page-break-inside-avoid",children:[e.jsx("div",{className:"pt-4 mb-2",children:e.jsxs("h4",{className:"text-lg font-semibold text-black mb-2",children:[a+1,". ",s.title]})}),e.jsxs("table",{className:"w-full print:text-xs",style:{borderCollapse:"collapse"},children:[e.jsxs("tr",{className:"border-b border-gray-300 print:border-gray-600",children:[e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),t("incidents.incident_date"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:r.dateFormat==="persian"?C(s.incident_date):h(s.incident_date)}),e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),t("incidents.severity"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:s.severity}),e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),t("incidents.status"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:t(`incidents.status.${s.status}`)})]}),e.jsxs("tr",{className:"border-b border-gray-300 print:border-gray-600",children:[s.location&&e.jsxs(e.Fragment,{children:[e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),t("incidents.location"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:s.location})]}),s.district&&e.jsxs(e.Fragment,{children:[e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),t("incidents.district"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:s.district.name})]}),s.category&&e.jsxs(e.Fragment,{children:[e.jsxs("th",{className:"text-left pr-2 font-semibold py-1 flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),t("incidents.category"),":"]}),e.jsx("td",{className:"pr-4 py-1",children:s.category.name})]})]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 print:bg-white print:border print:border-gray-300 rounded",children:[e.jsxs("h4",{className:"font-semibold text-black mb-2 flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),t("incidents.description"),":"]}),e.jsx("p",{className:"text-sm text-justify leading-relaxed",children:s.description})]}),a<m.length-1&&e.jsx("hr",{className:"my-4 border-gray-300 print:border-gray-600"})]},s.id))]}),r.showFooter&&e.jsx("div",{className:"mt-8 pt-4 border-t border-gray-300 print:border-gray-600 print:mt-12",children:e.jsx("div",{className:"text-center text-sm text-gray-600 print:text-gray-800",children:r.showDate&&e.jsxs("p",{className:"flex items-center justify-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),t("incident_reports.print.generated_on"),": ",r.dateFormat==="persian"?O(new Date().toISOString()):h(new Date().toISOString())]})})})]})]}):e.jsxs("div",{className:"print:max-w-none print:p-0 print:m-0",style:{fontFamily:"Arial, sans-serif"},children:[e.jsx(_,{title:t("incident_reports.print.access_denied")}),e.jsx("div",{className:"min-h-screen bg-white p-8 flex items-center justify-center",dir:"rtl",children:e.jsxs("div",{className:"border border-red-200 shadow-sm max-w-md",children:[e.jsx("div",{className:"bg-red-50 border-b border-red-200 p-4",children:e.jsxs("h1",{className:"flex items-center gap-3 text-lg text-red-900",children:[e.jsx(q,{className:"h-5 w-5"}),t("incident_reports.print.access_denied")]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:t("incident_reports.print.admin_only")}),e.jsxs(b,{onClick:N,variant:"outline",className:"w-full",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),t("common.back")]})]})]})})]})}export{ze as default};

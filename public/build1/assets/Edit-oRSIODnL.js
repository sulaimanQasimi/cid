import{r as _,m as B,j as e,L as z}from"./app-D9EKp-j0.js";import{A as M,C as V}from"./app-layout-DLN7lXRp.js";import{B as h,c as m}from"./button-C_lbOJaF.js";import{C as v,a as b,b as y,c as C,d as w,e as O}from"./card-CJ646PJT.js";import{I as d}from"./input-CDqmtBAl.js";import{L as n}from"./label-DFSxdoGP.js";import{T as o}from"./textarea-5qnh3CSk.js";import{S as q,a as G,b as H,c as $,d as F}from"./select-Cs4X5igs.js";import{T as J,a as K,b as x,c as u}from"./tabs-BTzCsumf.js";import{u as Q}from"./translate-y1s7S1vJ.js";import{f as W}from"./index-CaunA62S.js";import{A as X}from"./arrow-left-BcosiyJl.js";import{C as T,B as Y}from"./camera-CBGSalRH.js";import{U as Z}from"./user-round-CpJGW8Jh.js";import{F as ee}from"./file-text-J_QMBZXb.js";import"./index-CEWyTXIf.js";import"./createLucideIcon-2sT-PLZR.js";import"./index--GEwVf8d.js";import"./index-BYrHusN6.js";import"./index-BdHtEbnZ.js";import"./x-CUky7n0R.js";import"./index-DQJiO2ZR.js";import"./avatar-DJGRXLRL.js";import"./app-logo-zrypSq5u.js";import"./app-logo-icon-BTqQbP9x.js";import"./tag-B3sBBI3s.js";import"./qr-code-Bvz4OGpj.js";import"./index-BrNC6hno.js";import"./check-C5q72oI5.js";function Ee({criminal:r,departments:p=[]}){const{t:i}=Q(),[A,S]=_.useState("personal"),[c,E]=_.useState(r.photo?`/storage/${r.photo}`:null),{data:l,setData:t,post:D,processing:f,errors:s}=B({_method:"PUT",photo:null,number:r.number||"",name:r.name||"",father_name:r.father_name||"",grandfather_name:r.grandfather_name||"",id_card_number:r.id_card_number||"",phone_number:r.phone_number||"",original_residence:r.original_residence||"",current_residence:r.current_residence||"",crime_type:r.crime_type||"",arrest_location:r.arrest_location||"",arrested_by:r.arrested_by||"",arrest_date:r.arrest_date||"",referred_to:r.referred_to||"",final_verdict:r.final_verdict||"",notes:r.notes||"",department_id:r.department_id?r.department_id.toString():"none"}),R=[{title:i("criminal.page_title"),href:route("criminals.index")},{title:r.name,href:route("criminals.show",r.id)},{title:i("criminal.edit.breadcrumb"),href:route("criminals.edit",r.id)}],k=a=>{S(a)},L=a=>{if(a.target.files&&a.target.files[0]){const j=a.target.files[0];t("photo",j);const g=new FileReader;g.onload=U=>{var N;E((N=U.target)==null?void 0:N.result)},g.readAsDataURL(j)}},I=a=>{a.preventDefault(),D(route("criminals.update",r.id),{forceFormData:!0,onSuccess:()=>{}})},P=r.created_at?W(new Date(r.created_at),"MMM d, yyyy"):"N/A";return e.jsxs(M,{breadcrumbs:R,children:[e.jsx(z,{title:i("criminal.edit.page_title",{name:r.name})}),e.jsxs("div",{className:"container px-0 py-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(h,{variant:"outline",size:"sm",asChild:!0,className:"rounded-full shadow-sm",children:e.jsxs("a",{href:route("criminals.show",r.id),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),i("criminal.edit.back_button")]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:i("criminal.edit.title")}),e.jsx("p",{className:"text-sm text-neutral-500",children:i("criminal.edit.created_on",{date:P})})]})]}),e.jsx("form",{onSubmit:I,children:e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsxs(v,{className:"lg:col-span-1 overflow-hidden border-none shadow-md",children:[e.jsxs(b,{className:"bg-neutral-50 dark:bg-neutral-900 border-b pb-4",children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx(T,{className:"h-5 w-5 text-neutral-500"}),i("criminal.edit.photo.title")]}),e.jsx(C,{children:i("criminal.edit.photo.description")})]}),e.jsx(w,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:m("relative mb-6 h-56 w-56 overflow-hidden rounded-xl border-2 border-dashed","bg-neutral-50 text-center transition-all duration-200 hover:border-primary/50","flex items-center justify-center",c?"border-primary/30":"border-neutral-200"),children:c?e.jsx("img",{src:c,alt:i("criminal.edit.photo.preview_alt"),className:"h-full w-full object-cover"}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center p-6",children:[e.jsx(T,{className:"mb-3 h-12 w-12 text-neutral-400"}),e.jsx("p",{className:"text-sm text-neutral-500 font-medium",children:i("criminal.edit.photo.no_photo")}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:i("criminal.edit.photo.click_to_upload")})]})}),e.jsx(n,{htmlFor:"photo",className:m("cursor-pointer rounded-full px-5 py-2.5 text-sm font-medium transition-colors","bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm"),children:i("criminal.edit.photo.change_button")}),e.jsx(d,{id:"photo",type:"file",accept:"image/*",onChange:L,className:"sr-only"}),s.photo&&e.jsx("p",{className:"mt-3 text-sm text-red-500 font-medium",children:s.photo}),e.jsx("div",{className:"mt-6 text-center max-w-xs",children:e.jsx("p",{className:"text-xs text-neutral-500",children:"Upload a clear, recent photo for identification purposes. Maximum file size: 2MB."})})]})})]}),e.jsxs(v,{className:"lg:col-span-2 border-none shadow-md overflow-hidden",children:[e.jsxs(b,{className:"bg-neutral-50 dark:bg-neutral-900 border-b pb-4",children:[e.jsx(y,{className:"text-lg",children:"Criminal Record Information"}),e.jsx(C,{children:"Update or modify the existing criminal record details"})]}),e.jsx(w,{className:"p-6",children:e.jsxs(J,{defaultValue:"personal",value:A,onValueChange:k,className:"w-full",children:[e.jsxs(K,{className:"grid w-full grid-cols-3 mb-6 rounded-lg p-1 bg-neutral-100 dark:bg-neutral-800",children:[e.jsxs(x,{value:"personal",className:m("data-[state=active]:shadow-sm flex items-center gap-2","transition-all duration-200"),children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Personal Details"})]}),e.jsxs(x,{value:"crime",className:m("data-[state=active]:shadow-sm flex items-center gap-2","transition-all duration-200"),children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Crime Details"})]}),e.jsxs(x,{value:"other",className:m("data-[state=active]:shadow-sm flex items-center gap-2","transition-all duration-200"),children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"Additional Info"})]})]}),e.jsxs(u,{value:"personal",className:"space-y-6 pt-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(n,{htmlFor:"name",className:"text-base font-medium",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{id:"name",value:l.name,onChange:a=>t("name",a.target.value),required:!0,placeholder:"Enter full name",className:"h-11"}),s.name&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.name})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"father_name",className:"font-medium",children:"Father's Name"}),e.jsx(d,{id:"father_name",value:l.father_name,onChange:a=>t("father_name",a.target.value),placeholder:"Enter father's name",className:"h-11"}),s.father_name&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.father_name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"grandfather_name",className:"font-medium",children:"Grandfather's Name"}),e.jsx(d,{id:"grandfather_name",value:l.grandfather_name,onChange:a=>t("grandfather_name",a.target.value),placeholder:"Enter grandfather's name",className:"h-11"}),s.grandfather_name&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.grandfather_name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"id_card_number",className:"font-medium",children:"ID Card Number"}),e.jsx(d,{id:"id_card_number",value:l.id_card_number,onChange:a=>t("id_card_number",a.target.value),placeholder:"Enter ID card number",className:"h-11"}),s.id_card_number&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.id_card_number})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"phone_number",className:"font-medium",children:"Phone Number"}),e.jsx(d,{id:"phone_number",value:l.phone_number,onChange:a=>t("phone_number",a.target.value),placeholder:"Enter phone number",className:"h-11"}),s.phone_number&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.phone_number})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"original_residence",className:"font-medium",children:"Original Residence"}),e.jsx(o,{id:"original_residence",value:l.original_residence,onChange:a=>t("original_residence",a.target.value),rows:2,placeholder:"Enter original residence address",className:"min-h-[80px] resize-none"}),s.original_residence&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.original_residence})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"current_residence",className:"font-medium",children:"Current Residence"}),e.jsx(o,{id:"current_residence",value:l.current_residence,onChange:a=>t("current_residence",a.target.value),rows:2,placeholder:"Enter current residence address",className:"min-h-[80px] resize-none"}),s.current_residence&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.current_residence})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"department_id",className:"font-medium",children:"Department"}),e.jsxs(q,{value:l.department_id,onValueChange:a=>t("department_id",a),children:[e.jsx(G,{id:"department_id",className:"h-11",children:e.jsx(H,{placeholder:"Select a department (optional)"})}),e.jsxs($,{children:[e.jsx(F,{value:"none",children:"None"}),p.length>0?p.map(a=>e.jsx(F,{value:a.id.toString(),children:a.name},a.id)):e.jsx("div",{className:"p-2 text-sm text-neutral-500",children:"No departments available"})]})]}),s.department_id&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.department_id})]})]}),e.jsxs(u,{value:"crime",className:"space-y-6 pt-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"number",className:"font-medium",children:"Record Number"}),e.jsx(d,{id:"number",value:l.number,onChange:a=>t("number",a.target.value),placeholder:"e.g. CR-2023-0001",className:"h-11"}),s.number&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.number})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"crime_type",className:"font-medium",children:"Crime Type"}),e.jsx(d,{id:"crime_type",value:l.crime_type,onChange:a=>t("crime_type",a.target.value),placeholder:"Enter type of crime",className:"h-11"}),s.crime_type&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.crime_type})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"arrest_date",className:"font-medium",children:"Arrest Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"arrest_date",type:"date",value:l.arrest_date,onChange:a=>t("arrest_date",a.target.value),className:"h-11"}),e.jsx(V,{className:"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-400 pointer-events-none"})]}),s.arrest_date&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.arrest_date})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"arrest_location",className:"font-medium",children:"Arrest Location"}),e.jsx(d,{id:"arrest_location",value:l.arrest_location,onChange:a=>t("arrest_location",a.target.value),placeholder:"Enter arrest location",className:"h-11"}),s.arrest_location&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.arrest_location})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"arrested_by",className:"font-medium",children:"Arrested By"}),e.jsx(d,{id:"arrested_by",value:l.arrested_by,onChange:a=>t("arrested_by",a.target.value),placeholder:"Officer/Department name",className:"h-11"}),s.arrested_by&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.arrested_by})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"referred_to",className:"font-medium",children:"Referred To"}),e.jsx(d,{id:"referred_to",value:l.referred_to,onChange:a=>t("referred_to",a.target.value),placeholder:"Court/Authority",className:"h-11"}),s.referred_to&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.referred_to})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"final_verdict",className:"font-medium",children:"Final Verdict"}),e.jsx(o,{id:"final_verdict",value:l.final_verdict,onChange:a=>t("final_verdict",a.target.value),rows:3,placeholder:"Enter the final verdict or sentence information",className:"min-h-[120px] resize-none"}),s.final_verdict&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.final_verdict})]})]}),e.jsx(u,{value:"other",className:"space-y-6 pt-2",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{htmlFor:"notes",className:"font-medium",children:"Additional Notes"}),e.jsx(o,{id:"notes",value:l.notes,onChange:a=>t("notes",a.target.value),rows:8,placeholder:"Enter any additional information about the criminal or the case",className:"min-h-[240px]"}),s.notes&&e.jsx("p",{className:"text-sm text-red-500 font-medium",children:s.notes}),e.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Add any additional details that might be relevant to this case but don't fit in the structured fields above."})]})})]})}),e.jsxs(O,{className:"flex justify-between border-t px-6 py-5 bg-neutral-50 dark:bg-neutral-900",children:[e.jsx(h,{variant:"outline",onClick:()=>window.location.href=route("criminals.show",r.id),type:"button",className:"rounded-full",children:"Cancel"}),e.jsx(h,{type:"submit",disabled:f,className:"rounded-full px-8 font-medium",children:f?"Saving...":"Update Record"})]})]})]})})]})]})}export{Ee as default};
